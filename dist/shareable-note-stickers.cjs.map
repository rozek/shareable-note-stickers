{"version":3,"file":"shareable-note-stickers.cjs","sources":["../src/shareable-note-stickers.ts"],"sourcesContent":["/*******************************************************************************\n*                                                                              *\n*                        Shareable Note Stickers (SNS)                         *\n*                                                                              *\n*******************************************************************************/\n\n  declare const QRCode:Function|Indexable\n\n  import {\n//  throwError,\n    quoted,\n    ValuesDiffer, ObjectIsEmpty,\n    ValueIsBoolean,\n    ValueIsNumber, ValueIsNumberInRange, ValueIsFiniteNumber,\n      ValueIsInteger, ValueIsIntegerInRange, ValueIsOrdinal,\n    ValueIsString, ValueIsStringMatching, ValueIsText, ValueIsTextline,\n    ValueIsFunction,\n    ValueIsObject, ValueIsPlainObject,\n    ValueIsList, ValueIsListSatisfying,\n    ValueIsOneOf,\n    ValueIsColor, ValueIsURL,\n    ValidatorForClassifier, acceptNil, rejectNil,\n    expectValue,\n    allowBoolean, expectBoolean,\n    allowInteger, expectInteger, allowIntegerInRange, expectIntegerInRange,\n      allowOrdinal, expectOrdinal, allowCardinal,\n    allowText, allowTextline, expectTextline,\n    allowPlainObject,\n    expectListSatisfying,\n    allowFunction, expectFunction,\n    allowOneOf,\n    allowColor, ValueIsEMailAddress, allowURL,\n  } from 'javascript-interface-library'\n  import * as JIL from 'javascript-interface-library'\n\n  const ValueIsPhoneNumber = ValueIsTextline // *C* should be implemented\n\n  import { html } from 'htm/preact'\n\n  import { customAlphabet }   from 'nanoid'\n// @ts-ignore TS2307 typescript has problems importing \"nanoid-dictionary\"\n  import { nolookalikesSafe } from 'nanoid-dictionary'\n\n  import hyperactiv from 'hyperactiv'\n  const { observe, computed, dispose } = hyperactiv\n\n/**** make some existing types indexable ****/\n\n  interface Indexable { [Key:string]:any }\n\n/**** define serializable types ****/\n\n  type serializableValue  = null | boolean | number | string |\n                            serializableObject | serializableArray\n  type serializableObject = { [Key:string]:serializableValue }\n  type serializableArray  = serializableValue[]\n  type Serializable       = serializableObject\n\n/**** prepare an SNS-specific Stylesheet ****/\n\n  const BehaviorStyleElement = document.createElement('style')\n    BehaviorStyleElement.innerHTML = `\n/**** DefaultSticker ****/\n\n  .SNS.DefaultSticker {\n    left:0px; top:0px; right:0px; bottom:0px;\n  }\n`\n  document.head.appendChild(BehaviorStyleElement)\n\n//------------------------------------------------------------------------------\n//--                             Type Definitions                             --\n//------------------------------------------------------------------------------\n\n  export type SNS_Id         = string         // mainly for illustrative reasons\n  export type SNS_Identifier = string                                    // dto.\n  export type SNS_Name       = string                                    // dto.\n  export type SNS_Ordinal    = number                                    // dto.\n  export type SNS_Cardinal   = number                                    // dto.\n  export type SNS_Text       = string                                    // dto.\n  export type SNS_Textline   = string                                    // dto.\n  export type SNS_URL        = string                                    // dto.\n  export type SNS_Color      = string                                    // dto.\n\n/**** geometry-related types ****/\n\n  export type SNS_Location  = number         // mainly for illustrative purposes\n  export type SNS_Dimension = number                                     // dto.\n  export type SNS_Position  = { x:SNS_Location,y:SNS_Location }\n  export type SNS_Size      = { Width:SNS_Dimension,Height:SNS_Dimension }\n  export type SNS_Geometry  = { x:SNS_Location,y:SNS_Location, Width:SNS_Dimension,Height:SNS_Dimension }\n\n/**** configuration-related types ****/\n\n  export const SNS_FontStyles = ['normal','italic']\n  export type  SNS_FontStyle  = typeof SNS_FontStyles[number]\n\n/**** Rendering Callback ****/\n\n  export type SNS_onRenderingCallback = (\n    Project:SNS_Project, Board?:SNS_Board, Sticker?:SNS_Sticker\n  ) => void\n\n/**** Error Report ****/\n\n  export const SNS_ErrorTypes = [\n    'missing Behaviour',         'Behaviour Execution Failure',\n    'Script Compilation Failure','Script Execution Failure',\n    'Rendering Failure',         'Event Handling Failure',\n    '\"onMount\" Callback Failure','\"onUnmount\" Callback Failure'\n  ]\n  export type SNS_ErrorType = typeof SNS_ErrorTypes[number]\n\n  export type SNS_Error = {\n    Type:SNS_ErrorType,          // also serves as a title for the error display\n    Message:SNS_Text,\n    Cause:any\n  }\n\n/**** Error Callback ****/\n\n  export type SNS_onErrorCallback = (\n    Project:SNS_Project, Visual:SNS_Visual, Error:SNS_Error\n  ) => void\n\n/**** Board-specific Dialogs ****/\n\n  export type SNS_Dialog = {\n    Id:SNS_Id, Name:SNS_Name, Title:SNS_Textline, isResizable:boolean,\n    x:SNS_Location, y:SNS_Location, Width:SNS_Dimension, Height:SNS_Dimension,\n    minWidth:number, maxWidth?:number, minHeight:number, maxHeight?:number,\n    Visibility:boolean, Renderer:Function, onClose?:Function\n  }\n/**** throwError - simplifies construction of named errors ****/\n\n  export function throwError (Message:string):never {\n    let Match = /^([$a-zA-Z][$a-zA-Z0-9]*):\\s*(\\S.+)\\s*$/.exec(Message)\n    if (Match == null) {\n      throw new Error(Message)\n    } else {\n      let namedError = new Error(Match[2])\n        namedError.name = Match[1]\n      throw namedError\n    }\n  }\n\n/**** throwReadOnlyError ****/\n\n// @ts-ignore TS2534 why is TS complaining here?\n  export function throwReadOnlyError (Name:string):never {\n    throwError(\n      'ReadOnlyProperty: property ' + quoted(Name) + ' must not be set'\n    )\n  }\n\n//------------------------------------------------------------------------------\n//--                 Classification and Validation Functions                  --\n//------------------------------------------------------------------------------\n\n/**** ValueIsVisual ****/\n\n  export function ValueIsVisual (Value:any):boolean {\n    return(Value instanceof SNS_Visual)\n  }\n\n/**** allow/expect[ed]Visual ****/\n\n  export const allowVisual = ValidatorForClassifier(\n    ValueIsVisual, acceptNil, 'SNS visual'\n  ), allowedVisual = allowVisual\n\n  export const expectVisual = ValidatorForClassifier(\n    ValueIsVisual, rejectNil, 'SNS visual'\n  ), expectedVisual = expectVisual\n\n/**** ValueIsFolder ****/\n\n  export function ValueIsFolder (Value:any):boolean {\n    return (Value instanceof SNS_Folder)\n  }\n\n/**** allow/expect[ed]Folder ****/\n\n  export const allowFolder = ValidatorForClassifier(\n    ValueIsFolder, acceptNil, 'SNS folder'\n  ), allowedFolder = allowFolder\n\n  export const expectFolder = ValidatorForClassifier(\n    ValueIsFolder, rejectNil, 'SNS folder'\n  ), expectedFolder = expectFolder\n\n/**** ValueIsProject ****/\n\n  export function ValueIsProject (Value:any):boolean {\n    return (Value instanceof SNS_Project)\n  }\n\n/**** allow/expect[ed]Project ****/\n\n  export const allowProject = ValidatorForClassifier(\n    ValueIsProject, acceptNil, 'SNS project'\n  ), allowedProject = allowProject\n\n  export const expectProject = ValidatorForClassifier(\n    ValueIsProject, rejectNil, 'SNS project'\n  ), expectedProject = expectProject\n\n/**** ValueIsBoard ****/\n\n  export function ValueIsBoard (Value:any):boolean {\n    return (Value instanceof SNS_Board)\n  }\n\n/**** allow/expect[ed]Board ****/\n\n  export const allowBoard = ValidatorForClassifier(\n    ValueIsBoard, acceptNil, 'SNS board'\n  ), allowedBoard = allowBoard\n\n  export const expectBoard = ValidatorForClassifier(\n    ValueIsBoard, rejectNil, 'SNS board'\n  ), expectedBoard = expectBoard\n\n/**** ValueIsSticker ****/\n\n  export function ValueIsSticker (Value:any):boolean {\n    return (Value instanceof SNS_Sticker)\n  }\n\n/**** allow/expect[ed]Sticker ****/\n\n  export const allowSticker = ValidatorForClassifier(\n    ValueIsSticker, acceptNil, 'SNS sticker'\n  ), allowedSticker = allowSticker\n\n  export const expectSticker = ValidatorForClassifier(\n    ValueIsSticker, rejectNil, 'SNS sticker'\n  ), expectedSticker = expectSticker\n\n/**** ValueIsId ****/\n\n  export function ValueIsId (Value:any):boolean {\n    return ValueIsTextline(Value) // *C* could definitely be better\n  }\n\n/**** allow/expect[ed]Id ****/\n\n  export const allowId = ValidatorForClassifier(\n    ValueIsId, acceptNil, 'unique SNS id'\n  ), allowedId = allowId\n\n  export const expectId = ValidatorForClassifier(\n    ValueIsId, rejectNil, 'unique SNS id'\n  ), expectedId = expectId\n\n/**** ValueIsIdentifier ****/\n\n  const SNS_IdentifierPattern = /^[a-z$_][a-z$_0-9]*$/i\n\n  export function ValueIsIdentifier (Value:any):boolean {\n    return ValueIsStringMatching(Value, SNS_IdentifierPattern)\n  }\n\n/**** allow/expect[ed]Identifier ****/\n\n  export const allowIdentifier = ValidatorForClassifier(\n    ValueIsIdentifier, acceptNil, 'note stickers identifier'\n  ), allowedIdentifier = allowIdentifier\n\n  export const expectIdentifier = ValidatorForClassifier(\n    ValueIsIdentifier, rejectNil, 'note stickers identifier'\n  ), expectedIdentifier = expectIdentifier\n\n/**** ValueIsName ****/\n\n  export function ValueIsName (Value:any):boolean {\n    return ValueIsTextline(Value)\n  }\n\n/**** allow/expect[ed]Name ****/\n\n  export const allowName = ValidatorForClassifier(\n    ValueIsName, acceptNil, 'SNS name'\n  ), allowedName = allowName\n\n  export const expectName = ValidatorForClassifier(\n    ValueIsName, rejectNil, 'SNS name'\n  ), expectedName = expectName\n\n/**** ValueIsLocation ****/\n\n  export function ValueIsLocation (Value:any):boolean {\n    return ValueIsFiniteNumber(Value)\n  }\n\n/**** allow/expect[ed]Location ****/\n\n  export const allowLocation = ValidatorForClassifier(\n    ValueIsLocation, acceptNil, 'sticker coordinate'\n  ), allowedLocation = allowLocation\n\n  export const expectLocation = ValidatorForClassifier(\n    ValueIsLocation, rejectNil, 'sticker coordinate'\n  ), expectedLocation = expectLocation\n\n/**** ValueIsDimension ****/\n\n  export function ValueIsDimension (Value:any):boolean {\n    return ValueIsFiniteNumber(Value) && (Value >= 0)\n  }\n\n/**** allow/expect[ed]Dimension ****/\n\n  export const allowDimension = ValidatorForClassifier(\n    ValueIsDimension, acceptNil, 'sticker dimension'\n  ), allowedDimension = allowDimension\n\n  export const expectDimension = ValidatorForClassifier(\n    ValueIsDimension, rejectNil, 'sticker dimension'\n  ), expectedDimension = expectDimension\n\n/**** ValueIsPosition ****/\n\n  export function ValueIsPosition (Value:any):boolean {\n    return (\n      ValueIsObject(Value) &&\n      ValueIsLocation(Value.x) &&\n      ValueIsLocation(Value.y)\n    )\n  }\n\n/**** allow/expect[ed]Position ****/\n\n  export const allowPosition = ValidatorForClassifier(\n    ValueIsPosition, acceptNil, 'sticker position'\n  ), allowedPosition = allowPosition\n\n  export const expectPosition = ValidatorForClassifier(\n    ValueIsPosition, rejectNil, 'sticker position'\n  ), expectedPosition = expectPosition\n\n/**** ValueIsSize ****/\n\n  export function ValueIsSize (Value:any):boolean {\n    return (\n      ValueIsObject(Value) &&\n      ValueIsDimension(Value.Width) &&\n      ValueIsDimension(Value.Height)\n    )\n  }\n\n/**** allow/expect[ed]Size ****/\n\n  export const allowSize = ValidatorForClassifier(\n    ValueIsSize, acceptNil, 'sticker size'\n  ), allowedSize = allowSize\n\n  export const expectSize = ValidatorForClassifier(\n    ValueIsSize, rejectNil, 'sticker size'\n  ), expectedSize = expectSize\n\n/**** ValueIsGeometry ****/\n\n  export function ValueIsGeometry (Value:any):boolean {\n    return (\n      ValueIsObject(Value) &&\n      ValueIsLocation(Value.x) && ValueIsDimension(Value.Width) &&\n      ValueIsLocation(Value.y) && ValueIsDimension(Value.Height)\n    )\n  }\n\n/**** allow/expect[ed]Geometry ****/\n\n  export const allowGeometry = ValidatorForClassifier(\n    ValueIsGeometry, acceptNil, 'sticker geometry'\n  ), allowedGeometry = allowGeometry\n\n  export const expectGeometry = ValidatorForClassifier(\n    ValueIsGeometry, rejectNil, 'sticker geometry'\n  ), expectedGeometry = expectGeometry\n\n/**** ValueIsError ****/\n\n  export function ValueIsError (Value:any):boolean {\n    return (\n      ValueIsPlainObject(Value) &&\n      ValueIsOneOf(Value.Type,SNS_ErrorTypes) &&\n      ValueIsText(Value.Message)\n    )\n  }\n\n/**** allow/expect[ed]Error ****/\n\n  export const allowError = ValidatorForClassifier(\n    ValueIsError, acceptNil, 'error descriptor'\n  ), allowedError = allowError\n\n  export const expectError = ValidatorForClassifier(\n    ValueIsError, rejectNil, 'error descriptor'\n  ), expectedError = expectError\n\n/**** ValueIsSerializable ****/\n\n  export function ValueIsSerializable (Value:any):boolean {\n    return ValueIsPlainObject(Value) // *C* could definitely be better!\n  }\n\n/**** allow/expect[ed]Serializable ****/\n\n  export const allowSerializable = ValidatorForClassifier(\n    ValueIsSerializable, acceptNil, 'serializable object'\n  ), allowedSerializable = allowSerializable\n\n  export const expectSerializable = ValidatorForClassifier(\n    ValueIsSerializable, rejectNil, 'serializable object'\n  ), expectedSerializable = expectSerializable\n\n//------------------------------------------------------------------------------\n//--                      Primitives and Change Reports                       --\n//------------------------------------------------------------------------------\n\n  export const SNS_Changes = [\n    'createBoard',   'configureFolder',  'attachBoard',   'detachBoard',   'destroyBoard',\n    'createSticker', 'configureSticker', 'attachSticker', 'detachSticker', 'destroySticker',\n  ]\n  export type SNS_Change = typeof SNS_Changes[number]\n\n  export type SNS_onChangeCallback = (\n    Project:SNS_Project, Change:SNS_Change, Id:SNS_Id, ...ArgList:any[]\n  ) => void\n\n/**** createBoard ****/\n\n  export function createBoard (\n    Project:SNS_Project, BoardId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId        ('board id',BoardId)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board != null) {\n      console.error('a board with the given \"BoardId\" exists already')\n      return\n    }\n\n    Board = new SNS_Board(Project,BoardId)   // will automatically be registered\n  }\n\n/**** configureFolder ****/\n\n  export function configureFolder (\n    Project:SNS_Project, FolderId:SNS_Id, Property:SNS_Identifier, Value:any\n  ):void {\n    expectProject           ('SNS project',Project)\n    expectId                  ('folder id',FolderId)\n    expectIdentifier('property identifier',Property)\n\n    let Folder = Project.FolderWithId(FolderId)\n    if (Folder == null) {                                 // should never happen\n      console.error('no folder with the given \"FolderId\" found')\n      return\n    }\n\n    const PropertySet:Indexable = (\n      ValueIsProject(Folder) ? SNS_ProjectPropertySet : SNS_BoardPropertySet\n    )\n    if (! (Property in PropertySet)) {\n      console.warn('unsupported folder property \"' + Property + '\"')\n      return\n    }\n\n    try {\n// @ts-ignore TS7053 allow indexing of \"Folder\"\n      Folder[Property] = Value\n    } catch (Signal:any) {\n      console.warn('unsupported \"' + Property + '\" value received')\n      return\n    }\n  }\n\n/**** attachBoard ****/\n\n  export function attachBoard (\n    Project:SNS_Project, BoardId:SNS_Id, FolderId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId            ('board id',BoardId)\n    expectId           ('folder id',FolderId)\n    expectOrdinal('insertion index',Index)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board == null) {\n      console.error('no board with the given \"BoardId\" found')\n      return\n    }\n\n    let newFolder = Project.FolderWithId(FolderId)\n    if (newFolder == null) {\n      console.error('no folder with the given \"FolderId\" found')\n      return\n    }\n\n    if (Board === newFolder) {\n      console.error('cannot attach a board to itself')\n      return\n    }\n\n    if (Board.containsFolder(newFolder)) {\n      console.error('cannot attach an outer board to one of its inner boards')\n      return\n    }\n\n    const oldFolder = Board.Folder\n    switch (true) {\n      case (oldFolder === newFolder):\n        setTimeout(() => sanitizeBoardList(Project,oldFolder,Board,Index),0);  break\n      case (oldFolder != null):\n        setTimeout(() => sanitizeBoardList(Project,oldFolder,Board),0)\n    }\n\n    newFolder._attachBoardAt(Board,Index)\n  }\n\n/**** detachBoard ****/\n\n  export function detachBoard (\n    Project:SNS_Project, BoardId:SNS_Id, FolderId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId            ('board id',BoardId)\n    expectId           ('folder id',FolderId)\n    expectOrdinal('insertion index',Index)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board == null) { return }                     // operation is idempotent\n\n    let oldFolder = Project.FolderWithId(FolderId)\n    if (oldFolder == null) { return }                 // operation is idempotent\n\n    if ((Board.Folder === oldFolder) && (oldFolder.Board(Index) === Board)) {\n      oldFolder._detachBoardAt(Index)\n    }\n  }\n\n/**** destroyBoard ****/\n\n  export function destroyBoard (\n    Project:SNS_Project, BoardId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId        ('board id',BoardId)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board == null) { return }                     // operation is idempotent\n\n    if (\n      (Board.Folder != null) || (Board.BoardCount > 0) || (Board.StickerCount > 0)\n    ) {\n      console.error('cannot destroy a board that is still in use')\n      return\n    }\n\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n    Board._Project = undefined           // detaches this board from the project\n    unregisterFolder(Board)\n  }\n\n/**** createSticker ****/\n\n  export function createSticker (\n    Project:SNS_Project, StickerId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId      ('sticker id',StickerId)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker != null) {\n      console.error('a sticker with the given \"StickerId\" exists already')\n      return\n    }\n\n    Sticker = new SNS_Sticker(Project,StickerId)  // will automat. be registered\n  }\n\n/**** configureSticker ****/\n\n  export function configureSticker (\n    Project:SNS_Project, StickerId:SNS_Id, Property:SNS_Identifier, Value:any\n  ):void {\n    expectProject           ('SNS project',Project)\n    expectId                 ('sticker id',StickerId)\n    expectIdentifier('property identifier',Property)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) {                                // should never happen\n      console.error('no sticker with the given \"StickerId\" found')\n      return\n    }\n\n    if (! (Property in SNS_StickerPropertySet)) {\n      console.warn('unsupported sticker property \"' + Property + '\"')\n      return\n    }\n\n    try {\n// @ts-ignore TS7053 allow indexing of \"Sticker\"\n      Sticker[Property] = Value\n    } catch (Signal:any) {\n      console.warn('unsupported \"' + Property + '\" value received')\n      return\n    }\n  }\n\n/**** attachSticker ****/\n\n  export function attachSticker (\n    Project:SNS_Project, StickerId:SNS_Id, BoardId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId          ('sticker id',StickerId)\n    expectId            ('board id',BoardId)\n    expectOrdinal('insertion index',Index)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) {\n      console.error('no sticker with the given \"StickerId\" found')\n      return\n    }\n\n    let newBoard = Project.BoardWithId(BoardId)\n    if (newBoard == null) {\n      console.error('no board with the given \"BoardId\" found')\n      return\n    }\n\n    const oldBoard = Sticker.Board\n    switch (true) {\n      case (oldBoard === newBoard):\n        setTimeout(() => sanitizeStickerList(Project,oldBoard,Sticker,Index),0);  break\n      case (oldBoard != null):\n        setTimeout(() => sanitizeStickerList(Project,oldBoard,Sticker),0)\n    }\n\n    newBoard._attachStickerAt(Sticker,Index)\n  }\n\n/**** detachSticker ****/\n\n  export function detachSticker (\n    Project:SNS_Project, StickerId:SNS_Id, BoardId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId          ('sticker id',StickerId)\n    expectId            ('board id',BoardId)\n    expectOrdinal('insertion index',Index)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) { return }                   // operation is idempotent\n\n    let oldBoard = Project.BoardWithId(BoardId)\n    if (oldBoard == null) { return }                  // operation is idempotent\n\n    if ((Sticker.Board === oldBoard) && (oldBoard.Sticker(Index) === Sticker)) {\n      oldBoard._detachStickerAt(Index)\n    }\n  }\n\n/**** destroySticker ****/\n\n  export function destroySticker (\n    Project:SNS_Project, StickerId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId      ('sticker id',StickerId)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) { return }                   // operation is idempotent\n\n    if (Sticker.Board != null) {\n      console.error('cannot destroy a sticker that is still in use')\n      return\n    }\n\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n    Sticker._Project = undefined       // detaches this sticker from the project\n    unregisterSticker(Sticker)\n  }\n\n/**** sanitizeBoardList ****/\n\n  export function sanitizeBoardList (\n    Project:SNS_Project, Folder:SNS_Folder, Board:SNS_Board, Index?:SNS_Ordinal\n  ):void {\n    expectProject('SNS project',Project)\n    expectFolder      ('folder',Folder)\n    expectBoard        ('board',Board)\n    allowOrdinal       ('index',Index) // undefined means: always detach \"Board\"\n\n    let BoardSet:Set<SNS_Board> = new Set()\n\n    const BoardList = Folder.BoardList\n    for (let i = BoardList.length-1; i >= 0; i--) {\n      const BoardFromList = BoardList[i]\n      if (\n        (BoardFromList.Folder !== Folder) ||//\"Board\" doesn't belong to \"Folder\"\n        (BoardFromList === Board) && (Index !== i) ||\n        BoardSet.has(BoardFromList)           // \"Board\" already occurred before\n      ) {\n        Folder._detachBoardAt(i)\n      } else {\n        BoardSet.add(BoardFromList)\n      }\n    }\n  }\n\n/**** sanitizeStickerList ****/\n\n  export function sanitizeStickerList (\n    Project:SNS_Project, Board:SNS_Board, Sticker:SNS_Sticker, Index?:SNS_Ordinal\n  ):void {\n    expectProject('SNS project',Project)\n    expectBoard        ('board',Board)\n    expectSticker    ('sticker',Sticker)\n    allowOrdinal       ('index',Index)  // undef. means: always detach \"Sticker\"\n\n    let StickerSet:Set<SNS_Sticker> = new Set()\n\n    const StickerList = Board.StickerList\n    for (let i = StickerList.length-1; i >= 0; i--) {\n      const StickerFromList = StickerList[i]\n      if (\n        (StickerFromList.Board !== Board) ||      // \"Sticker\" belongs elsewhere\n        (StickerFromList === Sticker) && (Index !== i) ||\n        StickerSet.has(StickerFromList)     // \"Sticker\" already occurred before\n      ) {\n        Board._detachStickerAt(i)\n      } else {\n        StickerSet.add(StickerFromList)\n      }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                          Configuration Defaults                          --\n//------------------------------------------------------------------------------\n\n  const defaultStickerGeometry = { x:20,y:20, Width:80,Height:60 }\n  const defaultMinWidth  = 10\n  const defaultMaxWidth  = undefined\n  const defaultMinHeight = 10\n  const defaultMaxHeight = undefined\n\n  const defaultGridWidth  = 10\n  const defaultGridHeight = 10\n\n//------------------------------------------------------------------------------\n//--                               Acceptables                                --\n//------------------------------------------------------------------------------\n\n/**** acceptableBoolean ****/\n\n  export function acceptableBoolean (Value:any, Default:boolean):boolean {\n    return (ValueIsBoolean(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalBoolean ****/\n\n  export function acceptableOptionalBoolean (\n    Value:any, Default?:boolean|undefined\n  ):boolean|undefined {\n    return (\n      Value == null\n      ? undefined\n      : ValueIsBoolean(Value) ? Value : Default\n    )\n  }\n\n/**** acceptableNumber ****/\n\n  export function acceptableNumber (Value:any, Default:number):number {\n    return (ValueIsNumber(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalNumber ****/\n\n  export function acceptableOptionalNumber (\n    Value:any, Default?:number|undefined\n  ):number|undefined {\n    return (ValueIsNumber(Value) ? Value : Default)\n  }\n\n/**** acceptableNumberInRange ****/\n\n  export function acceptableNumberInRange (\n    Value:any, Default:number,\n    minValue:number = -Infinity, maxValue:number = Infinity,\n    withMin:boolean = false, withMax:boolean = false\n  ):number {\n    return (ValueIsNumberInRange(Value,minValue,maxValue,withMin,withMax) ? Value : Default)\n  }\n\n/**** acceptableOptionalNumberInRange ****/\n\n  export function acceptableOptionalNumberInRange (\n    Value:any, Default:number|undefined,\n    minValue:number = -Infinity, maxValue:number = Infinity,\n    withMin:boolean = false, withMax:boolean = false\n  ):number|undefined {\n    return (\n      ValueIsNumberInRange(Value,minValue,maxValue,withMin,withMax)\n      ? Value\n      : Default\n    )\n  }\n\n/**** acceptableInteger ****/\n\n  export function acceptableInteger (Value:any, Default:number):number {\n    return (ValueIsInteger(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalInteger ****/\n\n  export function acceptableOptionalInteger (\n    Value:any, Default:number|undefined\n  ):number|undefined {\n    return (ValueIsInteger(Value) ? Value : Default)\n  }\n\n/**** acceptableIntegerInRange ****/\n\n  export function acceptableIntegerInRange (\n    Value:any, Default:number, minValue:number = -Infinity, maxValue:number = Infinity\n  ):number {\n    return (ValueIsIntegerInRange(Value,minValue,maxValue) ? Value : Default)\n  }\n\n/**** acceptableOptionalIntegerInRange ****/\n\n  export function acceptableOptionalIntegerInRange (\n    Value:any, Default:number|undefined,\n    minValue:number = -Infinity, maxValue:number = Infinity\n  ):number|undefined {\n    return (ValueIsIntegerInRange(Value,minValue,maxValue) ? Value : Default)\n  }\n\n/**** acceptableOrdinal ****/\n\n  export function acceptableOrdinal (Value:any, Default:number):number {\n    return (ValueIsOrdinal(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalOrdinal ****/\n\n  export function acceptableOptionalOrdinal (\n    Value:any, Default?:number|undefined\n  ):number|undefined {\n    return (ValueIsOrdinal(Value) ? Value : Default)\n  }\n\n/**** acceptableString ****/\n\n  export function acceptableString (Value:any, Default:string):string {\n    return (ValueIsString(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalString ****/\n\n  export function acceptableOptionalString (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsString(Value) ? Value : Default)\n  }\n\n/**** acceptableNonEmptyString ****/\n\n  export function acceptableNonEmptyString (Value:any, Default:string):string {\n    return (ValueIsString(Value) && (Value.trim() !== '') ? Value : Default)\n  }\n\n/**** acceptableOptionalNonEmptyString ****/\n\n  export function acceptableOptionalNonEmptyString (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsString(Value) && (Value.trim() !== '') ? Value : Default)\n  }\n\n/**** acceptableStringMatching ****/\n\n  export function acceptableStringMatching (\n    Value:any, Default:string, Pattern:RegExp\n  ):string {\n    return (ValueIsStringMatching(Value,Pattern) ? Value : Default)\n  }\n\n/**** acceptableOptionalStringMatching ****/\n\n  export function acceptableOptionalStringMatching (\n    Value:any, Default:string|undefined, Pattern:RegExp\n  ):string|undefined {\n    return (ValueIsStringMatching(Value,Pattern) ? Value : Default)\n  }\n\n/**** acceptableText ****/\n\n  const noCtrlCharsButCRLFTABPattern = /^[^\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]*$/\n\n  export function acceptableText (Value:any, Default:string):string {\n    return (ValueIsStringMatching(Value,noCtrlCharsButCRLFTABPattern) ? Value : Default)\n  }\n\n/**** acceptableOptionalText ****/\n\n  export function acceptableOptionalText (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsText(Value) ? Value : Default)\n  }\n\n/**** acceptableTextline ****/\n\n  export function acceptableTextline (Value:any, Default:string):string {\n    return (ValueIsTextline(Value) ? Value : Default).replace(\n      /[\\f\\r\\n\\v\\u0085\\u2028\\u2029].*$/,'...'\n    )\n  }\n\n/**** acceptableOptionalTextline ****/\n\n  export function acceptableOptionalTextline (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    const Result = ValueIsTextline(Value) ? Value : Default\n    return (\n      Result == null\n      ? undefined\n      : Result.replace(/[\\f\\r\\n\\v\\u0085\\u2028\\u2029].*$/,'...')\n    )\n  }\n\n/**** acceptableFunction ****/\n\n  export function acceptableFunction (Value:any, Default:Function):Function {\n    return (ValueIsFunction(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalFunction ****/\n\n  export function acceptableOptionalFunction (\n    Value:any, Default?:Function|undefined\n  ):Function|undefined {\n    return (ValueIsFunction(Value) ? Value : Default)\n  }\n\n/**** acceptableList ****/\n\n  export function acceptableList (Value:any, Default:any[]):any[] {\n    return (ValueIsList(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalList ****/\n\n  export function acceptableOptionalList (\n    Value:any, Default?:any[]|undefined\n  ):any[]|undefined {\n    return (ValueIsList(Value) ? Value : Default)\n  }\n\n/**** acceptableListSatisfying ****/\n\n  export function acceptableListSatisfying (\n    Value:any, Default:any[], Matcher:Function\n  ):any[] {\n    return (ValueIsListSatisfying(Value,Matcher) ? Value : Default)\n  }\n\n/**** acceptableOptionalListSatisfying ****/\n\n  export function acceptableOptionalListSatisfying (\n    Value:any, Default:any[]|undefined, Matcher:Function\n  ):any[]|undefined {\n    return (ValueIsListSatisfying(Value,Matcher) ? Value : Default)\n  }\n\n/**** acceptableColor ****/\n\n  export function acceptableColor (Value:any, Default:string):string {\n    return (ValueIsColor(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalColor ****/\n\n  export function acceptableOptionalColor (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsColor(Value) ? Value : Default)\n  }\n\n/**** acceptableEMailAddress ****/\n\n  export function acceptableEMailAddress (Value:any, Default:string):string {\n    return (ValueIsEMailAddress(Value) ? Value : Default)\n  }\n\n/**** acceptablePhoneNumber ****/\n\n  export function acceptablePhoneNumber (Value:any, Default:string):string {\n    return (ValueIsPhoneNumber(Value) ? Value : Default)\n  }\n\n/**** acceptableURL ****/\n\n  export function acceptableURL (Value:any, Default:string):string {\n    return (ValueIsURL(Value) ? Value : Default)\n  }\n\n//------------------------------------------------------------------------------\n//--                             basic Renderers                              --\n//------------------------------------------------------------------------------\n\n/**** default Renderer ****/\n\n  function DefaultRenderer (this:SNS_Visual):any {\n    return html`<div class=\"SNS DefaultSticker\" style=${CSSStyleOfVisual(this)}/>`\n  }\n\n/**** Error Renderer ****/\n\n  function ErrorRenderer (this:SNS_Visual):any {\n// @ts-ignore TS2532 \"ErrorRenderer.call(this)\" will define \"this\"\n    const Error = this.Error\n    if (Error == null) { return DefaultRenderer.call(this) }// should never happen\n\n// @ts-ignore TS2532 \"ErrorRenderer.call(this)\" will define \"this\"\n    const onClick = () => this.Project.showError(this,Error)\n\n    return html`<div class=\"SNS brokenSticker\">\n      <div class=\"SNS ErrorIndicator\" onClick=${onClick}/>\n    </div>`\n  }\n\n//------------------------------------------------------------------------------\n//--                               Id Handling                                --\n//------------------------------------------------------------------------------\n\n/**** newId - uses nanoid with custom dictionary ****/\n\n  export const newId = customAlphabet(nolookalikesSafe,21)\n\n/**** registerFolder ****/\n\n  const FolderRegistryForProject:WeakMap<SNS_Project,Indexable> = new WeakMap()\n\n  function registerFolder (Project:SNS_Project, Folder:SNS_Folder):void {\n    let FolderRegistry = FolderRegistryForProject.get(Project)\n    if (FolderRegistry == null) {\n      FolderRegistryForProject.set(Project,FolderRegistry = Object.create(null))\n    }\n\n    const Id = Folder.Id\n// @ts-ignore TS18048 \"FolderRegistry\" is not undefined\n    if (Id in FolderRegistry) throwError(\n      'NonUniqueId: the id of the given folder (' + quoted(Id) +\n      ') has already been registered'\n    )\n\n// @ts-ignore TS18048 \"FolderRegistry\" is not undefined\n    FolderRegistry[Id] = Folder\n  }\n\n/**** unregisterFolder ****/\n\n  function unregisterFolder (Folder:SNS_Folder):void {\n    const Project = Folder.Project\n\n    let FolderRegistry = FolderRegistryForProject.get(Project)\n    if (FolderRegistry == null) { return }\n\n    delete FolderRegistry[Folder.Id]\n  }\n\n/**** FolderWithId ****/\n\n  function FolderWithId (Project:SNS_Project, Id:SNS_Id):SNS_Folder|undefined {\n    let FolderRegistry = FolderRegistryForProject.get(Project)\n    if (FolderRegistry == null) { return undefined }\n\n    return FolderRegistry[Id]\n  }\n\n/**** registerSticker ****/\n\n  const StickerRegistryForProject:WeakMap<SNS_Project,Indexable> = new WeakMap()\n\n  function registerSticker (Project:SNS_Project, Sticker:SNS_Sticker):void {\n    let StickerRegistry = StickerRegistryForProject.get(Project)\n    if (StickerRegistry == null) {\n      StickerRegistryForProject.set(Project,StickerRegistry = Object.create(null))\n    }\n\n    const Id = Sticker.Id\n// @ts-ignore TS18048 \"StickerRegistry\" is not undefined\n    if (Id in StickerRegistry) throwError(\n      'NonUniqueId: the id of the given sticker (' + quoted(Id) +\n      ') has already been registered'\n    )\n\n// @ts-ignore TS18048 \"StickerRegistry\" is not undefined\n    StickerRegistry[Id] = Sticker\n  }\n\n/**** unregisterSticker ****/\n\n  function unregisterSticker (Sticker:SNS_Sticker):void {\n    const Project = Sticker.Project\n\n    let StickerRegistry = StickerRegistryForProject.get(Project)\n    if (StickerRegistry == null) { return }\n\n    delete StickerRegistry[Sticker.Id]\n  }\n\n/**** StickerWithId ****/\n\n  function StickerWithId (Project:SNS_Project, Id:SNS_Id):SNS_Sticker|undefined {\n    let StickerRegistry = StickerRegistryForProject.get(Project)\n    if (StickerRegistry == null) { return undefined }\n\n    return StickerRegistry[Id]\n  }\n\n/**** removeIdsFrom ****/\n\n  export function removeIdsFrom (Serialization:Serializable) {\n    expectSerializable('serialization',Serialization)\n\n    delete Serialization.Id\n\n    if (ValueIsList(Serialization.BoardList)) {\n      (Serialization.BoardList as Serializable[]).forEach(\n        (Serialization:Serializable) => removeIdsFrom(Serialization)\n      )\n    }\n\n    if (ValueIsList(Serialization.StickerList)) {\n      (Serialization.StickerList as Serializable[]).forEach(\n        (Serialization:Serializable) => removeIdsFrom(Serialization)\n      )\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                           Reactivity Handling                            --\n//------------------------------------------------------------------------------\n\n  const reactiveFunctionsForVisual:WeakMap<SNS_Visual,Function[]>  = new WeakMap()\n\n/**** registerReactiveFunctionIn ****/\n\n  function registerReactiveFunctionIn (\n    Visual:SNS_Visual, reactiveFunction:Function\n  ):void {\n    let reactiveFunctions = reactiveFunctionsForVisual.get(Visual)\n    if (reactiveFunctions == null) {\n      reactiveFunctionsForVisual.set(Visual,reactiveFunctions = [])\n    }\n    reactiveFunctions.push(reactiveFunction)\n  }\n\n/**** unregisterAllReactiveFunctionsFrom ****/\n\n  function unregisterAllReactiveFunctionsFrom (Visual:SNS_Visual):void {\n    let reactiveFunctions = reactiveFunctionsForVisual.get(Visual)\n    if (reactiveFunctions == null) { return }\n\n    reactiveFunctions.forEach((reactiveFunction:Function) => {\n      dispose(reactiveFunction)\n    })\n  }\n\n//------------------------------------------------------------------------------\n//--                            Behavior Handling                             --\n//------------------------------------------------------------------------------\n\n  type SNS_groupedBehaviorSet = { [GroupLabel:string]:SNS_BehaviorSetGroup }\n  type SNS_BehaviorSetGroup   = { GroupLabel:SNS_Textline, BehaviorSet:SNS_BehaviorSet }\n  type SNS_BehaviorSet        = { [BehaviorName:string]:SNS_Behavior }\n  type SNS_Behavior           = { Label:SNS_Textline, Executable?:Function, Template:Serializable }\n\n  const groupedBehaviorRegistry:SNS_groupedBehaviorSet          = Object.create(null)\n  const BehaviorRegistry:{ [BehaviorName:string]:Function }     = Object.create(null)\n  const TemplateRegistry:{ [BehaviorName:string]:Serializable } = Object.create(null)\n\n/**** registerBehavior ****/\n\n  function registerBehavior (\n    GroupLabel:SNS_Textline, BehaviorLabel:SNS_Textline,\n    BehaviorName:SNS_Identifier, Template?:Serializable,\n    BehaviorFunction?:Function, BehaviorStyle?:SNS_Text\n  ):void {\n    expectTextline('behavior group label',GroupLabel)\n    expectTextline      ('behavior label',BehaviorLabel)\n    expectIdentifier     ('behavior name',BehaviorName)\n    allowPlainObject  ('sticker template',Template)\n    allowFunction    ('behavior function',BehaviorFunction)\n\n    const normalizedGroupName    = GroupLabel.toLowerCase().replace(/\\s/g,'')\n    const normalizedBehaviorName = BehaviorName.toLowerCase()\n\n    const normalizedTemplate = { ...Template }\n    if (normalizedTemplate.activeScript == null) {\n      normalizedTemplate.activeScript = `useBehavior('${BehaviorName}')\\n`\n    } else {\n      normalizedTemplate.activeScript = (\n        (normalizedTemplate.activeScript as SNS_Text).replace(/^\\s*\\n/,'').replace(/\\n\\s*$/,'\\n')\n      )\n    }\n\n    if (normalizedBehaviorName in BehaviorRegistry) throwError(\n      'BehaviorExists: behavior ' + quoted(BehaviorName) + ' was already registered'\n    )\n\n    let BehaviorSetGroup = groupedBehaviorRegistry[normalizedGroupName]\n    if (BehaviorSetGroup == null) {\n      groupedBehaviorRegistry[normalizedGroupName] = BehaviorSetGroup = {\n        GroupLabel, BehaviorSet:Object.create(null)\n      }\n    }\n\n    BehaviorSetGroup.BehaviorSet[BehaviorName] = {\n      Label:BehaviorLabel, Executable:BehaviorFunction, Template:normalizedTemplate\n    }\n\n    if (BehaviorFunction != null) {\n      TemplateRegistry[normalizedBehaviorName] = normalizedTemplate\n      BehaviorRegistry[normalizedBehaviorName] = BehaviorFunction\n    }\n\n    if (BehaviorStyle != null) {\n      if (BehaviorStyleElement.innerHTML.indexOf(BehaviorStyle.trim()) < 0) {\n        BehaviorStyleElement.innerHTML += BehaviorStyle\n      }\n    }\n  }\n\n/**** groupedBehaviorEntryList ****/\n\n  export type SNS_groupedBehaviorEntryList = SNS_BehaviorEntryGroup[]\n  export type SNS_BehaviorEntryGroup = {\n    GroupLabel:SNS_Textline,\n    BehaviorEntryList:SNS_BehaviorEntry[]\n  }\n  export type SNS_BehaviorEntry = {\n    Label:SNS_Textline, Name:SNS_Identifier, disabled:boolean\n  }\n\n  export function groupedBehaviorEntryList ():SNS_groupedBehaviorEntryList {\n    const Result:SNS_groupedBehaviorEntryList = []\n      function BehaviorEntriesIn (BehaviorGroup:SNS_BehaviorSetGroup):SNS_BehaviorEntryGroup {\n        const BehaviorEntryList:SNS_BehaviorEntry[] = []\n          const BehaviorSet = BehaviorGroup.BehaviorSet\n          for (let BehaviorName in BehaviorSet) {\n            BehaviorEntryList.push({\n              Label:BehaviorSet[BehaviorName].Label, Name:BehaviorName,\n              disabled:! (BehaviorName.toLowerCase() in BehaviorRegistry)\n            })\n          }\n        return { GroupLabel:BehaviorGroup.GroupLabel, BehaviorEntryList }\n      }\n\n      for (let GroupLabel in groupedBehaviorRegistry) {\n        Result.push(BehaviorEntriesIn(groupedBehaviorRegistry[GroupLabel]))\n      }\n    return Result\n  }\n\n/**** useBehavior ****/\n\n  function useBehavior (this:SNS_Visual, BehaviorName:SNS_Identifier):void {\n    expectSticker          ('visual',this)\n    expectIdentifier('behavior name',BehaviorName)\n\n    const BehaviorFunction = BehaviorRegistry[BehaviorName.toLowerCase()]\n    if (BehaviorFunction == null) throwError(\n      'NoSuchBehavior: no behavior called ' + quoted(BehaviorName) + ' found'\n    )\n\n    const reactively = (reactiveFunction:Function):void => {\n      expectFunction('reactive function',reactiveFunction)\n// @ts-ignore TS2345 do not care about the specific signature of \"reactiveFunction\"\n      registerReactiveFunctionIn(this,computed(reactiveFunction))\n    }\n\n    const onRender  = this.onRender.bind(this)\n    const onMount   = this.onMount.bind(this)\n    const onUnmount = this.onUnmount.bind(this)\n\n    BehaviorFunction.call(\n      this, this,this, SNS,JIL, this.Project.Application, html,reactively,\n      onRender,onMount,onUnmount, // onClick,onInput,onDrop\n    )\n  }\n\n/**** TemplateOfBehavior ****/\n\n  export function TemplateOfBehavior (BehaviorName:SNS_Identifier):Serializable {\n    expectIdentifier('behavior name',BehaviorName)\n\n    const normalizedBehaviorName = BehaviorName.toLowerCase()\n\n    const BehaviorFunction = BehaviorRegistry[normalizedBehaviorName]\n    if (BehaviorFunction == null) throwError(\n      'NoSuchBehavior: no behavior called ' + quoted(BehaviorName) + ' found'\n    )\n\n    return TemplateRegistry[normalizedBehaviorName]\n  }\n\n//------------------------------------------------------------------------------\n//--                           intrinsic Behaviors                            --\n//------------------------------------------------------------------------------\n\n  type IndexableSticker = SNS_Sticker & Indexable\n\n/**** plain Sticker ****/\n\n  registerBehavior('basic Views', 'plain Sticker', 'plainSticker', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    activeScript:'onRender(() => html`<div class=\"SNS Placeholder\">Script me!</div>`)',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => html`<div class=\"SNS plainSticker\"></div>`)\n  },`\n/**** plain Stickers ****/\n\n  .SNS.plainSticker {\n    border:dotted 1px gray;\n  }\n  `)\n\n/**** sticky Note ****/\n\n  registerBehavior('basic Views', 'sticky Note', 'stickyNote', {\n    Selectability:true,\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    minWidth:20, minHeight:10,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Selectability = true                       // for backwards compatibility\n\n    my.Renderer = function (PropSet:Indexable) {\n      const { builtinSelection,builtinDragging } = PropSet\n\n      const Value = acceptableText(my.Value,'')\n\n      const onKeyDown = (Event:KeyboardEvent) => {\n        if (Event.key === 'Tab') {\n          Event.stopPropagation()\n          Event.preventDefault()\n\n          const Editor = Event.target as HTMLTextAreaElement\n          const { value, selectionStart,selectionEnd } = Editor\n            Editor.value = value.slice(0,selectionStart) + '\\t' + value.slice(selectionEnd)\n          Editor.selectionStart = Editor.selectionEnd = selectionStart+1\n\n          return false\n        }\n      }\n\n      const onInput = (Event:InputEvent) => {\n        my.Value = (Event.target as HTMLTextAreaElement).value\n      }\n\n      return html`<div class=\"SNS NoteSticker\" style=${CSSStyleOfVisual(me)}\n        onPointerDown=${builtinSelection}\n      >\n        <div class=\"Header builtinDraggable\"\n          onPointerDown=${builtinDragging} onPointerMove=${builtinDragging}\n          onPointerUp=${builtinDragging} onPointerCancel=${builtinDragging}\n        />\n        <textarea class=\"Editor\" value=${Value} tabindex=-1\n          onKeyDown=${onKeyDown} onInput=${onInput}\n        ></textarea>\n      </div>`\n    }\n  },`\n/**** \"classical\" Note Stickers ****/\n\n  .SNS.NoteSticker {\n    background:ivory;\n    border:solid 1px darkgray;\n    outline:none;\n    font-family:'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-size:14px; font-weight:normal; line-height:1.4; color:black;\n  }\n\n  .SNS.NoteSticker > .Header {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; height:10px;\n    margin:0px; padding:0px;\n    background:#000000; opacity:0.3;\n  }\n\n  .SNS.NoteSticker > .Editor {\n    display:block; position:absolute;\n    left:0px; top:10px; right:0px; bottom:0px;\n    margin:0px; padding:2px;\n    background:none; border:none;\n\n    background-color:inherit; background-image:inherit;\n    font-family:inherit; font-size:inherit; font-weight:inherit;\n    line-height:inherit; color:inherit;\n\n    tab-size:10px; resize:none;\n  }\n  `)\n\n/**** Outline - e.g., for screenshot areas ****/\n\n  registerBehavior('basic Views', 'Outline', 'Outline', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function (PropSet:Indexable) {\n      return html`<div class=\"SNS Outline\"/>`\n    }\n  },`\n/**** Outline ****/\n\n  .SNS.Outline {\n    outline:dotted 1px blue;\n    outline-offset:2px;\n    pointer-events:none;\n  }\n  `)\n\n/**** Title View ****/\n\n  registerBehavior('basic Views', 'Title', 'Title', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Title',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableTextline(my.Value,'')\n      return html`<div class=\"SNS Title\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Title Views ****/\n\n  .SNS.Sticker > .SNS.Title {\n    font-size:22px; font-weight:bold; line-height:32px;\n  }\n  `)\n\n/**** Subtitle View ****/\n\n  registerBehavior('basic Views', 'Subtitle', 'Subtitle', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Subtitle',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableTextline(my.Value,'')\n      return html`<div class=\"SNS Subtitle\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Subtitle Views ****/\n\n  .SNS.Sticker > .SNS.Subtitle {\n    font-size:18px; font-weight:bold; line-height:27px;\n  }\n  `)\n\n/**** Label View ****/\n\n  registerBehavior('basic Views', 'Label', 'Label', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Label',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableTextline(my.Value,'')\n      return html`<div class=\"SNS Label\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Label Views ****/\n\n  .SNS.Sticker > .SNS.Label {\n    font-size:14px; font-weight:bold; line-height:21px;\n  }\n  `)\n\n/**** Text View ****/\n\n  registerBehavior('basic Views', 'Text', 'Text', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Text',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableText(my.Value,'')\n      return html`<div class=\"SNS Text\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Text Views ****/\n\n  .SNS.Sticker > .SNS.Text {\n    font-size:14px; font-weight:normal; line-height:21px;\n  }\n  `)\n\n/**** FinePrint View ****/\n\n  registerBehavior('basic Views', 'FinePrint', 'FinePrint', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'FinePrint',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableText(my.Value,'')\n      return html`<div class=\"SNS FinePrint\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** FinePrint Views ****/\n\n  .SNS.Sticker > .SNS.FinePrint {\n    font-size:12px; font-weight:normal; line-height:18px;\n  }\n  `)\n\n/**** HTML View ****/\n\n  registerBehavior('basic Views', 'HTML View', 'HTMLView', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    Value:'<b><u>HTML View</u></b>',\n    activeScript:`\nuseBehavior('HTMLView')\n//my.Value = 'HTML Markup'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => html`<div class=\"SNS HTMLView\"\n      dangerouslySetInnerHTML=${{__html:acceptableText(my.Value,'')}}\n    />`\n  })\n\n/**** Image View ****/\n\n  registerBehavior('basic Views', 'Image View', 'ImageView', {\n    Geometry:{ x:20,y:20, Width:90,Height:90 },\n    Value:'https://www.rozek.de/Bangle.js/Mandelbrot_240x240.png',\n    activeScript:`\nuseBehavior('ImageView')\n//my.Value = 'Image URL'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => html`<img class=\"SNS ImageView\" src=${acceptableURL(my.Value,'')}/>`\n  },`\n/**** Image View ****/\n\n  .SNS.Sticker > .SNS.ImageView {\n    object-fit:contain; object-position:center;\n  }\n  `)\n\n/**** SVG View ****/\n\n  registerBehavior('basic Views', 'SVG View', 'SVGView', {\n    Geometry:{ x:20,y:20, Width:90,Height:90 },\n    activeScript:`\nuseBehavior('SVGView')\n//my.Value = 'SVG Document'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(acceptableText(my.Value,''))\n      return html`<img class=\"SNS SVGView\" src=${DataURL}/>`\n    }\n  },`\n/**** SVG View ****/\n\n  .SNS.Sticker > .SNS.SVGView {\n    object-fit:contain; object-position:center;\n  }\n  `)\n\n/**** Web View ****/\n\n  registerBehavior('basic Views', 'Web View', 'WebView', {\n    Geometry:{ x:20,y:20, Width:640,Height:480 },\n    minWidth:120, minHeight:80,\n    Value:'https://www.rozek.de',\n    activeScript:`\nuseBehavior('WebView')\n//my.Value = 'Document URL'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => html`<iframe class=\"SNS WebView\"\n      src=${acceptableURL(my.Value,'')}\n    />`\n  })\n\n/**** Badge ****/\n\n  registerBehavior('basic Views', 'Badge', 'Badge', {\n    Geometry:{ x:20,y:20, Width:30,Height:30 },\n    Value:1, ForegroundColor:'red', BackgroundColor:'white',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const Value = (\n        ValueIsNumber(my.Value)\n        ? ''+my.Value\n        : acceptableTextline(my.Value,'')\n      )\n      const BorderRadius = Math.round(Math.min(my.Width,my.Height/2))\n\n      return html`<div class=\"SNS Badge\" style=\"\n        border-color:${my.ForegroundColor}; border-radius:${BorderRadius}px;\n        line-height:${my.Height-4}px;\n      \">${acceptableTextline(Value,'')}</>`\n    }\n  },`\n/**** Badge ****/\n\n  .SNS.Sticker > .SNS.Badge {\n    font-size:18px; font-weight:bold; text-align:center;\n    border:solid 2px black;\n  }\n  `)\n\n/**** Icon ****/\n\n  registerBehavior('basic Views', 'Icon', 'Icon', {\n    Geometry:{ x:20,y:20, Width:24,Height:24 },\n    Value:null,\n    activeScript:`\nuseBehavior('Icon')\n//my.Value = 'icon image url'\n//onClick(() => ...)\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return }\n\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Value = acceptableURL(my.Value,'./icons/pencil.png')\n      const Color = acceptableColor(my.Color,'black')\n\n      return html`<div class=\"SNS Icon\" style=\"\n        -webkit-mask-image:url(${Value}); mask-image:url(${Value});\n        background-color:${Color};\n      \" disabled=${my.Enabling == false} onClick=${onClick}\n      />`\n    }\n  },`\n/**** Icon ****/\n\n  .SNS.Sticker > .SNS.Icon {\n    -webkit-mask-size:contain;           mask-size:contain;\n    -webkit-mask-position:center center; mask-position:center center;\n  }\n  `)\n\n/**** horizontalSeparator ****/\n\n  registerBehavior('basic Views', 'horizontal Separator', 'horizontalSeparator', {\n    Geometry:{ x:20,y:20, Width:80,Height:10 },\n    minWidth:10,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => html`<div class=\"SNS horizontalSeparator\"></div>`)\n  },`\n/**** horizontal Separator ****/\n\n  .SNS.horizontalSeparator {\n    border:none; border-top:solid 1px black;\n  }\n  `)\n\n\n/**** verticalSeparator ****/\n\n  registerBehavior('basic Views', 'vertical Separator', 'verticalSeparator', {\n    Geometry:{ x:20,y:20, Width:10,Height:40 },\n    minHeight:10,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => html`<div class=\"SNS verticalSeparator\"></div>`)\n  },`\n/**** vertical Separator ****/\n\n  .SNS.verticalSeparator {\n    border:none; border-left:solid 1px black;\n  }\n  `)\n\n/**** Tab ****/\n\n  registerBehavior('basic Views', 'Tab', 'Tab')\n\n/**** IconTab ****/\n\n  registerBehavior('basic Views', 'Icon Tab', 'IconTab')\n\n/**** Button ****/\n\n  registerBehavior('native Controls', 'Button', 'Button', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Button',\n    activeScript:`\nuseBehavior('Button')\n//my.Value = 'Label'\n//onClick(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Label = acceptableTextline(my.Label || my.Value,'')\n\n      return html`<button class=\"SNS Button\" style=\"\n        line-height:${my.LineHeight || my.Height}px;\n      \" disabled=${my.Enabling == false} onClick=${onClick}\n      >${Label}</>`\n    }\n  },`\n/**** Button ****/\n\n  .SNS.Sticker > .SNS.Button {\n    border:solid 1px black; border-radius:4px;\n    background:white;\n    font-weight:bold; color:black;\n    text-align.center;\n  }\n  `)\n\n/**** Checkbox ****/\n\n  registerBehavior('native Controls', 'Checkbox', 'Checkbox', {\n    Geometry:{ x:20,y:20, Width:20,Height:20 },\n    Value:null,\n    activeScript:`\nuseBehavior('Checkbox')\n//my.Value = null/true/false\n//onClick(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.checked\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Value = acceptableOptionalBoolean(my.Value)\n\n      const checked       = (Value == true)\n      const indeterminate = (Value == null)\n\n      return html`<input type=\"checkbox\" class=\"SNS Checkbox\"\n        checked=${checked} indeterminate=${indeterminate}\n        disabled=${my.Enabling == false} onClick=${onClick}\n      />`\n    }\n  })\n\n/**** Radiobutton ****/\n\n  registerBehavior('native Controls', 'Radiobutton', 'Radiobutton', {\n    Geometry:{ x:20,y:20, Width:20,Height:20 },\n    Value:null,\n    activeScript:`\nuseBehavior('Radiobutton')\n//my.Value = true/false\n//onClick(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.checked\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Value = acceptableBoolean(my.Value,false)\n\n      return html`<input type=\"radio\" class=\"SNS Radiobutton\"\n        checked=${Value == true}\n        disabled=${my.Enabling == false} onClick=${onClick}\n      />`\n    }\n  })\n\n/**** Gauge ****/\n\n  registerBehavior('native Controls', 'Gauge', 'Gauge', {\n    Geometry:{ x:20,y:20, Width:100,Height:20 },\n    Value:0,\n    activeScript:`\nuseBehavior('Gauge')\n//my.Value      = 0\n//my.Minimum    = 0\n//my.lowerBound = 0\n//my.Optimum    = undefined\n//my.upperBound = 1\n//my.Maximum    = 1\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const Value = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Minimum    = acceptableOptionalNumber(my.Minimum)\n      const lowerBound = acceptableOptionalNumber(my.lowerBound)\n      const Optimum    = acceptableOptionalNumber(my.Optimum)\n      const upperBound = acceptableOptionalNumber(my.upperBound)\n      const Maximum    = acceptableOptionalNumber(my.Maximum)\n\n      return html`<meter class=\"SNS Gauge\" value=${Value}\n        min=${Minimum} low=${lowerBound} opt=${Optimum}\n        high=${upperBound} max=${Maximum}\n      />`\n    }\n  })\n\n/**** Progressbar ****/\n\n  registerBehavior('native Controls', 'Progressbar', 'Progressbar', {\n    Geometry:{ x:20,y:20, Width:100,Height:10 },\n    Value:0,\n    activeScript:`\nuseBehavior('Progressbar')\n//my.Value   = 0\n//my.Maximum = 1\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const Value = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Maximum = acceptableOptionalNumber(my.Maximum)\n\n      return html`<progress class=\"SNS Progressbar\" value=${Value} max=${Maximum}\n      style=\"accent-color:${my.ForegroundColor || 'dodgerblue'}\"/>`\n    }\n  },`\n/**** Progressbar ****/\n\n  .SNS.Sticker > .SNS.Progressbar {\n    -webkit-appearance:none; -moz-appearance:none; appearance:none;\n    background-color:#EEEEEE;\n  }\n  .SNS.Sticker > .SNS.Progressbar::-webkit-progress-bar {\n    background-color:#EEEEEE;\n    border:solid 1px #E0E0E0; border-radius:2px;\n  }\n  .SNS.Sticker > .SNS.Progressbar::-webkit-progress-value,\n  .SNS.Sticker > .SNS.Progressbar::-moz-progress-bar {\n    background-color:dodgerblue;\n    border:none; border-radius:2px;\n  }\n  `)\n\n/**** Slider ****/\n\n  const HashmarkPattern = /^\\s*([+-]?(\\d+([.]\\d+)?|[.]\\d+)([eE][+-]?\\d+)?|\\d*[.](?:\\d*))(?:\\s*:\\s*([^\\x00-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]+))?$/\n\n  registerBehavior('native Controls', 'Slider', 'Slider', {\n    Geometry:{ x:20,y:20, Width:100,Height:20 },\n    Value:null,\n    activeScript:`\nuseBehavior('Slider')\n//my.Value     = 0\n//my.Minimum   = undefined\n//my.Stepping  = undefined\n//my.Maximum   = undefined\n//my.Hashmarks = [0:'zero',1,2]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = 0\n\n    function HashmarkMatcher (Value:any):boolean {\n      return ValueIsStringMatching(Value,HashmarkPattern) || ValueIsNumber(Value)\n    }\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = parseFloat(Event.target.value)\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Minimum  = acceptableOptionalNumber(my.Minimum)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalNumber(my.Maximum)\n\n      const Hashmarks = acceptableOptionalListSatisfying(\n        my.Hashmarks, undefined, HashmarkMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let HashmarkList:any = '', HashmarkId\n      if ((Hashmarks != null) && (Hashmarks.length > 0)) {\n        HashmarkId = my.Id + '-Hashmarks'\n\n        HashmarkList = html`\\n<datalist id=${HashmarkId}>\n          ${Hashmarks.map((Item:string|number) => {\n            Item = ''+Item\n            const Value = Item.replace(/:.*$/,'').trim()\n            const Label = Item.replace(/^[^:]+:/,'').trim()\n\n            return html`<option value=${Value}>${Label}</option>`\n          })}\n        </datalist>`\n      }\n\n      return html`<input type=\"range\" class=\"SNS Slider\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${HashmarkId}\n      />${HashmarkList}`\n    }\n  })\n\n/**** Textline Input ****/\n\n  registerBehavior('native Controls', 'Textline Input', 'TextlineInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('TextlineInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.Pattern       = '.*'\n//my.SpellChecking = undefined\n//my.Suggestions   = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value         = acceptableTextline(my.Value,'')\n      const Placeholder   = acceptableOptionalTextline(my.Placeholder)\n      const readonly      = acceptableOptionalBoolean(my.readonly)\n      const minLength     = acceptableOptionalOrdinal(my.minLength)\n      const maxLength     = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern       = acceptableOptionalTextline(my.Pattern)\n      const SpellChecking = acceptableOptionalBoolean(my.SpellChecking)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"text\" class=\"SNS TextlineInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern} spellcheck=${SpellChecking}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** TextlineInput ****/\n\n  .SNS.Sticker > .SNS.TextlineInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.TextlineInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Password Input ****/\n\n  registerBehavior('native Controls', 'Password Input', 'PasswordInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('PasswordInput')\n//my.Value       = ''\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.minLength   = 0\n//my.maxLength   = undefined\n//my.Pattern     = '.*'\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptableTextline(my.Value,'')\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<input type=\"password\" class=\"SNS PasswordInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n      />`\n    }\n  },`\n/**** PasswordInput ****/\n\n  .SNS.Sticker > .SNS.PasswordInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.PasswordInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Number Input ****/\n\n  registerBehavior('native Controls', 'Number Input', 'NumberInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('NumberInput')\n//my.Value       = 0\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = [0,...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = 0\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = parseFloat(Event.target.value)\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:number|undefined = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const Minimum     = acceptableOptionalNumber(my.Minimum)\n      const Stepping    = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum     = acceptableOptionalNumber(my.Maximum)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsNumber\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:number) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"number\" class=\"SNS NumberInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} placeholder=${Placeholder}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** NumberInput ****/\n\n  .SNS.Sticker > .SNS.NumberInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.NumberInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Phone Number Input ****/\n\n  registerBehavior('native Controls', 'Phone Number Input', 'PhoneNumberInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('PhoneNumberInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.Pattern       = '.*'\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptablePhoneNumber(my.Value,'')\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsPhoneNumber\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"tel\" class=\"SNS PhoneNumberInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** PhoneNumberInput ****/\n\n  .SNS.Sticker > .SNS.PhoneNumberInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.PhoneNumberInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** EMail Address Input ****/\n\n  registerBehavior('native Controls', 'EMail Address Input', 'EMailAddressInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('EMailAddressInput')\n//my.Value       = ''\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.minLength   = 0\n//my.maxLength   = undefined\n//my.Pattern     = '.*'\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptableTextline(my.Value,'') // not(!) acceptableEMailAddress\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsEMailAddress\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"email\" class=\"SNS EMailAddressInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** EMailAddressInput ****/\n\n  .SNS.Sticker > .SNS.EMailAddressInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.EMailAddressInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** URL Input ****/\n\n  registerBehavior('native Controls', 'URL Input', 'URLInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('URLInput')\n//my.Value       = ''\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.minLength   = 0\n//my.maxLength   = undefined\n//my.Pattern     = '.*'\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptableURL(my.Value,'')\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsURL\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"url\" class=\"SNS URLInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** URLInput ****/\n\n  .SNS.Sticker > .SNS.URLInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.URLInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Time Input ****/\n\n  const TimePattern = '\\\\d{2}:\\\\d{2}'\n  const TimeRegExp  = /\\d{2}:\\d{2}/\n\n  function TimeMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,TimeRegExp)\n  }\n\n  registerBehavior('native Controls', 'Time Input', 'TimeInput', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('TimeInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, TimeRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, TimeRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, TimeRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, TimeMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"time\" class=\"SNS TimeInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${TimePattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** TimeInput ****/\n\n  .SNS.Sticker > .SNS.TimeInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.TimeInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Date and Time Input ****/\n\n  const DateTimePattern = '\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}'\n  const DateTimeRegExp  = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}/\n\n  function DateTimeMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,DateTimeRegExp)\n  }\n  registerBehavior('native Controls', 'Date and Time Input', 'DateTimeInput', {\n    Geometry:{ x:20,y:20, Width:180,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('DateTimeInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, DateTimeRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, DateTimeRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, DateTimeRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, DateTimeMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"datetime-local\" class=\"SNS DateTimeInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${DateTimePattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** DateTimeInput ****/\n\n  .SNS.Sticker > .SNS.DateTimeInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.DateTimeInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Date Input ****/\n\n  const DatePattern = '\\\\d{4}-\\\\d{2}-\\\\d{2}'\n  const DateRegExp  = /\\d{4}-\\d{2}-\\d{2}/\n\n  function DateMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,DateRegExp)\n  }\n\n  registerBehavior('native Controls', 'Date Input', 'DateInput', {\n    Geometry:{ x:20,y:20, Width:120,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('DateInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, DateRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, DateRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, DateRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, DateMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"date\" class=\"SNS DateInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${DatePattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** DateInput ****/\n\n  .SNS.Sticker > .SNS.DateInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.DateInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Week Input ****/\n\n  const WeekPattern = '\\\\d{4}-W\\\\d{2}'\n  const WeekRegExp  = /\\d{4}-W\\d{2}/\n\n  function WeekMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,WeekRegExp)\n  }\n\n  registerBehavior('native Controls', 'Week Input', 'WeekInput', {\n    Geometry:{ x:20,y:20, Width:150,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('WeekInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, WeekRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, WeekRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, WeekRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, WeekMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"week\" class=\"SNS WeekInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${WeekPattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** WeekInput ****/\n\n  .SNS.Sticker > .SNS.WeekInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.WeekInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Month Input ****/\n\n  const MonthPattern = '\\\\d{4}-\\\\d{2}'\n  const MonthRegExp  = /\\d{4}-\\d{2}/\n\n  function MonthMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,MonthRegExp)\n  }\n\n  registerBehavior('native Controls', 'Month Input', 'MonthInput', {\n    Geometry:{ x:20,y:20, Width:150,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('MonthInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, MonthRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, MonthRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, MonthRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, MonthMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"month\" class=\"SNS MonthInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${MonthPattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** MonthInput ****/\n\n  .SNS.Sticker > .SNS.MonthInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.MonthInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** File Input ****/\n\n  registerBehavior('native Controls', 'File Input', 'FileInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('FileInput')\n//my.Value           = ''\n//my.Placeholder     = undefined\n//my.acceptableTypes = undefined\n//my.multiple        = false\n//onInput(() => ...)\n//onDrop(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Array.from(Event.target.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event,Event.target.files) }\n    }\n\n    function onDragEnter (Event:Event):void { return consumingEvent(Event) }\n    function onDragOver  (Event:Event):void { return consumingEvent(Event) }\n\n    function onDrop (Event:any):void {\n      consumeEvent(Event)\n      if (my.Enabling == false) { return }\n\n      my.Value = Array.from(Event.dataTransfer.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onDrop === 'function') { my._onDrop(Event,Event.dataTransfer.files) }\n    }                 // nota bene: \"files\" is now in \"Event.dataTransfer.files\"\n\n    my.Renderer = () => {\n      const Value           = acceptableText(my.Value,'').trim().replace(/[\\n\\r]+/g,',')\n      const Placeholder     = acceptableTextline(my.Placeholder,'').trim()\n      const acceptableTypes = acceptableOptionalTextline(my.acceptableTypes,'*')\n      const multiple        = acceptableOptionalBoolean(my.multiple)\n\n      return html`<label class=\"SNS FileInput\"\n        onDragEnter=${onDragEnter} onDragOver=${onDragOver} onDrop=${onDrop}\n      >\n        ${Value === ''\n          ? Placeholder === '' ? '' : html`<span style=\"\n              font-size:${Math.round((my.FontSize || 14)*0.95)}px; line-height:${my.Height}px\n            \">${Placeholder}</span>`\n          : html`<span style=\"line-height:${my.Height}px\">${Value}</span>`\n        }\n        <input type=\"file\" style=\"display:none\"\n          multiple=${multiple} accept=${acceptableTypes}\n          onInput=${onInput}\n        />\n      </label>`\n    }\n  },`\n/**** FileInput ****/\n\n  .SNS.Sticker > .SNS.FileInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n  .SNS.Sticker > .SNS.FileInput > span {\n    display:block; position:absolute; overflow:hidden;\n    left:0px; top:0px; width:100%; height:100%;\n    color:gray;\n    padding:0px 2px 0px 2px; white-space:pre; text-overflow:ellipsis;\n  }\n  `)\n\n/**** Pseudo File Input ****/\n\n  registerBehavior('native Controls', 'Pseudo File Input', 'PseudoFileInput', {\n    Geometry:{ x:20,y:20, Width:24,Height:24 },\n    Value:null,\n    activeScript:`\nuseBehavior('PseudoFileInput')\n//my.Value           = ''\n//my.Icon            = 'icon image url'\n//my.acceptableTypes = undefined\n//my.multiple        = false\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Array.from(Event.target.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event,Event.target.files) }\n    }\n\n    my.Renderer = () => {\n      const Icon            = acceptableURL(my.Icon,'./icons/arrow-up-from-bracket.png')\n      const Color           = acceptableColor(my.Color,'black')\n      const acceptableTypes = acceptableOptionalTextline(my.acceptableTypes,'*')\n      const multiple        = acceptableOptionalBoolean(my.multiple)\n\n      return html`<label class=\"SNS PseudoFileInput\">\n        <div style=\"\n          -webkit-mask-image:url(${Icon}); mask-image:url(${Icon});\n          background-color:${Color};\n        \"></div>\n        <input type=\"file\" style=\"display:none\"\n          multiple=${multiple} accept=${acceptableTypes}\n          onInput=${onInput}\n        />\n      </label>`\n    }\n  },`\n/**** PseudoFileInput ****/\n\n  .SNS.Sticker > .SNS.PseudoFileInput > div {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    -webkit-mask-size:contain;           mask-size:contain;\n    -webkit-mask-position:center center; mask-position:center center;\n  }\n  `)\n\n/**** File Drop Area ****/\n\n  registerBehavior('native Controls', 'File Drop Area', 'FileDropArea', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    Value:null,\n    activeScript:`\nuseBehavior('FileDropArea')\n//my.Value           = ['']\n//my.Placeholder     = undefined\n//my.acceptableTypes = undefined\n//my.multiple        = false\n//onInput(() => ...)\n//onDrop(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Array.from(Event.target.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event,Event.target.files) }\n    }\n\n    function onDragEnter (Event:Event):void { return consumingEvent(Event) }\n    function onDragOver  (Event:Event):void { return consumingEvent(Event) }\n\n    function onDrop (Event:any):void {\n      consumeEvent(Event)\n      if (my.Enabling == false) { return }\n\n      my.Value = Array.from(Event.dataTransfer.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onDrop === 'function') { my._onDrop(Event,Event.dataTransfer.files) }\n    }                 // nota bene: \"files\" is now in \"Event.dataTransfer.files\"\n\n    my.Renderer = () => {\n      const Placeholder     = acceptableTextline(my.Placeholder,'').trim()\n      const acceptableTypes = acceptableOptionalTextline(my.acceptableTypes,'*')\n      const multiple        = acceptableOptionalBoolean(my.multiple)\n\n      return html`<label class=\"SNS FileDropArea\"\n        onDragEnter=${onDragEnter} onDragOver=${onDragOver} onDrop=${onDrop}>\n        <span>${Placeholder}</span>\n        <input type=\"file\"\n          multiple=${multiple} accept=${acceptableTypes}\n          onInput=${onInput}\n        />\n      </label>`\n    }\n  },`\n/**** FileDropArea ****/\n\n  .SNS.Sticker > .SNS.FileDropArea {\n    display:flex; flex-flow:column nowrap;\n      justify-content:center; align-items:center;\n    border:dashed 4px #DDDDDD; border-radius:4px;\n    color:#DDDDDD; background:white;\n  }\n\n  .SNS.Sticker > .SNS.FileDropArea * { pointer-events:none }\n\n  .SNS.Sticker > .SNS.FileDropArea > input[type=\"file\"] {\n    display:block; position:absolute; appearance:none;\n    left:0px; top:0px; right:0px; bottom:0px;\n    opacity:0.01;\n  }\n  `)\n\n/**** Search Input ****/\n\n  registerBehavior('native Controls', 'Search Input', 'SearchInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('SearchInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.Pattern       = '.*'\n//my.SpellChecking = undefined\n//my.Suggestions   = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value         = acceptableTextline(my.Value,'')\n      const Placeholder   = acceptableOptionalTextline(my.Placeholder)\n      const readonly      = acceptableOptionalBoolean(my.readonly)\n      const minLength     = acceptableOptionalOrdinal(my.minLength)\n      const maxLength     = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern       = acceptableOptionalTextline(my.Pattern)\n      const SpellChecking = acceptableOptionalBoolean(my.SpellChecking)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"search\" class=\"SNS SearchInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern} spellcheck=${SpellChecking}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** SearchInput ****/\n\n  .SNS.Sticker > .SNS.SearchInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.SearchInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Color Input ****/\n\n  registerBehavior('native Controls', 'Color Input', 'ColorInput', {\n    Geometry:{ x:20,y:20, Width:40,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('ColorInput')\n//my.Value       = ''\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value = acceptableOptionalColor(my.Value)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsColor\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"color\" class=\"SNS ColorInput\"\n        value=${Value}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** ColorInput ****/\n\n  .SNS.Sticker > .SNS.ColorInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n  `)\n\n/**** DropDown ****/\n\n  registerBehavior('native Controls', 'DropDown', 'DropDown', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('DropDown')\n//my.Value   = '...'\n//my.Options = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value = acceptableTextline(my.Value,'')\n\n      const Options = acceptableListSatisfying(\n        my.Options, [], ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<select class=\"SNS DropDown\"\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n      >${Options.map((Option:string) => {\n          const OptionValue = Option.replace(/:.*$/,'').trim()\n          let   OptionLabel = Option.replace(/^[^:]+:/,'').trim()\n          const disabled    = (OptionLabel[0] === '-')\n            if (/^-[^-]+$/.test(OptionLabel)) {\n              OptionLabel = OptionLabel.slice(1)\n            }\n          return html`<option value=${OptionValue} selected=${OptionValue === Value}\n            disabled=${disabled}\n          >\n            ${OptionLabel}\n          </option>`\n        }\n      )}</select>`\n    }\n  },`\n/**** DropDown ****/\n\n  .SNS.Sticker > .SNS.DropDown {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n  `)\n\n/**** Pseudo DropDown ****/\n\n  registerBehavior('native Controls', 'Pseudo DropDown', 'PseudoDropDown', {\n    Geometry:{ x:20,y:20, Width:24,Height:24 },\n    Value:null,\n    activeScript:`\nuseBehavior('PseudoDropDown')\n//my.Value   = '...'\n//my.Icon    = 'icon image url'\n//my.Options = ['value:label',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value = acceptableTextline(my.Value,'')\n      const Icon  = acceptableURL(my.Icon,'./icons/menu.png')\n      const Color = acceptableColor(my.Color,'black')\n\n      const Options = acceptableListSatisfying(\n        my.Options, [], ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<div class=\"SNS PseudoDropDown\">\n        <div style=\"\n          -webkit-mask-image:url(${Icon}); mask-image:url(${Icon});\n          background-color:${Color};\n        \"></div>\n        <select disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}>\n          ${Options.map((Option:string) => {\n            const OptionValue = Option.replace(/:.*\\$/,'').trim()\n            let   OptionLabel = Option.replace(/^[^:]+:/,'').trim()\n            const disabled    = (OptionLabel[0] === '-')\n              if (/^-[^-]+$/.test(OptionLabel)) {\n                OptionLabel = OptionLabel.slice(1)\n              }\n            return html`<option value=${OptionValue} selected=${OptionValue === Value}\n              disabled=${disabled}\n            >\n              ${OptionLabel}\n            </option>`\n          })}\n        </select>\n      </div>`\n    }\n  },`\n/**** PseudoDropDown ****/\n\n  .SNS.Sticker > .SNS.PseudoDropDown > div {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    -webkit-mask-size:contain;           mask-size:contain;\n    -webkit-mask-position:center center; mask-position:center center;\n  }\n\n  .SNS.Sticker > .SNS.PseudoDropDown > select {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    opacity:0.01;\n  }\n  `)\n\n/**** Text Input ****/\n\n  registerBehavior('native Controls', 'Text Input', 'TextInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('TextInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.LineWrapping  = false\n//my.SpellChecking = undefined\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value         = acceptableText(my.Value,'')\n      const Placeholder   = acceptableOptionalTextline(my.Placeholder)\n      const readonly      = acceptableOptionalBoolean(my.readonly)\n      const minLength     = acceptableOptionalOrdinal(my.minLength)\n      const maxLength     = acceptableOptionalOrdinal(my.maxLength)\n      const LineWrapping  = acceptableOptionalBoolean(my.LineWrapping)\n      const SpellChecking = acceptableOptionalBoolean(my.SpellChecking)\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<textarea class=\"SNS TextInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        spellcheck=${SpellChecking} style=\"resize:none; ${\n          LineWrapping == true\n          ? 'white-space:pre; overflow-wrap:break-word; hyphens:auto'\n          : undefined\n        }\"\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        value=${Value}\n      />`\n    }\n  },`\n/**** TextInput ****/\n\n  .SNS.Sticker > .SNS.TextInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.TextInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** straightArrow_nw ****/\n\n  registerBehavior('straight Arrows', 'nw', 'straightArrow_nw', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width-6},${Height-6}, L 6,6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_n ****/\n\n  registerBehavior('straight Arrows', 'n', 'straightArrow_n', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width/2},${Height}, L ${Width/2},0\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_ne ****/\n\n  registerBehavior('straight Arrows', 'ne', 'straightArrow_ne', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M 6,${Height-6}, L ${Width-6},6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_e ****/\n\n  registerBehavior('straight Arrows', 'e', 'straightArrow_e', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M 0,${Height/2}, L ${Width},${Height/2}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_se ****/\n\n  registerBehavior('straight Arrows', 'se', 'straightArrow_se', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M 6,6, L ${Width-6},${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_s ****/\n\n  registerBehavior('straight Arrows', 's', 'straightArrow_s', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width/2},0, L ${Width/2},${Height}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_sw ****/\n\n  registerBehavior('straight Arrows', 'sw', 'straightArrow_sw', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width-6},6, L 6,${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_w ****/\n\n  registerBehavior('straight Arrows', 'w', 'straightArrow_w', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width},${Height/2}, L 0,${Height/2}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw n ****/\n\n  registerBehavior('curved Arrows', 'cw n', 'curvedArrow_cw_n', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width},${Height-6}, A ${Width-6} ${Height-18} 0 0 1 6 12\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw e ****/\n\n  registerBehavior('curved Arrows', 'cw e', 'curvedArrow_cw_e', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 6,${Height}, A ${Width-18} ${Height-6} 0 0 1 ${Width-12} 6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw s ****/\n\n  registerBehavior('curved Arrows', 'cw s', 'curvedArrow_cw_s', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 0,6, A ${Width-6} ${Height-18} 0 0 1 ${Width-6} ${Height-12}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw w ****/\n\n  registerBehavior('curved Arrows', 'cw w', 'curvedArrow_cw_w', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width-6},0, A ${Width-18} ${Height-6} 0 0 1 12 ${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw n ****/\n\n  registerBehavior('curved Arrows', 'ccw n', 'curvedArrow_ccw_n', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 0,${Height-6}, A ${Width-6} ${Height-18} 0 0 0 ${Width-6} 12\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw e ****/\n\n  registerBehavior('curved Arrows', 'ccw e', 'curvedArrow_ccw_e', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 6,0, A ${Width-18} ${Height-6} 0 0 0 ${Width-12} ${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw s ****/\n\n  registerBehavior('curved Arrows', 'ccw s', 'curvedArrow_ccw_s', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width},6, A ${Width-6} ${Height-18} 0 0 0 6 ${Height-12}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw w ****/\n\n  registerBehavior('curved Arrows', 'ccw w', 'curvedArrow_ccw_w', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width-6},${Height}, A ${Width-18} ${Height-8} 0 0 0 12 6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** Line ****/\n\n  registerBehavior('basic Shapes', 'Line', 'Line')\n\n/**** Polyline ****/\n\n  registerBehavior('basic Shapes', 'Polyline', 'Polyline')\n\n/**** Arc ****/\n\n  registerBehavior('basic Shapes', 'Arc', 'Arc')\n\n/**** quadratic Bezier ****/\n\n  registerBehavior('basic Shapes', 'quadratic Bezier', 'quadraticBezier')\n\n/**** cubic Bezier ****/\n\n  registerBehavior('basic Shapes', 'cubic Bezier', 'cubicBezier')\n\n/**** Box ****/\n\n  registerBehavior('basic Shapes', 'Box', 'Box')\n\n/**** rounded Box ****/\n\n  registerBehavior('basic Shapes', 'rounded Box', 'roundedBox')\n\n/**** Oval ****/\n\n  registerBehavior('basic Shapes', 'Oval', 'Oval')\n\n/**** Chord ****/\n\n  registerBehavior('basic Shapes', 'Chord', 'Chord')\n\n/**** Pie ****/\n\n  registerBehavior('basic Shapes', 'Pie', 'Pie')\n\n/**** Polygon ****/\n\n  registerBehavior('basic Shapes', 'Polygon', 'Polygon')\n\n/**** regular Polygon ****/\n\n  registerBehavior('basic Shapes', 'regular Polygon', 'regularPolygon')\n\n/**** flat List View ****/\n\n  registerBehavior('other Controls', 'flat List View', 'FlatListView')\n\n/**** nested List View ****/\n\n  registerBehavior('other Controls', 'nested List View', 'NestedListView')\n\n/**** CSSStyleOfVisual ****/\n\n  export function CSSStyleOfVisual (Visual:SNS_Visual):string {\n    expectVisual('visual',Visual)\n\n    let CSSStyleList:string[] = []\n      const {\n        BackgroundColor, BackgroundTexture, ForegroundColor,\n        FontFamily, FontSize, FontWeight, FontStyle, LineHeight\n      } = Visual\n\n      if (BackgroundColor != null) { CSSStyleList.push(`background-color:${BackgroundColor}`) }\n      if (BackgroundTexture != null) {\n        CSSStyleList.push(\n          `background-image:${BackgroundTexture}; background-repeat:repeat`\n        )\n      }\n      if (ForegroundColor != null) { CSSStyleList.push(`color:${ForegroundColor}`) }\n\n      if (FontFamily != null) { CSSStyleList.push(`font-family:${FontFamily}`) }\n      if (FontSize   != null) { CSSStyleList.push(`font-size:${FontSize}px`) }\n      if (FontWeight != null) { CSSStyleList.push(`font-weight:${FontWeight}`) }\n      if (FontStyle  != null) { CSSStyleList.push(`font-style:${FontStyle}`) }\n      if (LineHeight != null) { CSSStyleList.push(`line-height:${LineHeight}px`) }\n    return CSSStyleList.join(';')\n  }\n\n/**** consume/consumingEvent ****/\n\n  function consumeEvent (Event:Event):void {\n    Event.stopPropagation()\n    Event.preventDefault()\n  }\n  const consumingEvent = consumeEvent\n\n/**** propagateEvent ****/\n\n  function propagateEvent (Event:Event):void { /* nop - just a dummy */ }\n\n//------------------------------------------------------------------------------\n//--                                SNS_Visual                                --\n//------------------------------------------------------------------------------\n\n  export class SNS_Visual {\n    protected constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      this._Project = Project\n      this._Id = Id || newId()\n    }   // IMPORTANT: SNS_Project constructor will pass \"undefined\" as \"Project\"\n\n  /**** Id - for internal use only ****/\n\n    private _Id:SNS_Id\n\n    public get Id ():SNS_Id  { return this._Id }\n    public set Id (_:SNS_Id) { throwReadOnlyError('Id') }\n\n  /**** Name ****/\n\n    protected _Name:SNS_Name|undefined\n\n    public get Name ():SNS_Name|undefined { return this._Name }\n    public set Name (newName:SNS_Name|undefined) {\n      allowName('visual name',newName)\n      if (newName != null) {\n        newName = newName.trim()\n        if (newName === '') { newName = undefined }\n      }\n\n      if (this._Name !== newName) {\n        this._Name = newName\n        this._reportChange('configure',this,'Name',newName)\n        this.rerender()\n      }\n    }\n\n  /**** Project ****/\n\n    protected _Project:SNS_Project\n\n    public get Project ():SNS_Project  { return this._Project }\n    public set Project (_:SNS_Project) { throwReadOnlyError('Project') }\n\n  /**** Folder ****/\n\n    protected _Folder:SNS_Folder|undefined\n\n    public get Folder ():SNS_Folder|undefined  { return this._Folder }\n    public set Folder (_:SNS_Folder|undefined) { throwReadOnlyError('Folder') }\n\n  /**** isAttached ****/\n\n    public get isAttached ():boolean  {\n      return (this._Folder == null ? ValueIsProject(this) : this._Folder.isAttached )\n    }\n    public set isAttached (_:boolean) { throwReadOnlyError('isAttached') }\n\n  /**** Application ****/\n\n    public get Application ():Indexable  { return this._Project.Application }\n    public set Application (_:Indexable) { throwReadOnlyError('Application') }\n\n  /**** BackgroundColor ****/\n\n    protected _BackgroundColor:SNS_Color|undefined\n\n    public get BackgroundColor ():SNS_Color|undefined {\n      return (\n        this._BackgroundColor == null\n        ? this._Folder == null ? undefined : this._Folder.BackgroundColor\n        : this._BackgroundColor\n      )\n    }\n\n    public set BackgroundColor (newColor:SNS_Color|undefined) {\n      allowColor('visual background color',newColor)\n      if (this._BackgroundColor !== newColor) {\n        this._BackgroundColor = newColor\n\n        this._reportChange('configure',this,'BackgroundColor',newColor)\n        this.rerender()\n      }\n    }\n\n  /**** BackgroundTexture ****/\n\n    protected _BackgroundTexture:SNS_URL|undefined\n\n    public get BackgroundTexture ():SNS_URL|undefined {\n      return (\n        this._BackgroundTexture == null\n        ? this._Folder == null ? undefined : this._Folder.BackgroundTexture\n        : this._BackgroundTexture\n      )\n    }\n\n    public set BackgroundTexture (newTexture:SNS_URL|undefined) {\n      allowURL('visual background texture',newTexture)\n      if (this._BackgroundTexture !== newTexture) {\n        this._BackgroundTexture = newTexture\n\n        this._reportChange('configure',this,'BackgroundTexture',newTexture)\n        this.rerender()\n      }\n    }\n\n  /**** FontFamily ****/\n\n    protected _FontFamily:SNS_Textline|undefined\n\n    public get FontFamily ():SNS_Textline|undefined {\n      return (\n        this._FontFamily == null\n        ? this._Folder == null ? undefined : this._Folder.FontFamily\n        : this._FontFamily\n      )\n    }\n\n    public set FontFamily (newFontFamily:SNS_Textline|undefined) {\n      allowTextline('visual font family',newFontFamily)\n      if (this._FontFamily !== newFontFamily) {\n        this._FontFamily = newFontFamily\n\n        this._reportChange('configure',this,'FontFamily',newFontFamily)\n        this.rerender()\n      }\n    }\n\n  /**** FontSize ****/\n\n    protected _FontSize:SNS_Ordinal|undefined\n\n    public get FontSize ():SNS_Ordinal|undefined {\n      return (\n        this._FontSize == null\n        ? this._Folder == null ? undefined : this._Folder.FontSize\n        : this._FontSize\n      )\n    }\n\n    public set FontSize (newFontSize:SNS_Ordinal|undefined) {\n      allowOrdinal('visual font size',newFontSize)\n      if (this._FontSize !== newFontSize) {\n        this._FontSize = newFontSize\n\n        this._reportChange('configure',this,'FontSize',newFontSize)\n        this.rerender()\n      }\n    }\n\n  /**** FontWeight ****/\n\n    protected _FontWeight:SNS_Ordinal|undefined\n\n    public get FontWeight ():SNS_Ordinal|undefined {\n      return (\n        this._FontWeight == null\n        ? this._Folder == null ? undefined : this._Folder.FontWeight\n        : this._FontWeight\n      )\n    }\n\n    public set FontWeight (newFontWeight:SNS_Ordinal|undefined) {\n      allowIntegerInRange('visual font weight',newFontWeight, 1,1000)\n      if (this._FontWeight !== newFontWeight) {\n        this._FontWeight = newFontWeight\n\n        this._reportChange('configure',this,'FontWeight',newFontWeight)\n        this.rerender()\n      }\n    }\n\n  /**** FontStyle ****/\n\n    protected _FontStyle:SNS_FontStyle|undefined\n\n    public get FontStyle ():SNS_FontStyle|undefined {\n      return (\n        this._FontStyle == null\n        ? this._Folder == null ? undefined : this._Folder.FontStyle\n        : this._FontStyle\n      )\n    }\n\n    public set FontStyle (newFontStyle:SNS_FontStyle|undefined) {\n      allowOneOf('visual font style',newFontStyle, SNS_FontStyles)\n      if (this._FontStyle !== newFontStyle) {\n        this._FontStyle = newFontStyle\n\n        this._reportChange('configure',this,'FontStyle',newFontStyle)\n        this.rerender()\n      }\n    }\n\n  /**** LineHeight ****/\n\n    protected _LineHeight:SNS_Ordinal|undefined\n\n    public get LineHeight ():SNS_Ordinal|undefined {\n      return (\n        this._LineHeight == null\n        ? this._Folder == null ? undefined : this._Folder.LineHeight\n        : this._LineHeight\n      )\n    }\n\n    public set LineHeight (newLineHeight:SNS_Ordinal|undefined) {\n      allowOrdinal('visual line height',newLineHeight)\n      if (this._LineHeight !== newLineHeight) {\n        this._LineHeight = newLineHeight\n\n        this._reportChange('configure',this,'LineHeight',newLineHeight)\n        this.rerender()\n      }\n    }\n\n  /**** ForegroundColor ****/\n\n    protected _ForegroundColor:SNS_Color|undefined\n\n    public get ForegroundColor ():SNS_Color|undefined {\n      return (\n        this._ForegroundColor == null\n        ? this._Folder == null ? undefined : this._Folder.ForegroundColor\n        : this._ForegroundColor\n      )\n    }\n\n    public set ForegroundColor (newForegroundColor:SNS_Color|undefined) {\n      allowColor('visual foreground color',newForegroundColor)\n      if (this._ForegroundColor !== newForegroundColor) {\n        this._ForegroundColor = newForegroundColor\n\n        this._reportChange('configure',this,'ForegroundColor',newForegroundColor)\n        this.rerender()\n      }\n    }\n\n  /**** Color ****/\n\n    public get Color ():SNS_Color|undefined { return this.ForegroundColor }\n    public set Color (newColor:SNS_Color|undefined) { this.ForegroundColor = newColor }\n\n  /**** Value ****/\n\n    protected _Value:serializableValue = null\n\n    public get Value ():serializableValue  { return this._Value }\n    public set Value (newValue:serializableValue) {\n      if (ValuesDiffer(this._Value,newValue)) {\n        this._Value = newValue\n\n        this._reportChange('configure',this,'Value',newValue)\n        this.rerender()\n      }\n    }\n\n  /**** editableValue (may be overwritten) ****/\n\n    public get editableValue ():SNS_Text {\n      return (this._Value == null ? '' : ''+this._Value)\n    }                      // stringify non-literal values before returning them\n\n    public set editableValue (newValue:SNS_Text) {\n      this.Value = newValue      // parse text before setting non-literal values\n    }\n\n  /**** observed ****/\n\n// @ts-ignore TS2564 allow \"_observed\" to be assigned upon first use\n    protected _observed:Indexable\n\n    public get observed ():Indexable {\n      if (this._observed == null) {\n        this._observed = observe({},{ deep:false })\n      }\n      return this._observed\n    }\n    public set observed (_:Indexable) { throwReadOnlyError('observed') }\n\n  /**** unobserved ****/\n\n// @ts-ignore TS2564 allow \"_unobserved\" to be assigned upon first use\n    protected _unobserved:Indexable\n\n    public get unobserved ():Indexable {\n      if (this._unobserved == null) {\n        this._unobserved = {}\n      }\n      return this._unobserved\n    }\n    public set unobserved (_:Indexable) { throwReadOnlyError('unobserved') }\n\n  /**** memoized ****/\n\n// @ts-ignore TS2564 allow \"_memoized\" to be assigned upon first use\n    protected _memoized:Indexable\n\n    public get memoized ():Indexable {\n      if (this._memoized == null) {\n        this._memoized = {}\n      }\n      return this._memoized\n    }\n    public set memoized (_:Indexable) { throwReadOnlyError('memoized') }\n\n  /**** Script ****/\n\n    public get Script ():SNS_Text|undefined {\n      return (this._pendingScript == null ? this._activeScript : this._pendingScript)\n    }\n    public set Script (_:SNS_Text|undefined) { throwReadOnlyError('Script') }\n\n  /**** activeScript ****/\n\n    protected _activeScript:SNS_Text|undefined\n\n    public get activeScript ():SNS_Text|undefined {\n      return this._activeScript\n    }\n\n    public set activeScript (newScript:SNS_Text|undefined) {\n      allowText('visual script',newScript)\n      if (newScript === '') { newScript = undefined }      // no \".trim()\" here!\n\n      if (this._activeScript !== newScript) {\n        this._activeScript = newScript\n//      this.activateScript()                   // not here (because of sharing)\n\n        this._reportChange('configure',this,'activeScript',newScript)\n        this.rerender()\n      }\n    }\n\n  /**** pendingScript ****/\n\n    protected _pendingScript:SNS_Text|undefined\n\n    public get pendingScript ():SNS_Text|undefined {\n      return this._pendingScript\n    }\n\n    public set pendingScript (newScript:SNS_Text|undefined) {\n      allowText('visual script',newScript)\n      if (this._pendingScript !== newScript) {\n        this._pendingScript = newScript\n\n        this._reportChange('configure',this,'pendingScript',newScript)\n        this.rerender()\n      }\n    }\n\n  /**** activateScript ****/\n\n    public activateScript ():void {\n      let activeScript:string|undefined = (this._activeScript || '').trim()\n//    if (activeScript === '') { activeScript = undefined }\n\n      this.Error = undefined\n\n      this._Renderer = undefined\n      unregisterAllReactiveFunctionsFrom(this)\n\n      if (activeScript != null) {\n        let compiledScript\n        try {\n          compiledScript = new Function(\n            'me,my, SNS,JIL, Application, html,reactively, ' +\n            'onRender,onMount,onUnmount, onClick,onInput,onDrop, ' +\n            'useBehavior', activeScript\n          )\n        } catch (Signal:any) {\n          console.error('visual script compilation failure',Signal)\n          this.Error = {\n            Type:'Script Compilation Failure',\n            Message:''+Signal, Cause:Signal\n          }                          // also autoamtically rerenders this visual\n          return\n        }\n\n        const reactively = (reactiveFunction:Function):void => {\n          expectFunction('reactive function',reactiveFunction)\n// @ts-ignore TS2345 do not care about the specific signature of \"reactiveFunction\"\n          registerReactiveFunctionIn(this,computed(reactiveFunction))\n        }\n\n        const onRender  = this.onRender.bind(this)\n        const onMount   = this.onMount.bind(this)\n        const onUnmount = this.onUnmount.bind(this)\n\n// @ts-ignore TS7053 allow indexing for a moment\n        const onClick = (this['onClick'] || propagateEvent).bind(this)\n// @ts-ignore TS7053 allow indexing for a moment\n        const onInput = (this['onInput'] || propagateEvent).bind(this)\n// @ts-ignore TS7053 allow indexing for a moment\n        const onDrop  = (this['onDrop']  || propagateEvent).bind(this)\n\n        try {\n          compiledScript.call(\n            this, this,this, SNS,JIL, this.Project.Application, html,reactively,\n            onRender,onMount,onUnmount, onClick,onInput,onDrop,\n            useBehavior.bind(this)\n          )\n        } catch (Signal) {\n          console.error('visual script execution failure',Signal)\n          this.Error = {\n            Type:'Script Execution Failure',\n            Message:''+Signal, Cause:Signal\n          }                          // also automatically rerenders this visual\n          return\n        }\n      }\n      this.rerender()\n    }\n\n  /**** ScriptError - for internal use only ****/\n\n    protected _ScriptError:SNS_Error|undefined\n\n    public get ScriptError ():SNS_Error|undefined {\n      return (this._ScriptError == null ? undefined : { ...this._ScriptError })\n    }\n    public set ScriptError (newScriptError:SNS_Error|undefined) {\n      allowError('script error setting',newScriptError)\n      if (ValuesDiffer(this._ScriptError,newScriptError)) {\n        this._ScriptError = newScriptError\n\n        this._reportChange('configure',this,'ScriptError',newScriptError)\n        this.rerender()\n      }\n    }\n\n  /**** CSSStyle ****/\n\n    public get CSSStyle ():string  { return CSSStyleOfVisual(this) }\n    public set CSSStyle (_:string) { throwReadOnlyError('CSSStyle') }\n\n  /**** Renderer ****/\n\n    protected _Renderer:Function|undefined\n\n    public get Renderer ():Function|undefined { return this._Renderer }\n    public set Renderer (newRenderer:Function|undefined) {\n      allowFunction('visual renderer',newRenderer)\n      if (this._Renderer !== newRenderer) {\n        this._Renderer = newRenderer\n        this.rerender()\n      }\n    }\n\n  /**** onRender ****/\n\n    public onRender (newRenderer:Function):void {\n      expectFunction('renderer callback',newRenderer)\n      this.Renderer = newRenderer\n    }\n\n  /**** Rendering ****/\n\n    public Rendering (PropSet:Indexable):any {\n      if (this.hasError) {\n        return ErrorRenderer.call(this)\n      }\n\n      let Renderer = this._Renderer\n      if (Renderer == null) { return '' }\n\n      try {\n        return Renderer.call(this,PropSet)\n      } catch (Signal:any) {\n        this.Error = {\n          Type:'Rendering Failure',\n          Message:''+Signal, Cause:Signal\n        }\n        return ErrorRenderer.call(this)\n      }\n    }\n\n  /**** rerender (to be overwritten) ****/\n\n// @ts-ignore TS2564 allow \"Board\" and \"Sticker\" to be never read\n    public rerender (Board?:SNS_Board, Sticker?:SNS_Sticker):void {\n      /* to be overwritten */\n    }\n\n  /**** View ****/\n\n    private _View:HTMLElement|undefined\n\n    public get View ():HTMLElement|undefined { return this._View }\n    public set View (_:HTMLElement)          { throwReadOnlyError('View') }\n\n  /**** isMounted ****/\n\n    public get isMounted ():boolean  { return (this._View != null) }\n    public set isMounted (_:boolean) { throwReadOnlyError('isMounted') }\n\n  /**** onMount ****/\n\n    protected _onMount:Function|undefined\n\n    public onMount (newCallback:Function|undefined):void {\n      allowFunction('\"onMount\" callback',newCallback)\n      if (newCallback == null) {\n        this._onMount = undefined\n      } else {\n        this._onMount = () => {\n          try {\n            newCallback.call(this)\n          } catch (Signal:any) {\n            this.Error = {\n              Type:'\"onMount\" Callback Failure',\n              Message:''+Signal, Cause:Signal\n            }\n            this.rerender()\n          }\n        }\n      }\n    }\n\n  /**** onUnmount ****/\n\n    protected _onUnmount:Function|undefined\n\n    public onUnmount (newCallback:Function|undefined):void {\n      allowFunction('\"onUnmount\" callback',newCallback)\n      if (newCallback == null) {\n        this._onUnmount = undefined\n      } else {\n        this._onUnmount = () => {\n          try {\n            newCallback.call(this)\n          } catch (Signal:any) {\n            this.Error = {\n              Type:'\"onUnmount\" Callback Failure',\n              Message:''+Signal, Cause:Signal\n            }\n          }\n        }\n      }\n    }\n\n  /**** Error - for internal use only ****/\n\n    protected _Error:SNS_Error|undefined\n\n    public get Error ():SNS_Error|undefined {\n      return (this._Error == null ? undefined : {...this._Error})\n    }\n    public set Error (newError:SNS_Error|undefined) {\n      allowError('error setting',newError)\n      if (ValuesDiffer(this._Error,newError)) {\n        this._Error = newError\n\n        this._reportChange('configure',this,'Error',newError)\n        this.rerender()\n      }\n    }\n\n  /**** hasError ****/\n\n    public get hasError ():boolean  { return (this._Error != null) }\n    public set hasError (_:boolean) { throwReadOnlyError('hasError') }\n\n  /**** _reportChange ****/\n\n    /* protected */ _reportChange (\n      Change:SNS_Change|'configure', ...ArgList:any[]\n    ):void {\n// @ts-ignore TS2556 what is this error good for?\n      this._Project._reportChange(Change, ...ArgList)\n    }\n\n  /**** _serializeConfigurationInto ****/\n\n    protected _serializeConfigurationInto (Serialization:Serializable):void {\n      Serialization.Id = this.Id                                 // special case\n\n      const serializeProperty = (Name:string) => {\n// @ts-ignore TS7053 allow indexing of \"this\"\n        if (this['_'+Name] != null) {\n// @ts-ignore TS7053 allow indexing of \"this\" and \"Serialization\"\n          Serialization[Name] = this[Name]\n        }\n      }\n\n      ;[\n        'Name','BackgroundColor','BackgroundTexture',\n        'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n        'ForegroundColor',\n        'memoized','Value','activeScript','pendingScript',\n      ].forEach((Name:string) => serializeProperty(Name))\n    }\n\n  /**** _deserializeConfigurationFrom ****/\n\n    protected _deserializeConfigurationFrom (Serialization:Serializable):void {\n      const deserializeProperty = (Name:string) => {\n        if (Serialization[Name] != null) {\n          try {\n// @ts-ignore TS7053 allow indexing of \"this\" and \"Serialization\"\n            this[Name] = Serialization[Name]   // also validates the given value\n          } catch (Signal:any) {\n            console.warn(\n              'DeserializationError:invalid value for property ' + quoted(Name)\n            )\n          }\n        }\n      }\n\n      deserializeProperty('activeScript')            // e.g., for custom setters\n\n      ;[\n        'Name','BackgroundColor','BackgroundTexture',\n        'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n        'ForegroundColor',\n        /*'memoized',*/'Value','activeScript','pendingScript',\n      ].forEach((Name:string) => deserializeProperty(Name))\n\n      if (ValueIsPlainObject(Serialization.memoized)) {\n        try {\n          Object.assign(this.memoized,Serialization.memoized)\n        } catch (Signal:any) {\n          console.warn(\n            'DeserializationError:invalid value for property \"memoized\"'\n          )\n        }\n      }\n    }   // deserializing \"activeScript\" also automatically activates that script\n  }\n\n//------------------------------------------------------------------------------\n//--                                SNS_Folder                                --\n//------------------------------------------------------------------------------\n\n  export class SNS_Folder extends SNS_Visual {\n    protected constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      super(Project, Id)\n    }   // IMPORTANT: SNS_Project constructor will pass \"undefined\" as \"Project\"\n\n  /**** Path ****/\n\n    public get Path ():SNS_Textline  {\n      const outerFolder = this._Folder\n      if (outerFolder == null) {\n        return '|'\n      } else {\n        const localPath = this.Name || ('#' + this.Index)\n        const outerPath = outerFolder.Path\n        return (outerPath === '|' ? '' : outerPath) + '|' + localPath\n      }\n    }\n    public set Path (_:SNS_Textline) { throwReadOnlyError('Path') }\n\n  /**** BoardAtPath ****/\n\n    public BoardAtPath (Path:SNS_Textline):SNS_Board|undefined {\n      expectTextline('board path',Path)\n\n      Path = Path.trim()\n      if (Path === '') {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n        return (this._Folder == null ? undefined : this as SNS_Board)\n      }\n\n      if (Path.startsWith('|')) {        // let \"Project\" process absolute paths\n        return this._Project.BoardAtPath(Path.replace(/^(\\s*\\|)*/,''))\n      }\n\n      Path = Path.replace(/\\|+/g,'|')        // reduce multiple consecutive \"|\"s\n\n      const splitPath:(string|number)[] = Path.split('|').map(\n        (Element:string) => Element.trim()      // eliminate leading/trailing ws\n      ).map(\n        (Element:string) => (/^#\\d+$/.test(Element)    // disting. names/indices\n          ? parseInt(Element.slice(1),10)\n          : Element\n        )\n      )\n\n      let Result:SNS_Board|undefined\n        for (let i = 0, l = splitPath.length; i < l; i++) {\n          const Element:string|number = splitPath[i]\n          if (typeof Element === 'number') {\n            Result = (Result || this).BoardAt(Element)\n          } else {\n            Result = (Result || this).BoardNamed(Element)\n          }\n          if (Result == null) { return undefined }\n        }\n      return Result\n    }\n\n  /**** IndexPath ****/\n\n    public get IndexPath ():SNS_Ordinal[]  {\n      const outerFolder = this._Folder\n      if (outerFolder == null) {\n        return []\n      } else {\n        return outerFolder.IndexPath.concat(this.Index)\n      }\n    }\n    public set IndexPath (_:SNS_Ordinal[]) { throwReadOnlyError('IndexPath') }\n\n  /**** SnapToGrid - inherited from outer folders ****/\n\n    protected _SnapToGrid:boolean|undefined\n\n    public get SnapToGrid ():boolean {\n      return (\n        ! this._SnapToGrid\n        ? this._Folder == null ? false : this._Folder.SnapToGrid\n        : this._SnapToGrid == true\n      )\n    }\n\n    public set SnapToGrid (newSetting:boolean|undefined) {\n      allowBoolean('snap-to-grid setting',newSetting)\n      if (this._SnapToGrid !== newSetting) {\n        this._SnapToGrid = newSetting\n\n        this._reportChange('configure',this,'SnapToGrid',newSetting)\n        this.rerender()\n      }\n    }\n\n  /**** GridWidth ****/\n\n    protected _GridWidth:SNS_Cardinal|undefined\n\n    public get GridWidth ():SNS_Cardinal {\n      return (\n        this._GridWidth == null\n        ? this._Folder == null ? defaultGridWidth : this._Folder.GridWidth\n        : this._GridWidth\n      )\n    }\n\n    public set GridWidth (newWidth:SNS_Cardinal|undefined) {\n      allowCardinal('snap-to-grid width',newWidth)\n      if (this._GridWidth !== newWidth) {\n        this._GridWidth = newWidth\n\n        this._reportChange('configure',this,'GridWidth',newWidth)\n        this.rerender()\n      }\n    }\n\n  /**** GridHeight ****/\n\n    protected _GridHeight:SNS_Cardinal|undefined\n\n    public get GridHeight ():SNS_Cardinal {\n      return (\n        this._GridHeight == null\n        ? this._Folder == null ? defaultGridHeight : this._Folder.GridHeight\n        : this._GridHeight\n      )\n    }\n\n    public set GridHeight (newHeight:SNS_Cardinal|undefined) {\n      allowCardinal('snap-to-grid height',newHeight)\n      if (this._GridHeight !== newHeight) {\n        this._GridHeight = newHeight\n\n        this._reportChange('configure',this,'GridHeight',newHeight)\n        this.rerender()\n      }\n    }\n\n  /**** Index ****/\n\n    public get Index ():number  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? -1 : this._Folder.IndexOfBoard(this))\n    }\n    public set Index (_:number) { throwReadOnlyError('Index') }\n\n  /**** mayBeShiftedUp ****/\n\n    public get mayBeShiftedUp ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardUp(this))\n    }\n    public set mayBeShiftedUp (_:boolean) { throwReadOnlyError('mayBeShiftedUp') }\n\n  /**** mayBeShiftedDown ****/\n\n    public get mayBeShiftedDown ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardDown(this))\n    }\n    public set mayBeShiftedDown (_:boolean) { throwReadOnlyError('mayBeShiftedDown') }\n\n  /**** mayBeShiftedIn ****/\n\n    public get mayBeShiftedIn ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardIn(this))\n    }\n    public set mayBeShiftedIn (_:boolean) { throwReadOnlyError('mayBeShiftedIn') }\n\n  /**** mayBeShiftedOut ****/\n\n    public get mayBeShiftedOut ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardOut(this))\n    }\n    public set mayBeShiftedOut (_:boolean) { throwReadOnlyError('mayBeShiftedOut') }\n\n  /**** containsFolder ****/\n\n    public containsFolder (Folder:SNS_Folder):boolean {\n      expectFolder('folder',Folder)\n\n      Folder = Folder.Folder as SNS_Folder\n        while (Folder != null) {\n          if (Folder === this) { return true }\n          Folder = Folder.Folder as SNS_Folder\n        }\n      return false\n    }\n\n  /**** BoardList ****/\n\n    protected _BoardList:SNS_Board[] = []\n\n    public get BoardList ():SNS_Board[]  { return this._BoardList.slice() }\n    public set BoardList (_:SNS_Board[]) { throwReadOnlyError('BoardList') }\n\n  /**** BoardCount ****/\n\n    public get BoardCount ():number  { return this._BoardList.length }\n    public set BoardCount (_:number) { throwReadOnlyError('BoardCount') }\n\n  /**** IndexOfBoard ****/\n\n    public IndexOfBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):number {\n      const Board = this.Board(BoardOrNameOrIndex)\n      if (Board == null) { return -1 }\n\n      return this._BoardList.indexOf(Board)\n    }\n\n  /**** Board ****/\n\n    public Board (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):SNS_Board|undefined {\n      expectValue('board, name or index',BoardOrNameOrIndex)\n\n      switch (true) {\n        case ValueIsBoard(BoardOrNameOrIndex):\n          const Board = BoardOrNameOrIndex as SNS_Board\n          return (Board._Folder === this ? Board : undefined)\n        case ValueIsInteger(BoardOrNameOrIndex):\n          let Index = BoardOrNameOrIndex as number\n          if (Index < 0) { Index += this._BoardList.length }\n          return this._BoardList[Index]\n        case ValueIsName(BoardOrNameOrIndex):\n          return this.BoardNamed(BoardOrNameOrIndex as SNS_Name)\n      }\n\n      throwError(\n        'InvalidArgument: no valid board, board name or board index given'\n      )\n    }\n\n  /**** existingBoard ****/\n\n    public existingBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):SNS_Board {\n      let Board = this.Board(BoardOrNameOrIndex)\n        if (Board == null) throwError(\n          'BoardNotFound: the desired board could not be found'\n        )\n      return Board\n    }\n\n  /**** BoardNamed ****/\n\n    public BoardNamed (Name:SNS_Name):SNS_Board|undefined {\n      expectName('SNS board name',Name)\n      Name = Name.trim().toLowerCase()\n\n      let Result:SNS_Board|undefined = undefined\n        this._BoardList.forEach((Board:SNS_Board) => {\n          if (\n            (Result == null) &&\n            (Board.Name != null) && (Board.Name.toLowerCase() === Name)\n          ) {\n            Result = Board\n          }\n        })\n      return Result\n    }\n\n  /**** BoardAt ****/\n\n    public BoardAt (Index:number):SNS_Board|undefined {\n      expectInteger('SNS board index',Index)\n      if (Index < 0) { Index += this._BoardList.length }\n      return this._BoardList[Index]\n    }\n\n  /**** hasBoard ****/\n\n    public hasBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      return (this.Board(BoardOrNameOrIndex) != null)\n    }\n\n  /**** newBoardAt ****/\n\n    public newBoardAt (Index?:number, Id?:SNS_Id):SNS_Board {\n      return (\n        Id == null\n        ? this.BoardDeserializedAt({},Index)\n        : this.BoardDeserializedAt({ Id },Index)\n      )\n    }\n\n  /**** BoardDeserializedAt - nota bene: needs explicit script activation! ****/\n\n    public BoardDeserializedAt (Serialization:Serializable, Index?:number):SNS_Board {\n      expectSerializable('board serialization',Serialization)\n      allowInteger     ('board insertionindex',Index)\n\n      if (Index == null) {\n        Index = this._BoardList.length\n      } else {\n        if (Index < 0) { Index += this._BoardList.length }\n        Index = Math.max(0,Math.min(Index,this._BoardList.length))\n      }\n\n      const Id = allowedId('board id',Serialization.Id)\n\n      let newBoard = new SNS_Board(this._Project, Id)        // registers itself\n        this._attachBoardAt(newBoard,Index)\n\n        newBoard._deserializeConfigurationFrom(Serialization)\n// @ts-ignore TS2445 \"newBoard\" *IS* an SNS_Board\n        newBoard._deserializeStickersFrom(Serialization)\n// @ts-ignore TS2445 \"newBoard\" *IS* an SNS_Board\n        newBoard._deserializeBoardsFrom(Serialization)\n\n        this.rerender()\n      return newBoard\n    }\n\n  /**** DuplicateOfBoardAt ****/\n\n    public DuplicateOfBoardAt (Index:number):SNS_Board {\n      expectInteger('board index',Index)\n      const Board = this.existingBoard(Index)                             // DRY\n      const Serialization = Board.Serialization\n        removeIdsFrom(Serialization)\n      return this.BoardDeserializedAt(Serialization,Index+1)\n    }\n\n  /**** mayShiftBoardUp/Down ****/\n\n    public mayShiftBoardUp (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      return (this._BoardList.indexOf(Board) > 0)\n    }\n\n    public mayShiftBoardDown (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n\n      const BoardList  = this._BoardList\n      const BoardIndex = BoardList.indexOf(Board)\n      return (BoardIndex >= 0) && (BoardIndex < BoardList.length-1)\n    }\n\n  /**** shiftBoardToTop ****/\n\n    public shiftBoardToTop (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardUp(Board)) {                       // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,0)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardUp ****/\n\n    public shiftBoardUp (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardUp(Board)) {                       // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,oldIndex-1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardDown ****/\n\n    public shiftBoardDown (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardDown(Board)) {                     // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,oldIndex+1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardToBottom ****/\n\n    public shiftBoardToBottom (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardDown(Board)) {                     // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,this._BoardList.length)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardTo ****/\n\n    public shiftBoardTo (\n      BoardOrNameOrIndex:SNS_Board|SNS_Name|number, newIndex:number\n    ):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n\n      expectInteger('SNS board index',newIndex)\n      if (newIndex < 0) { newIndex += this._BoardList.length }\n      newIndex = Math.max(0,Math.min(newIndex,this._BoardList.length))\n\n      const oldIndex = this._BoardList.indexOf(Board)\n      if (oldIndex === newIndex) { return }\n\n      this._detachBoardAt(oldIndex)\n      this._attachBoardAt(Board,newIndex)\n\n      this.rerender()\n    }\n\n  /**** shiftBoardsByIndex ****/\n\n    public shiftBoardsByIndex (\n      oldIndex:number, newIndex:number, Count:number\n    ):void {\n      const BoardCount = this._BoardList.length\n\n      expectIntegerInRange('old index',oldIndex,0,BoardCount)\n      expectIntegerInRange('new index',newIndex,0,BoardCount)\n\n      const BoardsToShift = this._BoardList.slice(oldIndex,oldIndex+Count)\n      BoardsToShift.forEach((_:any) => this._detachBoardAt(oldIndex))\n\n      if (newIndex > oldIndex) { newIndex -= Count }\n      BoardsToShift.forEach(\n        (Board:SNS_Board,i:number) => this._attachBoardAt(Board,newIndex+i)\n      )\n\n      this.rerender()\n    }\n\n  /**** mayShiftBoardIn/Out ****/\n\n    public mayShiftBoardIn (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      return this.mayShiftBoardDown(Board)                                // DRY\n    }\n\n    public mayShiftBoardOut (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      return (this._Folder != null)\n    }\n\n  /**** shiftBoardIn ****/\n\n    public shiftBoardIn (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardIn(Board)) {                       // keeps code DRY\n        const oldIndex  = this._BoardList.indexOf(Board)\n        const newFolder = this._BoardList[oldIndex+1]\n\n        this._detachBoardAt(oldIndex)\n        newFolder._attachBoardAt(Board,0)\n\n        this.rerender()\n        newFolder.rerender()\n      }\n    }\n\n  /**** shiftBoardOut ****/\n\n    public shiftBoardOut (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardOut(Board)) {                      // keeps code DRY\n        const oldIndex  = this._BoardList.indexOf(Board)\n        const newFolder = this._Folder as SNS_Folder\n\n        this._detachBoardAt(oldIndex)\n        newFolder._attachBoardAt(Board,newFolder.Index)\n\n        this.rerender()\n        newFolder.rerender()\n      }\n    }\n\n  /**** mayMoveBoardTo ****/\n\n    public mayMoveBoardTo (\n      BoardOrNameOrIndex:SNS_Board|SNS_Name|number,\n      FolderOrNameOrIndex:SNS_Folder|SNS_Name|number, Index?:number\n    ):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      const Folder = (\n        ValueIsFolder(FolderOrNameOrIndex)\n        ? FolderOrNameOrIndex as SNS_Folder\n        : this.existingBoard(FolderOrNameOrIndex as SNS_Name|number)\n      )\n      allowInteger('insertion index',Index)\n\n      return (\n        Folder.isAttached && (Folder !== Board) && ! Board.containsFolder(Folder)\n      )\n    }\n\n  /**** moveBoardTo ****/\n\n    public moveBoardTo (\n      BoardOrNameOrIndex:SNS_Board|SNS_Name|number,\n      FolderOrNameOrIndex:SNS_Folder|SNS_Name|number, Index?:number\n    ):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      const newFolder = (\n        ValueIsFolder(FolderOrNameOrIndex)\n        ? FolderOrNameOrIndex as SNS_Folder\n        : this.existingBoard(FolderOrNameOrIndex as SNS_Name|number)\n      )\n      allowInteger('insertion index',Index)\n\n      if (\n        newFolder.isAttached && (newFolder !== Board) &&\n        ! Board.containsFolder(newFolder)\n      ) {\n        const oldIndex = this._BoardList.indexOf(Board)\n\n        let newIndex = (Index == null ? newFolder.BoardCount : Index)\n        if (newIndex < 0) { newIndex += newFolder.BoardCount }\n        newIndex = Math.max(0, Math.min(newIndex,newFolder.BoardCount))\n\n        this._detachBoardAt(oldIndex)\n        newFolder._attachBoardAt(Board,newIndex)\n\n        this.rerender()\n        newFolder.rerender()\n      }\n    }\n\n  /**** destroyBoard ****/\n\n    public destroyBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.Board(BoardOrNameOrIndex)\n      if (Board == null) {\n        if (ValueIsBoard(BoardOrNameOrIndex)) throwError(\n          'NoSuchBoard: the given board could not be found'\n        )\n        return\n      }\n\n      ;(Board as SNS_Board).clear()\n      unregisterAllReactiveFunctionsFrom(Board as SNS_Board)\n\n      const oldIndex = this._BoardList.indexOf(Board as SNS_Board)\n      this._detachBoardAt(oldIndex)\n\n      unregisterFolder(Board)\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n      Board._Project = undefined         // detaches this board from the project\n\n      this._reportChange('destroyBoard',Board)\n      this.rerender()\n    }\n\n  /**** clear ****/\n\n    public clear ():void {\n      for (let i = 0, l = this._BoardList.length; i < l; i++) {\n        this.destroyBoard(this._BoardList[0])\n      }\n    }\n\n  /**** _attachBoardAt ****/\n\n    /* protected */ _attachBoardAt (Board:SNS_Board, Index:number):void {\n      Board._Folder = this\n      this._BoardList.splice(Index,0, Board)\n      this._reportChange('attachBoard', Board, this, Index)\n    }\n\n  /**** _detachBoardAt ****/\n\n    /* protected */ _detachBoardAt (Index:number):void {\n      const Board = this._BoardList.splice(Index,1)[0]\n      Board._Folder = undefined\n      this._reportChange('detachBoard', Board, this, Index)\n    }\n\n  /**** _serializeConfigurationInto ****/\n\n    protected _serializeConfigurationInto (Serialization:Serializable):void {\n      super._serializeConfigurationInto(Serialization)\n\n      const serializeProperty = (Name:string) => {\n// @ts-ignore TS7053 allow indexing of \"this\"\n        if (this['_'+Name] != null) {\n// @ts-ignore TS7053 allow indexing of \"Serialization\"\n          Serialization[Name] = this[Name]\n        }\n      }\n\n      ;[\n        'SnapToGrid','GridWidth','GridHeight',\n      ].forEach((Name:string) => serializeProperty(Name))\n    }\n\n  /**** _deserializeConfigurationFrom ****/\n\n    protected _deserializeConfigurationFrom (Serialization:Serializable):void {\n      super._deserializeConfigurationFrom(Serialization)\n\n      const deserializeProperty = (Name:string) => {\n        if (Serialization[Name] != null) {\n          try {\n// @ts-ignore TS7053 allow indexing of \"this\"\n            this[Name] = Serialization[Name]   // also validates the given value\n          } catch (Signal:any) {\n            console.warn(\n              'DeserializationError:invalid value for property ' + quoted(Name)\n            )\n          }\n        }\n      }\n\n      ;[\n        'SnapToGrid','GridWidth','GridHeight',\n      ].forEach((Name:string) => deserializeProperty(Name))\n    }\n\n  /**** _serializeBoardsInto ****/\n\n    protected _serializeBoardsInto (Serialization:Serializable):void {\n      const BoardList = this._BoardList.slice()\n      if (BoardList.length > 0) {\n        Serialization.BoardList = BoardList.map(\n          (Board:SNS_Board) => Board.Serialization\n        )\n      }\n    }\n\n  /**** _deserializeBoardsFrom ****/\n\n    protected _deserializeBoardsFrom (Serialization:Serializable):void {\n      const BoardList = this._BoardList\n      if (BoardList.length > 0) { this.clear() }\n\n      if (\n        ValueIsListSatisfying(Serialization.BoardList,ValueIsPlainObject) &&\n        ((Serialization.BoardList as any[]).length > 0)\n      ) {\n        (Serialization.BoardList as Serializable[]).forEach(\n          (BoardSerialization:Serializable, Index:number) => {\n            this.BoardDeserializedAt(BoardSerialization,Index)\n          }\n        )\n      }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                               SNS_Project                                --\n//------------------------------------------------------------------------------\n\n  const SNS_ProjectPropertySet:Indexable = Object.create(null)\n    ;[\n      'Name','BackgroundColor','BackgroundTexture',\n      'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n      'ForegroundColor',\n      'memoized','Value','activeScript','pendingScript',\n      'SnapToGrid','GridWidth','GridHeight',\n    ].forEach((Property:string) => SNS_ProjectPropertySet[Property] = true)\n\n  export class SNS_Project extends SNS_Folder {\n    protected constructor (Name:SNS_Name) {\n// @ts-ignore TS2345 allow \"undefined\" here, as \"this\" is not possible\n      super(undefined,undefined)\n      this._Project = this // n.b. \"this\" must not be passed to \"super\"\n\n      expectName('project name',Name)\n      this._Name = Name\n    }\n\n  /**** Name ****/\n\n    public get Name ():SNS_Name|undefined  { return this._Name }\n    public set Name (_:SNS_Name|undefined) { throwReadOnlyError('Name') }\n\n  /**** IndexPath ****/\n\n    public get IndexPath ():SNS_Ordinal[]  { return [] }\n    public set IndexPath (_:SNS_Ordinal[]) { throwReadOnlyError('IndexPath') }\n\n  /**** BoardAtIndexPath ****/\n\n    public BoardAtIndexPath (IndexPath:SNS_Ordinal[]):SNS_Board|undefined {\n      expectListSatisfying('board index path',IndexPath,ValueIsOrdinal)\n\n      if (IndexPath.length === 0) {\n        return undefined\n      } else {\n        let Result:SNS_Board|undefined\n          for (let i = 0, l = IndexPath.length; i < l; i++) {\n            Result = (Result || this).BoardAt(IndexPath[i])\n            if (Result == null) { return undefined }\n          }\n        return Result\n      }\n    }\n\n  /**** FolderWithId ****/\n\n    public FolderWithId (Id:SNS_Id):SNS_Folder|undefined {\n      expectId('folder id',Id)\n      return FolderWithId(this,Id)\n    }\n\n  /**** BoardWithId ****/\n\n    public BoardWithId (Id:SNS_Id):SNS_Board|undefined {\n      const Folder = FolderWithId(this,Id)\n      if (ValueIsProject(Folder)) throwError(\n        'NotABoard: the folder with the given id is not a board, but the project'\n      )\n\n      return Folder as SNS_Board\n    }\n\n  /**** StickerWithId ****/\n\n    public StickerWithId (Id:SNS_Id):SNS_Sticker|undefined {\n      expectId('sticker id',Id)\n      return StickerWithId(this,Id)\n    }\n\n  /**** recursivelyActivateAllScripts ****/\n\n    public recursivelyActivateAllScripts ():void {\n      this.activateScript();\n\n      this._BoardList.forEach(\n        (Board:SNS_Board) => Board.recursivelyActivateAllScripts()\n      )\n    }\n\n  /**** onChange ****/\n\n    protected _onChange:SNS_onChangeCallback[] = []\n\n    public onChange (Callback:SNS_onChangeCallback):void {\n      expectFunction('\"onChange\" callback',Callback)\n      this._onChange.push(Callback)\n    }\n\n  /**** _reportChange ****/\n\n    /* protected */ _reportChange (\n      Change:SNS_Change|'configure', Visual:SNS_Visual, ...ArgList:any[]\n    ):void {\n      if (Change === 'configure') {\n        Change = ValueIsFolder(Visual) ? 'configureFolder' : 'configureSticker'\n      }\n\n      ArgList.unshift(this, Change, Visual)\n      this._onChange.forEach(\n// @ts-ignore TS2345 skip checking of individual \"ArgList\" elements\n        (Callback:SNS_onChangeCallback) => Callback.apply(this,ArgList)\n      )\n    }\n\n  /**** onRendering ****/\n\n    protected _onRendering:SNS_onRenderingCallback[] = []\n\n    public onRendering (Callback:SNS_onRenderingCallback):void {\n      expectFunction('\"onRendering\" callback',Callback)\n      this._onRendering.push(Callback)\n    }\n\n  /**** rerender - warning: semantics differs from that of other visuals ****/\n\n    public rerender (Board?:SNS_Board, Sticker?:SNS_Sticker):void {\n      this._onRendering.forEach(\n        (Callback:SNS_onRenderingCallback) => Callback(this, Board, Sticker)\n      )\n    }\n\n  /**** onError ****/\n\n    protected _onError:SNS_onErrorCallback[] = []\n\n    public onError (Callback:SNS_onErrorCallback):void {\n      expectFunction('\"onError\" callback',Callback)\n      this._onError.push(Callback)\n    }\n\n  /**** showError ****/\n\n    public showError (Visual:SNS_Visual, Error:SNS_Error):void {\n      this._onError.forEach(\n        (Callback:SNS_onErrorCallback) => Callback(this, Visual, Error)\n      )\n    }\n\n  /**** Application ****/\n\n    private _Application:Indexable = {}\n\n    public get Application ():Indexable  { return { ...this._Application } }\n    public set Application (newInterface:Indexable) {\n      if (! ObjectIsEmpty(this._Application)) throwError(\n        'AlreadySet: the \"Application\" interface has already been set'\n      )\n\n      expectSerializable('application interface',newInterface)\n      if (ObjectIsEmpty(newInterface)) throwError(\n        'InvalidArgument: the given application interface is empty'\n      )\n\n      this._Application = { ...newInterface }\n    }\n\n  /**** Serialization ****/\n\n    public get Serialization ():Serializable {\n      const Result:Serializable = {}\n        this._serializeConfigurationInto(Result)\n        this._serializeBoardsInto(Result)\n\n        delete Result.Id               // do not serialize the \"Id\" of a project\n      return Result\n    }\n    public set Serialization (_:Serializable) { throwReadOnlyError('Serialization') }\n\n  /**** deserializedFrom - nota bene: needs explicit script activation! ****/\n\n    public static deserializedFrom (\n      Name:SNS_Name, Serialization:Serializable\n    ):SNS_Project {\n      expectName('project name',Name)\n\n      const Result = new SNS_Project(Name)\n        delete Serialization.Name\n        Result._Name = Name\n\n        Result._deserializeConfigurationFrom(Serialization)\n        Result._deserializeBoardsFrom(Serialization)\n      return Result\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                                SNS_Board                                 --\n//------------------------------------------------------------------------------\n\n  const SNS_BoardPropertySet:Indexable = Object.create(null)\n    ;[\n      'Name','BackgroundColor','BackgroundTexture',\n      'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n      'ForegroundColor',\n      'memoized','Value','activeScript','pendingScript',\n      'SnapToGrid','GridWidth','GridHeight',\n    ].forEach((Property:string) => SNS_BoardPropertySet[Property] = true)\n\n  export class SNS_Board extends SNS_Folder {\n    /* protected */ constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      super(Project, Id)\n      registerFolder(Project,this)\n\n      Project._reportChange('createBoard', this)\n    }\n\n  /**** StickerList ****/\n\n    protected _StickerList:SNS_Sticker[] = []\n\n    public get StickerList ():SNS_Sticker[]  { return this._StickerList.slice() }\n    public set StickerList (_:SNS_Sticker[]) { throwReadOnlyError('StickerList') }\n\n  /**** StickerCount ****/\n\n    public get StickerCount ():number  { return this._StickerList.length }\n    public set StickerCount (_:number) { throwReadOnlyError('StickerCount') }\n\n  /**** IndexOfSticker ****/\n\n    public IndexOfSticker (Sticker:SNS_Sticker):number {\n      expectSticker('SNS sticker to search for',Sticker)\n      return this._StickerList.indexOf(Sticker)\n    }\n\n  /**** Sticker ****/\n\n    public Sticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):SNS_Sticker|undefined {\n      expectValue('sticker, name or index',StickerOrNameOrIndex)\n\n      switch (true) {\n        case ValueIsSticker(StickerOrNameOrIndex):\n          const Sticker = StickerOrNameOrIndex as SNS_Sticker\n          return (Sticker.Board === this ? Sticker : undefined)\n        case ValueIsInteger(StickerOrNameOrIndex):\n          const Index = StickerOrNameOrIndex as number\n          return this._StickerList[Index]\n        case ValueIsName(StickerOrNameOrIndex):\n          return this.StickerNamed(StickerOrNameOrIndex as SNS_Name)\n      }\n\n      throwError(\n        'InvalidArgument: no valid sticker, sticker name or sticker index given'\n      )\n    }\n\n  /**** existingSticker ****/\n\n    public existingSticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):SNS_Sticker {\n      let Sticker = this.Sticker(StickerOrNameOrIndex)\n        if (Sticker == null) throwError(\n          'StickerNotFound: the desired sticker could not be found'\n        )\n      return Sticker\n    }\n\n  /**** StickerNamed ****/\n\n    public StickerNamed (Name:SNS_Name):SNS_Sticker|undefined {\n      expectName('SNS sticker name',Name)\n      Name = Name.trim().toLowerCase()\n\n      let Result:SNS_Sticker|undefined = undefined\n        this._StickerList.forEach((Sticker:SNS_Sticker) => {\n          if (\n            (Result == null) &&\n            (Sticker.Name != null) && (Sticker.Name.toLowerCase() === Name)\n          ) {\n            Result = Sticker\n          }\n        })\n      return Result\n    }\n\n  /**** StickerAt ****/\n\n    public StickerAt (Index:number):SNS_Sticker|undefined {\n      expectInteger('SNS sticker index',Index)\n      if (Index < 0) { Index += this._StickerList.length }\n      return this._StickerList[Index]\n    }\n\n  /**** hasSticker ****/\n\n    public hasSticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):boolean {\n      return (this.Sticker(StickerOrNameOrIndex) != null)\n    }\n\n  /**** newStickerAt ****/\n\n    public newStickerAt (Index?:number, Id?:SNS_Id):SNS_Sticker {\n      return (\n        Id == null\n        ? this.StickerDeserializedAt({},Index)\n        : this.StickerDeserializedAt({ Id },Index)\n      )\n    }\n\n  /**** StickerDeserializedAt - nota bene: needs explicit script activation! ****/\n\n    public StickerDeserializedAt (Serialization:Serializable, Index?:number):SNS_Sticker {\n      expectSerializable('sticker serialization',Serialization)\n      allowInteger          ('SNS sticker index',Index)\n\n      if (Index == null) {\n        Index = this._StickerList.length\n      } else {\n        if (Index < 0) { Index += this._StickerList.length }\n        Index = Math.max(0,Math.min(Index,this._StickerList.length))\n      }\n\n      const Id = allowedId('sticker id',Serialization.Id)\n\n      let newSticker = new SNS_Sticker(this.Project, Id)     // registers itself\n        this._attachStickerAt(newSticker,Index)\n\n// @ts-ignore TS2445 \"newSticker\" *IS* an SNS_Visual\n        newSticker._deserializeConfigurationFrom(Serialization)\n\n        this.rerender()\n      return newSticker\n    }\n\n  /**** DuplicateOfStickerAt ****/\n\n    public DuplicateOfStickerAt (Index:number):SNS_Sticker {\n      expectInteger('SNS sticker index',Index)\n      const Sticker = this.existingSticker(Index)                         // DRY\n      const Serialization = Sticker.Serialization\n        removeIdsFrom(Serialization)\n      return this.StickerDeserializedAt(Serialization,Index+1)\n    }\n\n  /**** mayShiftStickerUp/Down ****/\n\n    public mayShiftStickerUp (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):boolean {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      return (this._StickerList.indexOf(Sticker) > 0)\n    }\n\n    public mayShiftStickerDown (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):boolean {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n\n      const StickerList  = this._StickerList\n      const StickerIndex = StickerList.indexOf(Sticker)\n      return (StickerIndex >= 0) && (StickerIndex < StickerList.length-1)\n    }\n\n  /**** shiftStickerToTop ****/\n\n    public shiftStickerToTop (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerUp(Sticker)) {                   // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,0)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerUp ****/\n\n    public shiftStickerUp (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerUp(Sticker)) {                   // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,oldIndex-1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerDown ****/\n\n    public shiftStickerDown (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerDown(Sticker)) {                 // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,oldIndex+1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerToBottom ****/\n\n    public shiftStickerToBottom (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerDown(Sticker)) {                 // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,this._StickerList.length)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerTo ****/\n\n    public shiftStickerTo (\n      StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number, newIndex:number\n    ):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n\n      expectInteger('SNS sticker index',newIndex)\n      if (newIndex < 0) { newIndex += this._StickerList.length }\n      newIndex = Math.max(0,Math.min(newIndex,this._StickerList.length-1))\n\n      const oldIndex = this._StickerList.indexOf(Sticker)\n      if (oldIndex === newIndex) { return }\n\n      this._detachStickerAt(oldIndex)\n      this._attachStickerAt(Sticker,newIndex)\n\n      this.rerender()\n    }\n\n  /**** shiftStickersByIndex ****/\n\n    public shiftStickersByIndex (\n      oldIndex:number, newIndex:number, Count:number\n    ):void {\n      const StickerCount = this._StickerList.length\n\n      expectIntegerInRange('old index',oldIndex,0,StickerCount)\n      expectIntegerInRange('new index',newIndex,0,StickerCount)\n\n      const StickersToShift = this._StickerList.slice(oldIndex,oldIndex+Count)\n      StickersToShift.forEach((_:any) => this._detachStickerAt(oldIndex))\n\n      if (newIndex > oldIndex) { newIndex -= Count }\n      StickersToShift.forEach(\n        (Sticker:SNS_Sticker,i:number) => this._attachStickerAt(Sticker,newIndex+i)\n      )\n\n      this.rerender()\n    }\n\n  /**** destroySticker ****/\n\n    public destroySticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.Sticker(StickerOrNameOrIndex)\n      if (Sticker == null) {\n        if (ValueIsSticker(StickerOrNameOrIndex)) throwError(\n          'NoSuchSticker: the given sticker could not be found'\n        )\n        return\n      }\n\n      unregisterAllReactiveFunctionsFrom(Sticker as SNS_Sticker)\n\n      const oldIndex = this._StickerList.indexOf(Sticker as SNS_Sticker)\n      this._detachStickerAt(oldIndex)\n\n      unregisterSticker(Sticker)\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n      Sticker._Project = undefined     // detaches this sticker from the project\n\n      this._reportChange('destroySticker',Sticker)\n      this.rerender()\n    }\n\n  /**** clear ****/\n\n    public clear ():void {\n      super.clear()                                  // deletes all inner boards\n\n      for (let i = 0, l = this._StickerList.length; i < l; i++) {\n        this.destroySticker(this._StickerList[0])\n      }\n    }\n\n  /**** recursivelyActivateAllScripts ****/\n\n    public recursivelyActivateAllScripts ():void {\n      this.activateScript();\n\n      this._BoardList.forEach(\n        (Board:SNS_Board) => Board.recursivelyActivateAllScripts()\n      )\n\n      this._StickerList.forEach(\n        (Sticker:SNS_Sticker) => Sticker.activateScript()\n      )\n    }\n\n  /**** Rendering ****/\n\n    public Rendering (PropSet:Indexable):any {\n      if (this.hasError) {\n        return ErrorRenderer.call(this)\n      }\n\n      let Renderer = this._Renderer\n      if (Renderer == null) { return '' }\n\n      try {\n        return Renderer.call(this,PropSet)\n      } catch (Signal:any) {\n        this.Error = {\n          Type:'Rendering Failure',\n          Message:''+Signal, Cause:Signal\n        }\n        return ErrorRenderer.call(this)\n      }\n    }\n\n  /**** rerender ****/\n\n    public rerender ():void {\n      this.Project.rerender(this)\n    }\n\n  /**** onClick ****/\n\n    protected _onClick:Function|undefined\n\n    public onClick (newHandler:Function):void {\n      expectFunction('\"click\" event handler',newHandler)\n      this._onClick = newHandler\n    }\n\n  /**** onDrop ****/\n\n    protected _onDrop:Function|undefined\n\n    public onDrop (newHandler:Function):void {\n      expectFunction('\"drop\" event handler',newHandler)\n      this._onDrop = newHandler\n    }\n\n  /**** DialogList ****/\n\n    private _DialogList:SNS_Dialog[] = []\n\n    public get DialogList ():SNS_Dialog[] {\n      return this._DialogList.map((Dialog:SNS_Dialog) => ({ ...Dialog }))\n    }\n    public set DialogList (_:SNS_Dialog[]) { throwReadOnlyError('_DialogList') }\n\n  /**** IndexOfDialog ****/\n\n    public IndexOfDialog (DialogName:SNS_Name):number {\n      expectName('dialog name',DialogName)\n      DialogName = DialogName.trim().toLowerCase()\n        const DialogList = this._DialogList\n        for (let i = 0, l = DialogList.length; i < l; i++) {\n          const Dialog = DialogList[i]\n          if (Dialog.Name.trim().toLowerCase() === DialogName) { return i }\n        }\n      return -1\n    }\n\n  /**** openDialog ****/\n\n    public openDialog (OptionSet:Indexable):void {\n      let {\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Renderer, onClose\n      } = OptionSet\n\n      expectName                 ('dialog name',Name)\n      allowTextline             ('dialog title',Title)\n      allowBoolean       ('dialog resizability',isResizable)\n      allowLocation      ('dialog x coordinate',x)\n      allowLocation      ('dialog y coordinate',y)\n      allowDimension            ('dialog width',Width)\n      allowDimension           ('dialog height',Height)\n      allowDimension    ('minimal dialog width',minWidth)\n      allowDimension    ('maximal dialog width',maxWidth)\n      allowDimension   ('minimal dialog height',minHeight)\n      allowDimension   ('maximal dialog height',maxHeight)\n      expectFunction ('dialog content renderer',Renderer)\n      allowFunction('dialog \"onClose\" callback',onClose)\n\n      const DialogIndex = this.IndexOfDialog(Name)\n      if (DialogIndex < 0) {\n        if (Title       == null) { Title = Name }\n        if (isResizable == null) { isResizable = false }\n        if (Width       == null) { Width  = 320 }\n        if (Height      == null) { Height = 240 }\n        if (x           == null) { x = -Number.MAX_SAFE_INTEGER }   // to center\n        if (y           == null) { y = -Number.MAX_SAFE_INTEGER }        // dto.\n        if (minWidth    == null) { minWidth  = 40 }\n        if (maxWidth    != null) { maxWidth  = Math.max(minWidth,maxWidth) }\n        if (minHeight   == null) { minHeight = 30 }\n        if (maxHeight   != null) { maxHeight = Math.max(minHeight,maxHeight) }\n\n        this._DialogList.push({\n          Id:newId(), Name, Title, isResizable, x,y, Width,Height,\n          minWidth,maxWidth, minHeight,maxHeight,\n          Visibility:true, Renderer, onClose\n        })\n      } else {\n        const Dialog:Indexable = this._DialogList[DialogIndex]\n          ;(`\n            Name Title isResizable x y Width Height\n            minWidth maxWidth minHeight maxHeight Renderer onClose\n          `).trim().split(/\\s+/).forEach((Property:string) => {\n            if (OptionSet[Property] != null) { Dialog[Property] = OptionSet[Property] }\n          })\n        Dialog.Visibility = true\n\n        this.bringDialogToFront(Name)\n      }\n      this.rerender()\n    }\n\n  /**** DialogIsOpen ****/\n\n    public DialogIsOpen (DialogName:SNS_Name):boolean {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      return (DialogIndex >= 0) && (this._DialogList[DialogIndex].Visibility == true)\n    }\n\n  /**** openTextViewDialog ****/\n\n    public openTextViewDialog (OptionSet:Indexable):void {\n      let {\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Content,isFormatted, onClose\n      } = OptionSet\n\n      Content     = acceptableText(Content,'')\n      isFormatted = acceptableBoolean(isFormatted,false)\n\n      function Renderer () {\n        return html`<textarea class=\"SNS Content\" style=\"\n          resize:none; padding:4px;\n          ${isFormatted\n            ? 'white-space:pre;      overflow-wrap:normal'\n            : 'white-space:pre-wrap; overflow-wrap:break-word'\n          }\n        \" value=${Content}/>`\n      }\n\n      this.openDialog({\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Renderer, onClose\n      })\n    }\n\n  /**** openHTMLViewDialog ****/\n\n    public openHTMLViewDialog (OptionSet:Indexable):void {\n      let {\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Content, onClose\n      } = OptionSet\n\n      Content = acceptableText(Content,'')\n\n      function Renderer () {\n        return html`<div class=\"SNS Content\" style=\"padding:4px\"\n          dangerouslySetInnerHTML=${{__html:acceptableText(Content,'')}}\n        />`\n      }\n\n      this.openDialog({\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Renderer, onClose\n      })\n    }\n\n  /**** openImageViewDialog ****/\n\n    public openImageViewDialog (OptionSet:Indexable):void {\n      let {\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Content, onClose\n      } = OptionSet\n\n      Content = acceptableURL(Content,'')\n\n      function Renderer () {\n        return html`<img class=\"SNS Content\" style=\"\n          padding:4px;\n          object-fit:contain; object-position:center;\n        \" src=${Content}/>`\n      }\n\n      this.openDialog({\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Renderer, onClose\n      })\n    }\n\n  /**** openSVGViewDialog ****/\n\n    public openSVGViewDialog (OptionSet:Indexable):void {\n      let {\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Content, onClose\n      } = OptionSet\n\n      Content = acceptableText(Content,'')\n\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(Content)\n\n      function Renderer () {\n        return html`<img class=\"SNS Content\" style=\"\n          padding:4px; object-fit:contain; object-position:center;\n        \" src=${DataURL}/>`\n      }\n\n      this.openDialog({\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Renderer, onClose\n      })\n    }\n\n  /**** openWebViewDialog ****/\n\n    public openWebViewDialog (OptionSet:Indexable):void {\n      let {\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Content, onClose\n      } = OptionSet\n\n      Content = acceptableURL(Content,'')\n\n      function Renderer () {\n        return html`<iframe class=\"SNS Content\" style=\"padding:4px\"\n          src=${Content}\n        />`\n      }\n\n      this.openDialog({\n        Name, Title, isResizable, x, y, Width, Height,\n        minWidth, maxWidth, minHeight, maxHeight,\n        Renderer, onClose\n      })\n    }\n\n  /**** titleDialogAs ****/\n\n    public titleDialogAs (DialogName:SNS_Name, newTitle:SNS_Textline):void {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      if (DialogIndex < 0) throwError(\n        'NoSuchDialog: no open dialog named ' + quoted(DialogName) + ' found'\n      )\n      const Dialog = this._DialogList[DialogIndex] as SNS_Dialog\n\n      allowTextline('dialog title',newTitle)\n      if (newTitle == null) { newTitle = Dialog.Title }\n\n      if (Dialog.Title !== newTitle) {\n        Dialog.Title = newTitle\n        this.rerender()\n      }\n    }\n\n  /**** positionDialogAt ****/\n\n    public positionDialogAt (\n      DialogName:SNS_Name, newX:SNS_Location,newY:SNS_Location\n    ):void {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      if (DialogIndex < 0) throwError(\n        'NoSuchDialog: no open dialog named ' + quoted(DialogName) + ' found'\n      )\n      const Dialog = this._DialogList[DialogIndex] as SNS_Dialog\n\n      allowLocation('dialog x coordinate',newX)\n      allowLocation('dialog y coordinate',newY)\n\n      if (newX == null) { newX = Dialog.x }\n      if (newY == null) { newY = Dialog.y }\n\n      if ((Dialog.x !== newX) || (Dialog.y !== newY)) {\n        Dialog.x = newX; Dialog.y = newY\n        this.rerender()\n      }\n    }\n\n  /**** sizeDialogTo ****/\n\n    public sizeDialogTo (\n      DialogName:SNS_Name, newWidth:SNS_Dimension,newHeight:SNS_Dimension\n    ):void {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      if (DialogIndex < 0) throwError(\n        'NoSuchDialog: no open dialog named ' + quoted(DialogName) + ' found'\n      )\n      const Dialog = this._DialogList[DialogIndex] as SNS_Dialog\n\n      allowDimension ('dialog width',newWidth)\n      allowDimension('dialog height',newHeight)\n\n      if (newWidth  == null) { newWidth  = Dialog.Width }\n      if (newHeight == null) { newHeight = Dialog.Height }\n\n      if ((Dialog.Width !== newWidth) || (Dialog.Height !== newHeight)) {\n        Dialog.Width = newWidth; Dialog.Height = newHeight\n        this.rerender()\n      }\n    }\n\n  /**** DialogIsFrontmost ****/\n\n    public DialogIsFrontmost (DialogName:SNS_Name):boolean {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      return (DialogIndex === this._DialogList.length-1)\n    }\n\n  /**** bringDialogToFront ****/\n\n    public bringDialogToFront (DialogName:SNS_Name):void {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      if (DialogIndex < 0) throwError(\n        'NoSuchDialog: no open dialog named ' + quoted(DialogName) + ' found'\n      )\n\n      if (DialogIndex < this._DialogList.length-1) {\n        const DialogList = this._DialogList               // reference, not copy\n\n        const Dialog = DialogList[DialogIndex]\n        DialogList.splice(DialogIndex,1)\n        DialogList.push(Dialog)\n\n        this.rerender()\n      }\n    }\n\n  /**** closeDialog ****/\n\n    public closeDialog (DialogName:SNS_Name):void {\n      const DialogIndex = this.IndexOfDialog(DialogName)\n      if (DialogIndex < 0) { return }\n\n      this._DialogList[DialogIndex].Visibility = false\n      this.rerender()\n    }\n\n  /**** closeAllDialogs ****/\n\n    public closeAllDialogs ():void {\n      this._DialogList.forEach((Dialog:SNS_Dialog) => Dialog.Visibility = false)\n      this.rerender()\n    }\n\n  /**** _attachStickerAt ****/\n\n    /* protected */ _attachStickerAt (Sticker:SNS_Sticker, Index:number):void {\n// @ts-ignore TS2446 this is a hack, I know\n      Sticker._Folder = this\n      this._StickerList.splice(Index,0, Sticker)\n      this._reportChange('attachSticker', Sticker, this, Index)\n    }\n\n  /**** _detachStickerAt ****/\n\n    /* protected */ _detachStickerAt (Index:number):void {\n      const Sticker = this._StickerList.splice(Index,1)[0]\n// @ts-ignore TS2446 this is a hack, I know\n      Sticker._Folder = undefined\n      this._reportChange('detachSticker', Sticker, this, Index)\n    }\n\n  /**** Serialization ****/\n\n    public get Serialization ():Serializable {\n      const Result:Serializable = {}\n        this._serializeConfigurationInto(Result)\n        this._serializeBoardsInto(Result)\n        this._serializeStickersInto(Result)\n      return Result\n    }\n    public set Serialization (_:Serializable) { throwReadOnlyError('Serialization') }\n\n  /**** _serializeStickersInto ****/\n\n    protected _serializeStickersInto (Serialization:Serializable):void {\n      const StickerList = this._StickerList.slice()\n      if (StickerList.length > 0) {\n        Serialization.StickerList = StickerList.map(\n          (Sticker:SNS_Sticker) => Sticker.Serialization\n        )\n      }\n    }\n\n  /**** _deserializeStickersFrom ****/\n\n    protected _deserializeStickersFrom (Serialization:Serializable):void {\n      const StickerList = this._StickerList\n      if (StickerList.length > 0) { this.clear() }\n\n      if (\n        ValueIsListSatisfying(Serialization.StickerList,ValueIsPlainObject) &&\n        ((Serialization.StickerList as Serializable[]).length > 0)\n      ) {\n        (Serialization.StickerList as Serializable[]).forEach(\n          (StickerSerialization:Serializable, Index:number) => {\n            this.StickerDeserializedAt(StickerSerialization,Index)\n          }\n        )\n      }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                               CNS_Sticker                                --\n//------------------------------------------------------------------------------\n\n  const SNS_StickerPropertySet:Indexable = Object.create(null)\n    ;[\n      'Name',\n      'Lock','Selectability','Visibility','Enabling',\n      'minWidth','maxWidth','minHeight','maxHeight',\n      'BackgroundColor','BackgroundTexture',\n      'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n      'ForegroundColor',\n      'memoized','Value','activeScript','pendingScript',\n    ].forEach((Property:string) => SNS_StickerPropertySet[Property] = true)\n\n  export class SNS_Sticker extends SNS_Visual {\n    /* protected */ constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      super(Project, Id)\n      registerSticker(Project,this)\n\n      Project._reportChange('createSticker', this)\n    }\n\n  /**** Board ****/\n\n    public get Board ():SNS_Board  { return this._Folder as SNS_Board }\n    public set Board (_:SNS_Board) { throwReadOnlyError('Board') }\n\n  /**** BackgroundColor ****/\n\n    public get BackgroundColor ():SNS_Color|undefined {\n      return this._BackgroundColor\n    }\n\n    public set BackgroundColor (newColor:SNS_Color|undefined) {\n      allowColor('sticker background color',newColor)\n      if (this._BackgroundColor !== newColor) {\n        this._BackgroundColor = newColor\n\n        this._reportChange('configure',this,'BackgroundColor',newColor)\n        this.rerender()\n      }\n    }\n\n  /**** BackgroundTexture ****/\n\n    public get BackgroundTexture ():SNS_URL|undefined {\n      return this._BackgroundTexture\n    }\n\n    public set BackgroundTexture (newTexture:SNS_URL|undefined) {\n      allowURL('sticker background texture',newTexture)\n      if (this._BackgroundTexture !== newTexture) {\n        this._BackgroundTexture = newTexture\n\n        this._reportChange('configure',this,'BackgroundTexture',newTexture)\n        this.rerender()\n      }\n    }\n\n  /**** Index ****/\n\n    public get Index ():number  { return (this._Folder as SNS_Board).IndexOfSticker(this) }\n    public set Index (_:number) { throwReadOnlyError('Index') }\n\n  /**** mayBeShiftedUp ****/\n\n    public get mayBeShiftedUp ():boolean  { return (this._Folder as SNS_Board).mayShiftStickerUp(this) }\n    public set mayBeShiftedUp (_:boolean) { throwReadOnlyError('mayBeShiftedUp') }\n\n  /**** mayBeShiftedDown ****/\n\n    public get mayBeShiftedDown ():boolean  { return (this._Folder as SNS_Board).mayShiftStickerDown(this) }\n    public set mayBeShiftedDown (_:boolean) { throwReadOnlyError('mayBeShiftedDown') }\n\n  /**** minWidth ****/\n\n    protected _minWidth:SNS_Dimension|undefined = undefined\n\n    public get minWidth ():SNS_Dimension {\n      return (this._minWidth == null ? defaultMinWidth : this._minWidth)\n    }\n    public set minWidth (newMinWidth:SNS_Dimension|undefined) {\n      allowDimension('minimal sticker width',newMinWidth)\n      if (this._minWidth !== newMinWidth) {\n        this._minWidth = newMinWidth\n        this._reportChange('configure',this,'minWidth',newMinWidth)\n\n        if (\n          (this._minWidth != null) && (this._maxWidth != null) &&\n          (this._maxWidth < this._minWidth)\n        ) {\n          this._maxWidth = newMinWidth\n          this._reportChange('configure',this,'maxWidth',this._minWidth)\n        }\n\n        if ((this._minWidth != null) && (this._Geometry.Width < this._minWidth)) {\n          this.Width = this._minWidth\n        }\n        this.rerender()\n      }\n    }\n\n  /**** maxWidth ****/\n\n    protected _maxWidth:SNS_Dimension|undefined = defaultMaxWidth\n\n    public get maxWidth ():SNS_Dimension|undefined  { return this._maxWidth }\n    public set maxWidth (newMaxWidth:SNS_Dimension|undefined) {\n      allowDimension('maximal sticker width',newMaxWidth)\n      if ((newMaxWidth != null) && (this._minWidth != null)) {\n        newMaxWidth = Math.max(this._minWidth,newMaxWidth)\n      }\n\n      if (this._maxWidth !== newMaxWidth) {\n        this._maxWidth = newMaxWidth\n        this._reportChange('configure',this,'maxWidth',this._maxWidth)\n\n        if ((this._maxWidth != null) && (this._Geometry.Width > this._maxWidth)) {\n          this.Width = this._maxWidth\n        }\n        this.rerender()\n      }\n    }\n\n  /**** minHeight ****/\n\n    protected _minHeight:SNS_Dimension|undefined = undefined\n\n    public get minHeight ():SNS_Dimension  {\n      return (this._minHeight == null ? defaultMinHeight : this._minHeight)\n    }\n    public set minHeight (newMinHeight:SNS_Dimension|undefined) {\n      allowDimension('minimal sticker height',newMinHeight)\n      if (this._minHeight !== newMinHeight) {\n        this._minHeight = newMinHeight\n        this._reportChange('configure',this,'minHeight',newMinHeight)\n\n        if (\n          (this._minHeight != null) && (this._maxHeight != null) &&\n          (this._maxHeight < this._minHeight)\n        ) {\n          this._maxHeight = newMinHeight\n          this._reportChange('configure',this,'maxHeight',this._minHeight)\n        }\n\n        if ((this._minHeight != null) && (this._Geometry.Height < this._minHeight)) {\n          this.Height = this._minHeight\n        }\n        this.rerender()\n      }\n    }\n\n  /**** maxHeight ****/\n\n    protected _maxHeight:SNS_Dimension|undefined = defaultMaxHeight\n\n    public get maxHeight ():SNS_Dimension|undefined  { return this._maxHeight }\n    public set maxHeight (newMaxHeight:SNS_Dimension|undefined) {\n      allowDimension('maximal sticker height',newMaxHeight)\n      if ((newMaxHeight != null) && (this._minHeight != null)) {\n        newMaxHeight = Math.max(this._minHeight,newMaxHeight)\n      }\n\n      if (this._maxHeight !== newMaxHeight) {\n        this._maxHeight = newMaxHeight\n        this._reportChange('configure',this,'maxHeight',this._maxHeight)\n\n        if ((this._maxHeight != null) && (this._Geometry.Height > this._maxHeight)) {\n          this.Height = this._maxHeight\n        }\n        this.rerender()\n      }\n    }\n\n  /**** x ****/\n\n    public get x ():SNS_Location { return this._Geometry.x }\n    public set x (newX:SNS_Location) {\n      expectLocation('sticker x coordinate',newX)\n      this.Geometry = { ...this.Geometry, x:newX }\n    }\n\n  /**** y ****/\n\n    public get y ():SNS_Location { return this._Geometry.y }\n    public set y (newY:SNS_Location) {\n      expectLocation('sticker y coordinate',newY)\n      this.Geometry = { ...this.Geometry, y:newY }\n    }\n\n  /**** Width ****/\n\n    public get Width ():SNS_Dimension { return this._Geometry.Width }\n    public set Width (newWidth:SNS_Dimension) {\n      expectDimension('sticker width',newWidth)\n      this.Geometry = { ...this.Geometry, Width:newWidth }\n    }\n\n  /**** Height ****/\n\n    public get Height ():SNS_Dimension { return this._Geometry.Height }\n    public set Height (newHeight:SNS_Dimension) {\n      expectDimension('sticker height',newHeight)\n      this.Geometry = { ...this.Geometry, Height:newHeight }\n    }\n\n  /**** Position ****/\n\n    public get Position ():SNS_Position {\n      return { x:this._Geometry.x, y:this._Geometry.y }\n    }\n\n    public set Position (newPosition:SNS_Position) {\n      expectPosition('visual position',newPosition)\n      this.Geometry = { ...this.Geometry, x:newPosition.x, y:newPosition.y }\n    }\n\n  /**** Size ****/\n\n    public get Size ():SNS_Size {\n      return { Width:this._Geometry.Width, Height:this._Geometry.Height }\n    }\n\n    public set Size (newSize:SNS_Size) {\n      expectSize('visual size',newSize)\n      this.Geometry = { ...this.Geometry, Width:newSize.Width, Height:newSize.Height }\n    }\n\n  /**** Geometry ****/\n\n    protected _Geometry:SNS_Geometry = { ...defaultStickerGeometry }\n\n    public get Geometry ():SNS_Geometry {\n      let { x,y, Width,Height } = this._Geometry\n        if (this._minWidth != null) { Width = Math.max(this._minWidth,Width) }\n        if (this._maxWidth != null) { Width = Math.min(Width,this._maxWidth) }\n\n        if (this._minHeight != null) { Height = Math.max(this._minHeight,Height) }\n        if (this._maxHeight != null) { Height = Math.min(Height,this._maxHeight) }\n      return { x,y, Width,Height }\n    }\n\n    public set Geometry (newGeometry:SNS_Geometry) {\n      expectGeometry('visual geometry',newGeometry)\n\n      let { x,y, Width,Height } = this._Geometry\n      if (\n        (x !== newGeometry.x) || (Width  !== newGeometry.Width) ||\n        (y !== newGeometry.y) || (Height !== newGeometry.Height)\n      ) {\n        this._Geometry = { ...newGeometry }\n\n        this._reportChange('configure',this,'Geometry',{ ...newGeometry })\n        this.rerender()\n      }\n    }\n\n  /**** Lock ****/\n\n    protected _Lock:boolean = false\n\n    public get Lock ():boolean { return this._Lock }\n    public set Lock (newLock:boolean) {\n      expectBoolean('sticker lock',newLock)\n      if (this._Lock !== newLock) {\n        this._Lock = newLock\n\n        this._reportChange('configure',this,'Lock',newLock)\n        this.rerender()\n      }\n    }\n\n  /**** lock/unlock ****/\n\n    public lock ():void   { this.Lock = true }\n    public unlock ():void { this.Lock = false }\n\n  /**** isLocked ****/\n\n    public get isLocked ():boolean        { return this._Lock }\n    public set isLocked (newLock:boolean) { this.Lock = newLock }\n\n  /**** Lock ****/\n\n    protected _Selectability:boolean = false\n\n    public get Selectability ():boolean { return this._Selectability }\n    public set Selectability (newSelectability:boolean) {\n      expectBoolean('sticker selectability',newSelectability)\n      if (this._Selectability !== newSelectability) {\n        this._Selectability = newSelectability\n\n        this._reportChange('configure',this,'Selectability',newSelectability)\n        this.rerender()\n      }\n    }\n\n  /**** isSelectable ****/\n\n    public get isSelectable ():boolean                 { return this._Selectability }\n    public set isSelectable (newSelectability:boolean) { this.Selectability = newSelectability }\n\n  /**** Visibility ****/\n\n    protected _Visibility:boolean = true\n\n    public get Visibility ():boolean { return this._Visibility }\n    public set Visibility (newVisibility:boolean) {\n      expectBoolean('sticker visibility',newVisibility)\n      if (this._Visibility !== newVisibility) {\n        this._Visibility = newVisibility\n\n        this._reportChange('configure',this,'Visibility',newVisibility)\n        this.rerender()\n      }\n    }\n\n  /**** show/hide ****/\n\n    public show ():void { this.Visibility = true }\n    public hide ():void { this.Visibility = false }\n\n  /**** isVisible ****/\n\n    public get isVisible ():boolean              { return this._Visibility }\n    public set isVisible (newVisibility:boolean) { this.Visibility = newVisibility }\n\n  /**** Enabling ****/\n\n    protected _Enabling:boolean = true\n\n    public get Enabling ():boolean { return this._Enabling }\n    public set Enabling (newEnabling:boolean) {\n      expectBoolean('sticker enabling',newEnabling)\n      if (this._Enabling !== newEnabling) {\n        this._Enabling = newEnabling\n\n        this._reportChange('configure',this,'Enabling',newEnabling)\n        this.rerender()\n      }\n    }\n\n  /**** enable/disable ****/\n\n    public enable ():void  { this.Enabling = true }\n    public disable ():void { this.Enabling = false }\n\n  /**** isEnabled ****/\n\n    public get isEnabled ():boolean            { return this._Enabling }\n    public set isEnabled (newEnabling:boolean) { this.Enabling = newEnabling }\n\n  /**** onClick ****/\n\n    protected _onClick:Function|undefined\n\n    public onClick (newHandler:Function):void {\n      expectFunction('\"click\" event handler',newHandler)\n      this._onClick = newHandler\n    }\n\n  /**** onInput ****/\n\n    protected _onInput:Function|undefined\n\n    public onInput (newHandler:Function):void {\n      expectFunction('\"input\" event handler',newHandler)\n      this._onInput = newHandler\n    }\n\n  /**** onDrop ****/\n\n    protected _onDrop:Function|undefined\n\n    public onDrop (newHandler:Function):void {\n      expectFunction('\"drop\" event handler',newHandler)\n      this._onDrop = newHandler\n    }\n\n  /**** Rendering ****/\n\n    public Rendering (PropSet:Indexable):any {\n      if (this.hasError) {\n        return ErrorRenderer.call(this)\n      }\n\n      let Renderer = this._Renderer || DefaultRenderer\n\n      try {\n        return Renderer.call(this,PropSet)\n      } catch (Signal:any) {\n        this.Error = {\n          Type:'Rendering Failure',\n          Message:''+Signal, Cause:Signal\n        }\n        return ErrorRenderer.call(this)\n      }\n    }\n\n  /**** rerender ****/\n\n    public rerender ():void {\n      this._Project.rerender((this._Folder as SNS_Board), this)\n    }\n\n  /**** Serialization ****/\n\n    public get Serialization ():Serializable {\n      const Result:Serializable = {}\n        this._serializeConfigurationInto(Result)\n      return Result\n    }\n    public set Serialization (_:Serializable) { throwReadOnlyError('Serialization') }\n\n  /**** _serializeConfigurationInto ****/\n\n    protected _serializeConfigurationInto (Serialization:Serializable):void {\n      super._serializeConfigurationInto(Serialization)\n\n      Serialization.Geometry = { ...this._Geometry }\n\n      if (this._minWidth  != null) { Serialization.minWidth  = this._minWidth }\n      if (this._maxWidth  != null) { Serialization.maxWidth  = this._maxWidth }\n      if (this._minHeight != null) { Serialization.minHeight = this._minHeight }\n      if (this._maxHeight != null) { Serialization.maxHeight = this._maxHeight }\n\n      if (this.isSelectable) { Serialization.Selectability = true }\n      if (this.isLocked)     { Serialization.Lock          = true }\n      if (! this.isVisible)  { Serialization.Visibility    = false }\n      if (! this.isEnabled)  { Serialization.Enabling      = false }\n    }\n\n  /**** _deserializeConfigurationFrom ****/\n\n    protected _deserializeConfigurationFrom (Serialization:Serializable):void {\n      super._deserializeConfigurationFrom(Serialization)\n\n      let { x,y, Width,Height } = Serialization.Geometry as SNS_Geometry || defaultStickerGeometry\n        if (! ValueIsLocation(x)) { x = defaultStickerGeometry.x }\n        if (! ValueIsLocation(y)) { y = defaultStickerGeometry.y }\n        if (! ValueIsDimension(Width))  { Width  = defaultStickerGeometry.Width  }\n        if (! ValueIsDimension(Height)) { Height = defaultStickerGeometry.Height }\n// @ts-ignore TS2322 \"x\",\"y\",\"Width\" and \"Height\" will never be \"null\"\n      this.Geometry = { x,y, Width,Height }\n\n      if (Serialization.Selectability === true)  { this.Selectability = true }\n      if (Serialization.Lock          === true)  { this.Lock          = true }\n      if (Serialization.Visibility    === false) { this.Visibility    = false }\n      if (Serialization.Enabling      === false) { this.Enabling      = false }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                               SNS_Adapter                                --\n//------------------------------------------------------------------------------\n\n  export const SNS_ConnectionStates = ['not-ready','disconnected','connecting','connected']\n  export type  SNS_ConnectionState  = typeof SNS_ConnectionStates[number]\n\n  export abstract class SNS_Adapter {\n    public abstract ConnectionState:SNS_ConnectionState\n    public abstract isConnected:boolean\n\n    public abstract connect ():void\n    public abstract disconnect ():void\n  }\n\n// @ts-ignore TS2339 allow global variable \"SNS\"\n  const SNS:Indexable = window.SNS = {\n    SNS_FontStyles, SNS_ErrorTypes,\n    throwError, throwReadOnlyError,\n    ValueIsVisual, allowVisual, allowedVisual, expectVisual, expectedVisual,\n    ValueIsFolder, allowFolder, allowedFolder, expectFolder, expectedFolder,\n    ValueIsProject, allowProject, allowedProject, expectProject, expectedProject,\n    ValueIsBoard, allowBoard, allowedBoard, expectBoard, expectedBoard,\n    ValueIsSticker, allowSticker, allowedSticker, expectSticker, expectedSticker,\n    ValueIsId, allowId, allowedId, expectId, expectedId,\n    ValueIsIdentifier, allowIdentifier, allowedIdentifier, expectIdentifier, expectedIdentifier,\n    ValueIsName, allowName, allowedName, expectName, expectedName,\n    ValueIsLocation, allowLocation, allowedLocation, expectLocation, expectedLocation,\n    ValueIsDimension, allowDimension, allowedDimension, expectDimension, expectedDimension,\n    ValueIsPosition, allowPosition, allowedPosition, expectPosition, expectedPosition,\n    ValueIsSize, allowSize, allowedSize, expectSize, expectedSize,\n    ValueIsGeometry, allowGeometry, allowedGeometry, expectGeometry, expectedGeometry,\n    ValueIsError, allowError, allowedError, expectError, expectedError,\n    ValueIsSerializable, allowSerializable, allowedSerializable, expectSerializable, expectedSerializable,\n    acceptableBoolean, acceptableOptionalBoolean,\n    acceptableNumber, acceptableOptionalNumber,\n    acceptableNumberInRange, acceptableOptionalNumberInRange,\n    acceptableInteger, acceptableOptionalInteger,\n    acceptableIntegerInRange, acceptableOptionalIntegerInRange,\n    acceptableOrdinal, acceptableOptionalOrdinal,\n    acceptableString, acceptableOptionalString,\n    acceptableNonEmptyString, acceptableOptionalNonEmptyString,\n    acceptableStringMatching, acceptableOptionalStringMatching,\n    acceptableText, acceptableOptionalText,\n    acceptableTextline, acceptableOptionalTextline,\n    acceptableFunction, acceptableOptionalFunction,\n    acceptableList, acceptableOptionalList,\n    acceptableListSatisfying, acceptableOptionalListSatisfying,\n    acceptableColor, acceptableOptionalColor,\n    acceptableEMailAddress, acceptablePhoneNumber, acceptableURL,\n    newId,\n    CSSStyleOfVisual,\n    SNS_ConnectionStates\n  }\nconsole.log('SNS is globally available now')\n\n  document.dispatchEvent(\n// @ts-ignore TS2339 allow global variable \"SNS\"\n    new CustomEvent('SNS',{ detail:window.SNS })\n  )\n"],"names":["ValueIsPhoneNumber","ValueIsTextline","observe","hyperactiv","computed","dispose","BehaviorStyleElement","document","createElement","innerHTML","head","appendChild","SNS_FontStyles","SNS_ErrorTypes","throwError","Message","Match","exec","Error","namedError","name","throwReadOnlyError","Name","quoted","ValueIsVisual","Value","SNS_Visual","allowVisual","ValidatorForClassifier","acceptNil","allowedVisual","expectVisual","rejectNil","expectedVisual","ValueIsFolder","SNS_Folder","allowFolder","allowedFolder","expectFolder","expectedFolder","ValueIsProject","SNS_Project","allowProject","allowedProject","expectProject","expectedProject","ValueIsBoard","SNS_Board","allowBoard","allowedBoard","expectBoard","expectedBoard","ValueIsSticker","SNS_Sticker","allowSticker","allowedSticker","expectSticker","expectedSticker","ValueIsId","allowId","allowedId","expectId","expectedId","SNS_IdentifierPattern","ValueIsIdentifier","ValueIsStringMatching","allowIdentifier","allowedIdentifier","expectIdentifier","expectedIdentifier","ValueIsName","allowName","allowedName","expectName","expectedName","ValueIsLocation","ValueIsFiniteNumber","allowLocation","allowedLocation","expectLocation","expectedLocation","ValueIsDimension","allowDimension","allowedDimension","expectDimension","expectedDimension","ValueIsPosition","ValueIsObject","x","y","allowPosition","allowedPosition","expectPosition","expectedPosition","ValueIsSize","Width","Height","allowSize","allowedSize","expectSize","expectedSize","ValueIsGeometry","allowGeometry","allowedGeometry","expectGeometry","expectedGeometry","ValueIsError","ValueIsPlainObject","ValueIsOneOf","Type","ValueIsText","allowError","allowedError","expectError","expectedError","ValueIsSerializable","allowSerializable","allowedSerializable","expectSerializable","expectedSerializable","sanitizeBoardList","Project","Folder","Board","Index","allowOrdinal","BoardSet","Set","BoardList","i","length","BoardFromList","has","_detachBoardAt","add","sanitizeStickerList","Sticker","StickerSet","StickerList","StickerFromList","_detachStickerAt","defaultStickerGeometry","acceptableBoolean","Default","ValueIsBoolean","acceptableOptionalBoolean","undefined","acceptableNumber","ValueIsNumber","acceptableOptionalNumber","acceptableNumberInRange","minValue","maxValue","withMin","withMax","Infinity","ValueIsNumberInRange","acceptableOptionalNumberInRange","acceptableInteger","ValueIsInteger","acceptableOptionalInteger","acceptableIntegerInRange","ValueIsIntegerInRange","acceptableOptionalIntegerInRange","acceptableOrdinal","ValueIsOrdinal","acceptableOptionalOrdinal","acceptableString","ValueIsString","acceptableOptionalString","acceptableNonEmptyString","trim","acceptableOptionalNonEmptyString","acceptableStringMatching","Pattern","acceptableOptionalStringMatching","noCtrlCharsButCRLFTABPattern","acceptableText","acceptableOptionalText","acceptableTextline","replace","acceptableOptionalTextline","Result","acceptableFunction","ValueIsFunction","acceptableOptionalFunction","acceptableList","ValueIsList","acceptableOptionalList","acceptableListSatisfying","Matcher","ValueIsListSatisfying","acceptableOptionalListSatisfying","acceptableColor","ValueIsColor","acceptableOptionalColor","acceptableEMailAddress","ValueIsEMailAddress","acceptablePhoneNumber","acceptableURL","ValueIsURL","DefaultRenderer","html","_templateObject","_taggedTemplateLiteralLoose","CSSStyleOfVisual","this","ErrorRenderer","_this","call","_templateObject2","onClick","showError","newId","customAlphabet","nolookalikesSafe","FolderRegistryForProject","WeakMap","unregisterFolder","FolderRegistry","get","Id","FolderWithId","StickerRegistryForProject","unregisterSticker","StickerRegistry","removeIdsFrom","Serialization","forEach","reactiveFunctionsForVisual","registerReactiveFunctionIn","Visual","reactiveFunction","reactiveFunctions","set","push","unregisterAllReactiveFunctionsFrom","groupedBehaviorRegistry","Object","create","BehaviorRegistry","TemplateRegistry","registerBehavior","GroupLabel","BehaviorLabel","BehaviorName","Template","BehaviorFunction","BehaviorStyle","expectTextline","allowPlainObject","allowFunction","normalizedGroupName","toLowerCase","normalizedBehaviorName","normalizedTemplate","_extends","activeScript","BehaviorSetGroup","BehaviorSet","Label","Executable","indexOf","useBehavior","_this2","onRender","bind","onMount","onUnmount","SNS","JIL","Application","expectFunction","Geometry","me","my","reactively","_templateObject3","Selectability","minWidth","minHeight","Renderer","PropSet","builtinSelection","builtinDragging","_templateObject4","Event","key","stopPropagation","preventDefault","Editor","target","value","selectionStart","selectionEnd","slice","_templateObject5","_templateObject6","CSSStyle","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","__html","_templateObject12","DataURL","btoa","_templateObject13","_templateObject14","ForegroundColor","BackgroundColor","BorderRadius","Math","round","min","_templateObject15","Enabling","_onClick","Color","_templateObject16","_templateObject17","_templateObject18","consumingEvent","_templateObject19","LineHeight","checked","indeterminate","_templateObject20","_templateObject21","parseFloat","Minimum","lowerBound","Optimum","upperBound","Maximum","_templateObject22","_templateObject23","HashmarkPattern","HashmarkMatcher","onInput","ValueToShow","_onInput","onBlur","rerender","Stepping","Hashmarks","activeElement","View","HashmarkId","HashmarkList","_templateObject24","map","Item","_templateObject25","_templateObject26","Placeholder","readonly","minLength","maxLength","SpellChecking","Suggestions","SuggestionId","SuggestionList","_templateObject27","_templateObject28","_templateObject29","_templateObject30","_templateObject31","_templateObject32","_templateObject33","_templateObject34","_templateObject35","_templateObject36","_templateObject37","_templateObject38","_templateObject39","_templateObject40","_templateObject41","_templateObject42","TimeRegExp","TimeMatcher","_templateObject43","_templateObject44","_templateObject45","DateTimeRegExp","DateTimeMatcher","_templateObject46","_templateObject47","_templateObject48","DateRegExp","DateMatcher","_templateObject49","_templateObject50","_templateObject51","WeekRegExp","WeekMatcher","_templateObject52","_templateObject53","_templateObject54","MonthRegExp","MonthMatcher","CSSStyleList","BackgroundTexture","FontFamily","FontSize","FontWeight","FontStyle","join","consumeEvent","_templateObject55","_templateObject56","_templateObject57","Array","from","files","File","onDragEnter","onDragOver","onDrop","dataTransfer","_onDrop","acceptableTypes","multiple","_templateObject58","_templateObject59","_templateObject60","Icon","_templateObject61","_templateObject62","_templateObject63","_templateObject64","_templateObject65","_templateObject66","_templateObject67","_templateObject68","Options","_templateObject69","Option","OptionValue","OptionLabel","disabled","test","_templateObject70","_templateObject71","_templateObject72","LineWrapping","_templateObject73","_my$Geometry","_templateObject74","_my$Geometry2","_templateObject75","_my$Geometry3","_templateObject76","_my$Geometry4","_templateObject77","_my$Geometry5","_templateObject78","_my$Geometry6","_templateObject79","_my$Geometry7","_templateObject80","_my$Geometry8","_templateObject81","_my$Geometry9","_templateObject82","_my$Geometry10","_templateObject83","_my$Geometry11","_templateObject84","_my$Geometry12","_templateObject85","_my$Geometry13","_templateObject86","_my$Geometry14","_templateObject87","_my$Geometry15","_templateObject88","_my$Geometry16","_templateObject89","propagateEvent","_Id","_Name","_Project","_Folder","_BackgroundColor","_BackgroundTexture","_FontFamily","_FontSize","_FontWeight","_FontStyle","_LineHeight","_ForegroundColor","_Value","_observed","_unobserved","_memoized","_activeScript","_pendingScript","_ScriptError","_Renderer","_View","_onMount","_onUnmount","_Error","_proto","prototype","_createClass","activateScript","_this3","compiledScript","Function","Signal","console","error","Cause","newRenderer","Rendering","hasError","newCallback","_this4","_this5","_reportChange","Change","_this$_Project","apply","concat","arguments","_serializeConfigurationInto","_this6","serializeProperty","_deserializeConfigurationFrom","_this7","deserializeProperty","warn","memoized","assign","_","newName","isAttached","newColor","allowColor","newTexture","allowURL","newFontFamily","allowTextline","newFontSize","newFontWeight","allowIntegerInRange","newFontStyle","allowOneOf","newLineHeight","newForegroundColor","newValue","ValuesDiffer","deep","newScript","allowText","newScriptError","newError","_SNS_Visual2","_this8","_SnapToGrid","_GridWidth","_GridHeight","_BoardList","_inheritsLoose","_proto2","BoardAtPath","Path","startsWith","splitPath","split","Element","parseInt","l","BoardAt","BoardNamed","containsFolder","IndexOfBoard","BoardOrNameOrIndex","expectValue","existingBoard","expectInteger","hasBoard","newBoardAt","BoardDeserializedAt","allowInteger","max","newBoard","_attachBoardAt","_deserializeStickersFrom","_deserializeBoardsFrom","DuplicateOfBoardAt","mayShiftBoardUp","mayShiftBoardDown","BoardIndex","shiftBoardToTop","oldIndex","shiftBoardUp","shiftBoardDown","shiftBoardToBottom","shiftBoardTo","newIndex","shiftBoardsByIndex","Count","_this9","BoardCount","expectIntegerInRange","BoardsToShift","mayShiftBoardIn","mayShiftBoardOut","shiftBoardIn","newFolder","shiftBoardOut","mayMoveBoardTo","FolderOrNameOrIndex","moveBoardTo","destroyBoard","clear","splice","_this10","_this11","_serializeBoardsInto","_this12","BoardSerialization","outerFolder","outerPath","IndexPath","SnapToGrid","newSetting","allowBoolean","GridWidth","newWidth","allowCardinal","GridHeight","newHeight","SNS_ProjectPropertySet","Property","_SNS_Folder2","_this13","_onChange","_onRendering","_onError","_Application","_proto3","BoardAtIndexPath","expectListSatisfying","BoardWithId","StickerWithId","recursivelyActivateAllScripts","onChange","Callback","_this14","ArgList","unshift","onRendering","_this15","onError","_this16","deserializedFrom","newInterface","ObjectIsEmpty","SNS_BoardPropertySet","_SNS_Folder3","_this17","_StickerList","_DialogList","registerFolder","_proto4","IndexOfSticker","StickerOrNameOrIndex","StickerNamed","existingSticker","StickerAt","hasSticker","newStickerAt","StickerDeserializedAt","newSticker","_attachStickerAt","DuplicateOfStickerAt","mayShiftStickerUp","mayShiftStickerDown","StickerIndex","shiftStickerToTop","shiftStickerUp","shiftStickerDown","shiftStickerToBottom","shiftStickerTo","shiftStickersByIndex","_this18","StickerCount","StickersToShift","destroySticker","newHandler","IndexOfDialog","DialogName","DialogList","openDialog","OptionSet","Title","isResizable","maxWidth","maxHeight","onClose","DialogIndex","Number","MAX_SAFE_INTEGER","Visibility","Dialog","bringDialogToFront","DialogIsOpen","openTextViewDialog","Content","isFormatted","_templateObject90","openHTMLViewDialog","_templateObject91","openImageViewDialog","_templateObject92","openSVGViewDialog","_templateObject93","openWebViewDialog","_templateObject94","titleDialogAs","newTitle","positionDialogAt","newX","newY","sizeDialogTo","DialogIsFrontmost","closeDialog","closeAllDialogs","_serializeStickersInto","_this19","StickerSerialization","SNS_StickerPropertySet","_SNS_Visual3","_this20","_minWidth","_maxWidth","_minHeight","_maxHeight","_Geometry","_Lock","_Selectability","_Visibility","_Enabling","registerSticker","_proto5","lock","Lock","unlock","show","hide","enable","disable","isSelectable","isLocked","isVisible","isEnabled","_ref","newMinWidth","newMaxWidth","newMinHeight","newMaxHeight","newPosition","newSize","_this$_Geometry","newGeometry","_this$_Geometry2","newLock","expectBoolean","newSelectability","newVisibility","newEnabling","SNS_ConnectionStates","window","log","dispatchEvent","CustomEvent","detail","SNS_Adapter","BoardId","FolderId","expectOrdinal","oldFolder","setTimeout","StickerId","oldBoard","BehaviorEntriesIn","BehaviorGroup","BehaviorEntryList"],"mappings":"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"}