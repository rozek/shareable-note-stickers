{"version":3,"file":"shareable-note-stickers.umd.js","sources":["../src/shareable-note-stickers.ts"],"sourcesContent":["/*******************************************************************************\n*                                                                              *\n*                        Shareable Note Stickers (SNS)                         *\n*                                                                              *\n*******************************************************************************/\n\n  declare const QRCode:Function|Indexable\n\n  import {\n//  throwError,\n    quoted,\n    ValuesDiffer, ObjectIsEmpty,\n    ValueIsBoolean,\n    ValueIsNumber, ValueIsNumberInRange, ValueIsFiniteNumber,\n      ValueIsInteger, ValueIsIntegerInRange, ValueIsOrdinal,\n    ValueIsString, ValueIsStringMatching, ValueIsText, ValueIsTextline,\n    ValueIsFunction,\n    ValueIsObject, ValueIsPlainObject,\n    ValueIsList, ValueIsListSatisfying,\n    ValueIsOneOf,\n    ValueIsColor, ValueIsURL,\n    ValidatorForClassifier, acceptNil, rejectNil,\n    expectValue,\n    allowBoolean, expectBoolean,\n    allowInteger, expectInteger, allowIntegerInRange, expectIntegerInRange,\n      allowOrdinal, expectOrdinal, allowCardinal,\n    allowText, allowTextline, expectTextline,\n    allowPlainObject,\n    expectListSatisfying,\n    allowFunction, expectFunction,\n    allowOneOf,\n    allowColor, ValueIsEMailAddress, allowURL,\n  } from 'javascript-interface-library'\n  import * as JIL from 'javascript-interface-library'\n\n  const ValueIsPhoneNumber = ValueIsTextline // *C* should be implemented\n\n  import { html } from 'htm/preact'\n\n  import { customAlphabet }   from 'nanoid'\n// @ts-ignore TS2307 typescript has problems importing \"nanoid-dictionary\"\n  import { nolookalikesSafe } from 'nanoid-dictionary'\n\n  import hyperactiv from 'hyperactiv'\n  const { observe, computed, dispose } = hyperactiv\n\n/**** make some existing types indexable ****/\n\n  interface Indexable { [Key:string]:any }\n\n/**** define serializable types ****/\n\n  type serializableValue  = null | boolean | number | string |\n                            serializableObject | serializableArray\n  type serializableObject = { [Key:string]:serializableValue }\n  type serializableArray  = serializableValue[]\n  type Serializable       = serializableObject\n\n/**** prepare an SNS-specific Stylesheet ****/\n\n  const BehaviorStyleElement = document.createElement('style')\n    BehaviorStyleElement.innerHTML = `\n/**** DefaultSticker ****/\n\n  .SNS.DefaultSticker {\n    left:0px; top:0px; right:0px; bottom:0px;\n  }\n`\n  document.head.appendChild(BehaviorStyleElement)\n\n//------------------------------------------------------------------------------\n//--                             Type Definitions                             --\n//------------------------------------------------------------------------------\n\n  export type SNS_Id         = string         // mainly for illustrative reasons\n  export type SNS_Identifier = string                                    // dto.\n  export type SNS_Name       = string                                    // dto.\n  export type SNS_Ordinal    = number                                    // dto.\n  export type SNS_Cardinal   = number                                    // dto.\n  export type SNS_Text       = string                                    // dto.\n  export type SNS_Textline   = string                                    // dto.\n  export type SNS_URL        = string                                    // dto.\n  export type SNS_Color      = string                                    // dto.\n\n/**** geometry-related types ****/\n\n  export type SNS_Location  = number         // mainly for illustrative purposes\n  export type SNS_Dimension = number                                     // dto.\n  export type SNS_Position  = { x:SNS_Location,y:SNS_Location }\n  export type SNS_Size      = { Width:SNS_Dimension,Height:SNS_Dimension }\n  export type SNS_Geometry  = { x:SNS_Location,y:SNS_Location, Width:SNS_Dimension,Height:SNS_Dimension }\n\n/**** configuration-related types ****/\n\n  export const SNS_FontStyles = ['normal','italic']\n  export type  SNS_FontStyle  = typeof SNS_FontStyles[number]\n\n/**** Rendering Callback ****/\n\n  export type SNS_onRenderingCallback = (\n    Project:SNS_Project, Board?:SNS_Board, Sticker?:SNS_Sticker\n  ) => void\n\n/**** Error Report ****/\n\n  export const SNS_ErrorTypes = [\n    'missing Behaviour',         'Behaviour Execution Failure',\n    'Script Compilation Failure','Script Execution Failure',\n    'Rendering Failure',         'Event Handling Failure',\n    '\"onMount\" Callback Failure','\"onUnmount\" Callback Failure'\n  ]\n  export type SNS_ErrorType = typeof SNS_ErrorTypes[number]\n\n  export type SNS_Error = {\n    Type:SNS_ErrorType,          // also serves as a title for the error display\n    Message:SNS_Text,\n    Cause:any\n  }\n\n/**** Error Callback ****/\n\n  export type SNS_onErrorCallback = (\n    Project:SNS_Project, Visual:SNS_Visual, Error:SNS_Error\n  ) => void\n\n/**** throwError - simplifies construction of named errors ****/\n\n  export function throwError (Message:string):never {\n    let Match = /^([$a-zA-Z][$a-zA-Z0-9]*):\\s*(\\S.+)\\s*$/.exec(Message)\n    if (Match == null) {\n      throw new Error(Message)\n    } else {\n      let namedError = new Error(Match[2])\n        namedError.name = Match[1]\n      throw namedError\n    }\n  }\n\n/**** throwReadOnlyError ****/\n\n// @ts-ignore TS2534 why is TS complaining here?\n  export function throwReadOnlyError (Name:string):never {\n    throwError(\n      'ReadOnlyProperty: property ' + quoted(Name) + ' must not be set'\n    )\n  }\n\n//------------------------------------------------------------------------------\n//--                 Classification and Validation Functions                  --\n//------------------------------------------------------------------------------\n\n/**** ValueIsVisual ****/\n\n  export function ValueIsVisual (Value:any):boolean {\n    return(Value instanceof SNS_Visual)\n  }\n\n/**** allow/expect[ed]Visual ****/\n\n  export const allowVisual = ValidatorForClassifier(\n    ValueIsVisual, acceptNil, 'SNS visual'\n  ), allowedVisual = allowVisual\n\n  export const expectVisual = ValidatorForClassifier(\n    ValueIsVisual, rejectNil, 'SNS visual'\n  ), expectedVisual = expectVisual\n\n/**** ValueIsFolder ****/\n\n  export function ValueIsFolder (Value:any):boolean {\n    return (Value instanceof SNS_Folder)\n  }\n\n/**** allow/expect[ed]Folder ****/\n\n  export const allowFolder = ValidatorForClassifier(\n    ValueIsFolder, acceptNil, 'SNS folder'\n  ), allowedFolder = allowFolder\n\n  export const expectFolder = ValidatorForClassifier(\n    ValueIsFolder, rejectNil, 'SNS folder'\n  ), expectedFolder = expectFolder\n\n/**** ValueIsProject ****/\n\n  export function ValueIsProject (Value:any):boolean {\n    return (Value instanceof SNS_Project)\n  }\n\n/**** allow/expect[ed]Project ****/\n\n  export const allowProject = ValidatorForClassifier(\n    ValueIsProject, acceptNil, 'SNS project'\n  ), allowedProject = allowProject\n\n  export const expectProject = ValidatorForClassifier(\n    ValueIsProject, rejectNil, 'SNS project'\n  ), expectedProject = expectProject\n\n/**** ValueIsBoard ****/\n\n  export function ValueIsBoard (Value:any):boolean {\n    return (Value instanceof SNS_Board)\n  }\n\n/**** allow/expect[ed]Board ****/\n\n  export const allowBoard = ValidatorForClassifier(\n    ValueIsBoard, acceptNil, 'SNS board'\n  ), allowedBoard = allowBoard\n\n  export const expectBoard = ValidatorForClassifier(\n    ValueIsBoard, rejectNil, 'SNS board'\n  ), expectedBoard = expectBoard\n\n/**** ValueIsSticker ****/\n\n  export function ValueIsSticker (Value:any):boolean {\n    return (Value instanceof SNS_Sticker)\n  }\n\n/**** allow/expect[ed]Sticker ****/\n\n  export const allowSticker = ValidatorForClassifier(\n    ValueIsSticker, acceptNil, 'SNS sticker'\n  ), allowedSticker = allowSticker\n\n  export const expectSticker = ValidatorForClassifier(\n    ValueIsSticker, rejectNil, 'SNS sticker'\n  ), expectedSticker = expectSticker\n\n/**** ValueIsId ****/\n\n  export function ValueIsId (Value:any):boolean {\n    return ValueIsTextline(Value) // *C* could definitely be better\n  }\n\n/**** allow/expect[ed]Id ****/\n\n  export const allowId = ValidatorForClassifier(\n    ValueIsId, acceptNil, 'unique SNS id'\n  ), allowedId = allowId\n\n  export const expectId = ValidatorForClassifier(\n    ValueIsId, rejectNil, 'unique SNS id'\n  ), expectedId = expectId\n\n/**** ValueIsIdentifier ****/\n\n  const SNS_IdentifierPattern = /^[a-z$_][a-z$_0-9]*$/i\n\n  export function ValueIsIdentifier (Value:any):boolean {\n    return ValueIsStringMatching(Value, SNS_IdentifierPattern)\n  }\n\n/**** allow/expect[ed]Identifier ****/\n\n  export const allowIdentifier = ValidatorForClassifier(\n    ValueIsIdentifier, acceptNil, 'note stickers identifier'\n  ), allowedIdentifier = allowIdentifier\n\n  export const expectIdentifier = ValidatorForClassifier(\n    ValueIsIdentifier, rejectNil, 'note stickers identifier'\n  ), expectedIdentifier = expectIdentifier\n\n/**** ValueIsName ****/\n\n  export function ValueIsName (Value:any):boolean {\n    return ValueIsTextline(Value)\n  }\n\n/**** allow/expect[ed]Name ****/\n\n  export const allowName = ValidatorForClassifier(\n    ValueIsName, acceptNil, 'SNS name'\n  ), allowedName = allowName\n\n  export const expectName = ValidatorForClassifier(\n    ValueIsName, rejectNil, 'SNS name'\n  ), expectedName = expectName\n\n/**** ValueIsLocation ****/\n\n  export function ValueIsLocation (Value:any):boolean {\n    return ValueIsFiniteNumber(Value)\n  }\n\n/**** allow/expect[ed]Location ****/\n\n  export const allowLocation = ValidatorForClassifier(\n    ValueIsLocation, acceptNil, 'sticker coordinate'\n  ), allowedLocation = allowLocation\n\n  export const expectLocation = ValidatorForClassifier(\n    ValueIsLocation, rejectNil, 'sticker coordinate'\n  ), expectedLocation = expectLocation\n\n/**** ValueIsDimension ****/\n\n  export function ValueIsDimension (Value:any):boolean {\n    return ValueIsFiniteNumber(Value) && (Value >= 0)\n  }\n\n/**** allow/expect[ed]Dimension ****/\n\n  export const allowDimension = ValidatorForClassifier(\n    ValueIsDimension, acceptNil, 'sticker dimension'\n  ), allowedDimension = allowDimension\n\n  export const expectDimension = ValidatorForClassifier(\n    ValueIsDimension, rejectNil, 'sticker dimension'\n  ), expectedDimension = expectDimension\n\n/**** ValueIsPosition ****/\n\n  export function ValueIsPosition (Value:any):boolean {\n    return (\n      ValueIsObject(Value) &&\n      ValueIsLocation(Value.x) &&\n      ValueIsLocation(Value.y)\n    )\n  }\n\n/**** allow/expect[ed]Position ****/\n\n  export const allowPosition = ValidatorForClassifier(\n    ValueIsPosition, acceptNil, 'sticker position'\n  ), allowedPosition = allowPosition\n\n  export const expectPosition = ValidatorForClassifier(\n    ValueIsPosition, rejectNil, 'sticker position'\n  ), expectedPosition = expectPosition\n\n/**** ValueIsSize ****/\n\n  export function ValueIsSize (Value:any):boolean {\n    return (\n      ValueIsObject(Value) &&\n      ValueIsDimension(Value.Width) &&\n      ValueIsDimension(Value.Height)\n    )\n  }\n\n/**** allow/expect[ed]Size ****/\n\n  export const allowSize = ValidatorForClassifier(\n    ValueIsSize, acceptNil, 'sticker size'\n  ), allowedSize = allowSize\n\n  export const expectSize = ValidatorForClassifier(\n    ValueIsSize, rejectNil, 'sticker size'\n  ), expectedSize = expectSize\n\n/**** ValueIsGeometry ****/\n\n  export function ValueIsGeometry (Value:any):boolean {\n    return (\n      ValueIsObject(Value) &&\n      ValueIsLocation(Value.x) && ValueIsDimension(Value.Width) &&\n      ValueIsLocation(Value.y) && ValueIsDimension(Value.Height)\n    )\n  }\n\n/**** allow/expect[ed]Geometry ****/\n\n  export const allowGeometry = ValidatorForClassifier(\n    ValueIsGeometry, acceptNil, 'sticker geometry'\n  ), allowedGeometry = allowGeometry\n\n  export const expectGeometry = ValidatorForClassifier(\n    ValueIsGeometry, rejectNil, 'sticker geometry'\n  ), expectedGeometry = expectGeometry\n\n/**** ValueIsError ****/\n\n  export function ValueIsError (Value:any):boolean {\n    return (\n      ValueIsPlainObject(Value) &&\n      ValueIsOneOf(Value.Type,SNS_ErrorTypes) &&\n      ValueIsText(Value.Message)\n    )\n  }\n\n/**** allow/expect[ed]Error ****/\n\n  export const allowError = ValidatorForClassifier(\n    ValueIsError, acceptNil, 'error descriptor'\n  ), allowedError = allowError\n\n  export const expectError = ValidatorForClassifier(\n    ValueIsError, rejectNil, 'error descriptor'\n  ), expectedError = expectError\n\n/**** ValueIsSerializable ****/\n\n  export function ValueIsSerializable (Value:any):boolean {\n    return ValueIsPlainObject(Value) // *C* could definitely be better!\n  }\n\n/**** allow/expect[ed]Serializable ****/\n\n  export const allowSerializable = ValidatorForClassifier(\n    ValueIsSerializable, acceptNil, 'serializable object'\n  ), allowedSerializable = allowSerializable\n\n  export const expectSerializable = ValidatorForClassifier(\n    ValueIsSerializable, rejectNil, 'serializable object'\n  ), expectedSerializable = expectSerializable\n\n//------------------------------------------------------------------------------\n//--                      Primitives and Change Reports                       --\n//------------------------------------------------------------------------------\n\n  export const SNS_Changes = [\n    'createBoard',   'configureFolder',  'attachBoard',   'detachBoard',   'destroyBoard',\n    'createSticker', 'configureSticker', 'attachSticker', 'detachSticker', 'destroySticker',\n  ]\n  export type SNS_Change = typeof SNS_Changes[number]\n\n  export type SNS_onChangeCallback = (\n    Project:SNS_Project, Change:SNS_Change, Id:SNS_Id, ...ArgList:any[]\n  ) => void\n\n/**** createBoard ****/\n\n  export function createBoard (\n    Project:SNS_Project, BoardId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId        ('board id',BoardId)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board != null) {\n      console.error('a board with the given \"BoardId\" exists already')\n      return\n    }\n\n    Board = new SNS_Board(Project,BoardId)   // will automatically be registered\n  }\n\n/**** configureFolder ****/\n\n  export function configureFolder (\n    Project:SNS_Project, FolderId:SNS_Id, Property:SNS_Identifier, Value:any\n  ):void {\n    expectProject           ('SNS project',Project)\n    expectId                  ('folder id',FolderId)\n    expectIdentifier('property identifier',Property)\n\n    let Folder = Project.FolderWithId(FolderId)\n    if (Folder == null) {                                 // should never happen\n      console.error('no folder with the given \"FolderId\" found')\n      return\n    }\n\n    const PropertySet:Indexable = (\n      ValueIsProject(Folder) ? SNS_ProjectPropertySet : SNS_BoardPropertySet\n    )\n    if (! (Property in PropertySet)) {\n      console.warn('unsupported folder property \"' + Property + '\"')\n      return\n    }\n\n    try {\n// @ts-ignore TS7053 allow indexing of \"Folder\"\n      Folder[Property] = Value\n    } catch (Signal:any) {\n      console.warn('unsupported \"' + Property + '\" value received')\n      return\n    }\n  }\n\n/**** attachBoard ****/\n\n  export function attachBoard (\n    Project:SNS_Project, BoardId:SNS_Id, FolderId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId            ('board id',BoardId)\n    expectId           ('folder id',FolderId)\n    expectOrdinal('insertion index',Index)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board == null) {\n      console.error('no board with the given \"BoardId\" found')\n      return\n    }\n\n    let newFolder = Project.FolderWithId(FolderId)\n    if (newFolder == null) {\n      console.error('no folder with the given \"FolderId\" found')\n      return\n    }\n\n    if (Board === newFolder) {\n      console.error('cannot attach a board to itself')\n      return\n    }\n\n    if (Board.containsFolder(newFolder)) {\n      console.error('cannot attach an outer board to one of its inner boards')\n      return\n    }\n\n    const oldFolder = Board.Folder\n    switch (true) {\n      case (oldFolder === newFolder):\n        setTimeout(() => sanitizeBoardList(Project,oldFolder,Board,Index),0);  break\n      case (oldFolder != null):\n        setTimeout(() => sanitizeBoardList(Project,oldFolder,Board),0)\n    }\n\n    newFolder._attachBoardAt(Board,Index)\n  }\n\n/**** detachBoard ****/\n\n  export function detachBoard (\n    Project:SNS_Project, BoardId:SNS_Id, FolderId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId            ('board id',BoardId)\n    expectId           ('folder id',FolderId)\n    expectOrdinal('insertion index',Index)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board == null) { return }                     // operation is idempotent\n\n    let oldFolder = Project.FolderWithId(FolderId)\n    if (oldFolder == null) { return }                 // operation is idempotent\n\n    if ((Board.Folder === oldFolder) && (oldFolder.Board(Index) === Board)) {\n      oldFolder._detachBoardAt(Index)\n    }\n  }\n\n/**** destroyBoard ****/\n\n  export function destroyBoard (\n    Project:SNS_Project, BoardId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId        ('board id',BoardId)\n\n    if (BoardId === Project.Id) {\n      console.error('the given \"BoardId\" is the id of the current project')\n      return\n    }\n\n    let Board = Project.BoardWithId(BoardId)\n    if (Board == null) { return }                     // operation is idempotent\n\n    if (\n      (Board.Folder != null) || (Board.BoardCount > 0) || (Board.StickerCount > 0)\n    ) {\n      console.error('cannot destroy a board that is still in use')\n      return\n    }\n\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n    Board._Project = undefined           // detaches this board from the project\n    unregisterFolder(Board)\n  }\n\n/**** createSticker ****/\n\n  export function createSticker (\n    Project:SNS_Project, StickerId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId      ('sticker id',StickerId)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker != null) {\n      console.error('a sticker with the given \"StickerId\" exists already')\n      return\n    }\n\n    Sticker = new SNS_Sticker(Project,StickerId)  // will automat. be registered\n  }\n\n/**** configureSticker ****/\n\n  export function configureSticker (\n    Project:SNS_Project, StickerId:SNS_Id, Property:SNS_Identifier, Value:any\n  ):void {\n    expectProject           ('SNS project',Project)\n    expectId                 ('sticker id',StickerId)\n    expectIdentifier('property identifier',Property)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) {                                // should never happen\n      console.error('no sticker with the given \"StickerId\" found')\n      return\n    }\n\n    if (! (Property in SNS_StickerPropertySet)) {\n      console.warn('unsupported sticker property \"' + Property + '\"')\n      return\n    }\n\n    try {\n// @ts-ignore TS7053 allow indexing of \"Sticker\"\n      Sticker[Property] = Value\n    } catch (Signal:any) {\n      console.warn('unsupported \"' + Property + '\" value received')\n      return\n    }\n  }\n\n/**** attachSticker ****/\n\n  export function attachSticker (\n    Project:SNS_Project, StickerId:SNS_Id, BoardId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId          ('sticker id',StickerId)\n    expectId            ('board id',BoardId)\n    expectOrdinal('insertion index',Index)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) {\n      console.error('no sticker with the given \"StickerId\" found')\n      return\n    }\n\n    let newBoard = Project.BoardWithId(BoardId)\n    if (newBoard == null) {\n      console.error('no board with the given \"BoardId\" found')\n      return\n    }\n\n    const oldBoard = Sticker.Board\n    switch (true) {\n      case (oldBoard === newBoard):\n        setTimeout(() => sanitizeStickerList(Project,oldBoard,Sticker,Index),0);  break\n      case (oldBoard != null):\n        setTimeout(() => sanitizeStickerList(Project,oldBoard,Sticker),0)\n    }\n\n    newBoard._attachStickerAt(Sticker,Index)\n  }\n\n/**** detachSticker ****/\n\n  export function detachSticker (\n    Project:SNS_Project, StickerId:SNS_Id, BoardId:SNS_Id, Index:SNS_Ordinal\n  ):void {\n    expectProject    ('SNS project',Project)\n    expectId          ('sticker id',StickerId)\n    expectId            ('board id',BoardId)\n    expectOrdinal('insertion index',Index)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) { return }                   // operation is idempotent\n\n    let oldBoard = Project.BoardWithId(BoardId)\n    if (oldBoard == null) { return }                  // operation is idempotent\n\n    if ((Sticker.Board === oldBoard) && (oldBoard.Sticker(Index) === Sticker)) {\n      oldBoard._detachStickerAt(Index)\n    }\n  }\n\n/**** destroySticker ****/\n\n  export function destroySticker (\n    Project:SNS_Project, StickerId:SNS_Id\n  ):void {\n    expectProject('SNS project',Project)\n    expectId      ('sticker id',StickerId)\n\n    let Sticker = Project.StickerWithId(StickerId)\n    if (Sticker == null) { return }                   // operation is idempotent\n\n    if (Sticker.Board != null) {\n      console.error('cannot destroy a sticker that is still in use')\n      return\n    }\n\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n    Sticker._Project = undefined       // detaches this sticker from the project\n    unregisterSticker(Sticker)\n  }\n\n/**** sanitizeBoardList ****/\n\n  export function sanitizeBoardList (\n    Project:SNS_Project, Folder:SNS_Folder, Board:SNS_Board, Index?:SNS_Ordinal\n  ):void {\n    expectProject('SNS project',Project)\n    expectFolder      ('folder',Folder)\n    expectBoard        ('board',Board)\n    allowOrdinal       ('index',Index) // undefined means: always detach \"Board\"\n\n    let BoardSet:Set<SNS_Board> = new Set()\n\n    const BoardList = Folder.BoardList\n    for (let i = BoardList.length-1; i >= 0; i--) {\n      const BoardFromList = BoardList[i]\n      if (\n        (BoardFromList.Folder !== Folder) ||//\"Board\" doesn't belong to \"Folder\"\n        (BoardFromList === Board) && (Index !== i) ||\n        BoardSet.has(BoardFromList)           // \"Board\" already occurred before\n      ) {\n        Folder._detachBoardAt(i)\n      } else {\n        BoardSet.add(BoardFromList)\n      }\n    }\n  }\n\n/**** sanitizeStickerList ****/\n\n  export function sanitizeStickerList (\n    Project:SNS_Project, Board:SNS_Board, Sticker:SNS_Sticker, Index?:SNS_Ordinal\n  ):void {\n    expectProject('SNS project',Project)\n    expectBoard        ('board',Board)\n    expectSticker    ('sticker',Sticker)\n    allowOrdinal       ('index',Index)  // undef. means: always detach \"Sticker\"\n\n    let StickerSet:Set<SNS_Sticker> = new Set()\n\n    const StickerList = Board.StickerList\n    for (let i = StickerList.length-1; i >= 0; i--) {\n      const StickerFromList = StickerList[i]\n      if (\n        (StickerFromList.Board !== Board) ||      // \"Sticker\" belongs elsewhere\n        (StickerFromList === Sticker) && (Index !== i) ||\n        StickerSet.has(StickerFromList)     // \"Sticker\" already occurred before\n      ) {\n        Board._detachStickerAt(i)\n      } else {\n        StickerSet.add(StickerFromList)\n      }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                          Configuration Defaults                          --\n//------------------------------------------------------------------------------\n\n  const defaultStickerGeometry = { x:20,y:20, Width:80,Height:60 }\n  const defaultMinWidth  = 10\n  const defaultMaxWidth  = undefined\n  const defaultMinHeight = 10\n  const defaultMaxHeight = undefined\n\n  const defaultGridWidth  = 10\n  const defaultGridHeight = 10\n\n//------------------------------------------------------------------------------\n//--                               Acceptables                                --\n//------------------------------------------------------------------------------\n\n/**** acceptableBoolean ****/\n\n  export function acceptableBoolean (Value:any, Default:boolean):boolean {\n    return (ValueIsBoolean(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalBoolean ****/\n\n  export function acceptableOptionalBoolean (\n    Value:any, Default?:boolean|undefined\n  ):boolean|undefined {\n    return (\n      Value == null\n      ? undefined\n      : ValueIsBoolean(Value) ? Value : Default\n    )\n  }\n\n/**** acceptableNumber ****/\n\n  export function acceptableNumber (Value:any, Default:number):number {\n    return (ValueIsNumber(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalNumber ****/\n\n  export function acceptableOptionalNumber (\n    Value:any, Default?:number|undefined\n  ):number|undefined {\n    return (ValueIsNumber(Value) ? Value : Default)\n  }\n\n/**** acceptableNumberInRange ****/\n\n  export function acceptableNumberInRange (\n    Value:any, Default:number,\n    minValue:number = -Infinity, maxValue:number = Infinity,\n    withMin:boolean = false, withMax:boolean = false\n  ):number {\n    return (ValueIsNumberInRange(Value,minValue,maxValue,withMin,withMax) ? Value : Default)\n  }\n\n/**** acceptableOptionalNumberInRange ****/\n\n  export function acceptableOptionalNumberInRange (\n    Value:any, Default:number|undefined,\n    minValue:number = -Infinity, maxValue:number = Infinity,\n    withMin:boolean = false, withMax:boolean = false\n  ):number|undefined {\n    return (\n      ValueIsNumberInRange(Value,minValue,maxValue,withMin,withMax)\n      ? Value\n      : Default\n    )\n  }\n\n/**** acceptableInteger ****/\n\n  export function acceptableInteger (Value:any, Default:number):number {\n    return (ValueIsInteger(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalInteger ****/\n\n  export function acceptableOptionalInteger (\n    Value:any, Default:number|undefined\n  ):number|undefined {\n    return (ValueIsInteger(Value) ? Value : Default)\n  }\n\n/**** acceptableIntegerInRange ****/\n\n  export function acceptableIntegerInRange (\n    Value:any, Default:number, minValue:number = -Infinity, maxValue:number = Infinity\n  ):number {\n    return (ValueIsIntegerInRange(Value,minValue,maxValue) ? Value : Default)\n  }\n\n/**** acceptableOptionalIntegerInRange ****/\n\n  export function acceptableOptionalIntegerInRange (\n    Value:any, Default:number|undefined,\n    minValue:number = -Infinity, maxValue:number = Infinity\n  ):number|undefined {\n    return (ValueIsIntegerInRange(Value,minValue,maxValue) ? Value : Default)\n  }\n\n/**** acceptableOrdinal ****/\n\n  export function acceptableOrdinal (Value:any, Default:number):number {\n    return (ValueIsOrdinal(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalOrdinal ****/\n\n  export function acceptableOptionalOrdinal (\n    Value:any, Default?:number|undefined\n  ):number|undefined {\n    return (ValueIsOrdinal(Value) ? Value : Default)\n  }\n\n/**** acceptableString ****/\n\n  export function acceptableString (Value:any, Default:string):string {\n    return (ValueIsString(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalString ****/\n\n  export function acceptableOptionalString (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsString(Value) ? Value : Default)\n  }\n\n/**** acceptableNonEmptyString ****/\n\n  export function acceptableNonEmptyString (Value:any, Default:string):string {\n    return (ValueIsString(Value) && (Value.trim() !== '') ? Value : Default)\n  }\n\n/**** acceptableOptionalNonEmptyString ****/\n\n  export function acceptableOptionalNonEmptyString (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsString(Value) && (Value.trim() !== '') ? Value : Default)\n  }\n\n/**** acceptableStringMatching ****/\n\n  export function acceptableStringMatching (\n    Value:any, Default:string, Pattern:RegExp\n  ):string {\n    return (ValueIsStringMatching(Value,Pattern) ? Value : Default)\n  }\n\n/**** acceptableOptionalStringMatching ****/\n\n  export function acceptableOptionalStringMatching (\n    Value:any, Default:string|undefined, Pattern:RegExp\n  ):string|undefined {\n    return (ValueIsStringMatching(Value,Pattern) ? Value : Default)\n  }\n\n/**** acceptableText ****/\n\n  const noCtrlCharsButCRLFTABPattern = /^[^\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]*$/\n\n  export function acceptableText (Value:any, Default:string):string {\n    return (ValueIsStringMatching(Value,noCtrlCharsButCRLFTABPattern) ? Value : Default)\n  }\n\n/**** acceptableOptionalText ****/\n\n  export function acceptableOptionalText (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsText(Value) ? Value : Default)\n  }\n\n/**** acceptableTextline ****/\n\n  export function acceptableTextline (Value:any, Default:string):string {\n    return (ValueIsTextline(Value) ? Value : Default).replace(\n      /[\\f\\r\\n\\v\\u0085\\u2028\\u2029].*$/,'...'\n    )\n  }\n\n/**** acceptableOptionalTextline ****/\n\n  export function acceptableOptionalTextline (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    const Result = ValueIsTextline(Value) ? Value : Default\n    return (\n      Result == null\n      ? undefined\n      : Result.replace(/[\\f\\r\\n\\v\\u0085\\u2028\\u2029].*$/,'...')\n    )\n  }\n\n/**** acceptableFunction ****/\n\n  export function acceptableFunction (Value:any, Default:Function):Function {\n    return (ValueIsFunction(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalFunction ****/\n\n  export function acceptableOptionalFunction (\n    Value:any, Default?:Function|undefined\n  ):Function|undefined {\n    return (ValueIsFunction(Value) ? Value : Default)\n  }\n\n/**** acceptableList ****/\n\n  export function acceptableList (Value:any, Default:any[]):any[] {\n    return (ValueIsList(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalList ****/\n\n  export function acceptableOptionalList (\n    Value:any, Default?:any[]|undefined\n  ):any[]|undefined {\n    return (ValueIsList(Value) ? Value : Default)\n  }\n\n/**** acceptableListSatisfying ****/\n\n  export function acceptableListSatisfying (\n    Value:any, Default:any[], Matcher:Function\n  ):any[] {\n    return (ValueIsListSatisfying(Value,Matcher) ? Value : Default)\n  }\n\n/**** acceptableOptionalListSatisfying ****/\n\n  export function acceptableOptionalListSatisfying (\n    Value:any, Default:any[]|undefined, Matcher:Function\n  ):any[]|undefined {\n    return (ValueIsListSatisfying(Value,Matcher) ? Value : Default)\n  }\n\n/**** acceptableColor ****/\n\n  export function acceptableColor (Value:any, Default:string):string {\n    return (ValueIsColor(Value) ? Value : Default)\n  }\n\n/**** acceptableOptionalColor ****/\n\n  export function acceptableOptionalColor (\n    Value:any, Default?:string|undefined\n  ):string|undefined {\n    return (ValueIsColor(Value) ? Value : Default)\n  }\n\n/**** acceptableEMailAddress ****/\n\n  export function acceptableEMailAddress (Value:any, Default:string):string {\n    return (ValueIsEMailAddress(Value) ? Value : Default)\n  }\n\n/**** acceptablePhoneNumber ****/\n\n  export function acceptablePhoneNumber (Value:any, Default:string):string {\n    return (ValueIsPhoneNumber(Value) ? Value : Default)\n  }\n\n/**** acceptableURL ****/\n\n  export function acceptableURL (Value:any, Default:string):string {\n    return (ValueIsURL(Value) ? Value : Default)\n  }\n\n//------------------------------------------------------------------------------\n//--                             basic Renderers                              --\n//------------------------------------------------------------------------------\n\n/**** default Renderer ****/\n\n  function DefaultRenderer (this:SNS_Visual):any {\n    return html`<div class=\"SNS DefaultSticker\" style=${CSSStyleOfVisual(this)}/>`\n  }\n\n/**** Error Renderer ****/\n\n  function ErrorRenderer (this:SNS_Visual):any {\n// @ts-ignore TS2532 \"ErrorRenderer.call(this)\" will define \"this\"\n    const Error = this.Error\n    if (Error == null) { return DefaultRenderer.call(this) }// should never happen\n\n// @ts-ignore TS2532 \"ErrorRenderer.call(this)\" will define \"this\"\n    const onClick = () => this.Project.showError(this,Error)\n\n    return html`<div class=\"SNS brokenSticker\">\n      <div class=\"SNS ErrorIndicator\" onClick=${onClick}/>\n    </div>`\n  }\n\n//------------------------------------------------------------------------------\n//--                               Id Handling                                --\n//------------------------------------------------------------------------------\n\n/**** newId - uses nanoid with custom dictionary ****/\n\n  export const newId = customAlphabet(nolookalikesSafe,21)\n\n/**** registerFolder ****/\n\n  const FolderRegistryForProject:WeakMap<SNS_Project,Indexable> = new WeakMap()\n\n  function registerFolder (Project:SNS_Project, Folder:SNS_Folder):void {\n    let FolderRegistry = FolderRegistryForProject.get(Project)\n    if (FolderRegistry == null) {\n      FolderRegistryForProject.set(Project,FolderRegistry = Object.create(null))\n    }\n\n    const Id = Folder.Id\n// @ts-ignore TS18048 \"FolderRegistry\" is not undefined\n    if (Id in FolderRegistry) throwError(\n      'NonUniqueId: the id of the given folder (' + quoted(Id) +\n      ') has already been registered'\n    )\n\n// @ts-ignore TS18048 \"FolderRegistry\" is not undefined\n    FolderRegistry[Id] = Folder\n  }\n\n/**** unregisterFolder ****/\n\n  function unregisterFolder (Folder:SNS_Folder):void {\n    const Project = Folder.Project\n\n    let FolderRegistry = FolderRegistryForProject.get(Project)\n    if (FolderRegistry == null) { return }\n\n    delete FolderRegistry[Folder.Id]\n  }\n\n/**** FolderWithId ****/\n\n  function FolderWithId (Project:SNS_Project, Id:SNS_Id):SNS_Folder|undefined {\n    let FolderRegistry = FolderRegistryForProject.get(Project)\n    if (FolderRegistry == null) { return undefined }\n\n    return FolderRegistry[Id]\n  }\n\n/**** registerSticker ****/\n\n  const StickerRegistryForProject:WeakMap<SNS_Project,Indexable> = new WeakMap()\n\n  function registerSticker (Project:SNS_Project, Sticker:SNS_Sticker):void {\n    let StickerRegistry = StickerRegistryForProject.get(Project)\n    if (StickerRegistry == null) {\n      StickerRegistryForProject.set(Project,StickerRegistry = Object.create(null))\n    }\n\n    const Id = Sticker.Id\n// @ts-ignore TS18048 \"StickerRegistry\" is not undefined\n    if (Id in StickerRegistry) throwError(\n      'NonUniqueId: the id of the given sticker (' + quoted(Id) +\n      ') has already been registered'\n    )\n\n// @ts-ignore TS18048 \"StickerRegistry\" is not undefined\n    StickerRegistry[Id] = Sticker\n  }\n\n/**** unregisterSticker ****/\n\n  function unregisterSticker (Sticker:SNS_Sticker):void {\n    const Project = Sticker.Project\n\n    let StickerRegistry = StickerRegistryForProject.get(Project)\n    if (StickerRegistry == null) { return }\n\n    delete StickerRegistry[Sticker.Id]\n  }\n\n/**** StickerWithId ****/\n\n  function StickerWithId (Project:SNS_Project, Id:SNS_Id):SNS_Sticker|undefined {\n    let StickerRegistry = StickerRegistryForProject.get(Project)\n    if (StickerRegistry == null) { return undefined }\n\n    return StickerRegistry[Id]\n  }\n\n/**** removeIdsFrom ****/\n\n  export function removeIdsFrom (Serialization:Serializable) {\n    expectSerializable('serialization',Serialization)\n\n    delete Serialization.Id\n\n    if (ValueIsList(Serialization.BoardList)) {\n      (Serialization.BoardList as Serializable[]).forEach(\n        (Serialization:Serializable) => removeIdsFrom(Serialization)\n      )\n    }\n\n    if (ValueIsList(Serialization.StickerList)) {\n      (Serialization.StickerList as Serializable[]).forEach(\n        (Serialization:Serializable) => removeIdsFrom(Serialization)\n      )\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                           Reactivity Handling                            --\n//------------------------------------------------------------------------------\n\n  const reactiveFunctionsForVisual:WeakMap<SNS_Visual,Function[]>  = new WeakMap()\n\n/**** registerReactiveFunctionIn ****/\n\n  function registerReactiveFunctionIn (\n    Visual:SNS_Visual, reactiveFunction:Function\n  ):void {\n    let reactiveFunctions = reactiveFunctionsForVisual.get(Visual)\n    if (reactiveFunctions == null) {\n      reactiveFunctionsForVisual.set(Visual,reactiveFunctions = [])\n    }\n    reactiveFunctions.push(reactiveFunction)\n  }\n\n/**** unregisterAllReactiveFunctionsFrom ****/\n\n  function unregisterAllReactiveFunctionsFrom (Visual:SNS_Visual):void {\n    let reactiveFunctions = reactiveFunctionsForVisual.get(Visual)\n    if (reactiveFunctions == null) { return }\n\n    reactiveFunctions.forEach((reactiveFunction:Function) => {\n      dispose(reactiveFunction)\n    })\n  }\n\n//------------------------------------------------------------------------------\n//--                            Behavior Handling                             --\n//------------------------------------------------------------------------------\n\n  type SNS_groupedBehaviorSet = { [GroupLabel:string]:SNS_BehaviorSetGroup }\n  type SNS_BehaviorSetGroup   = { GroupLabel:SNS_Textline, BehaviorSet:SNS_BehaviorSet }\n  type SNS_BehaviorSet        = { [BehaviorName:string]:SNS_Behavior }\n  type SNS_Behavior           = { Label:SNS_Textline, Executable?:Function, Template:Serializable }\n\n  const groupedBehaviorRegistry:SNS_groupedBehaviorSet          = Object.create(null)\n  const BehaviorRegistry:{ [BehaviorName:string]:Function }     = Object.create(null)\n  const TemplateRegistry:{ [BehaviorName:string]:Serializable } = Object.create(null)\n\n/**** registerBehavior ****/\n\n  function registerBehavior (\n    GroupLabel:SNS_Textline, BehaviorLabel:SNS_Textline,\n    BehaviorName:SNS_Identifier, Template?:Serializable,\n    BehaviorFunction?:Function, BehaviorStyle?:SNS_Text\n  ):void {\n    expectTextline('behavior group label',GroupLabel)\n    expectTextline      ('behavior label',BehaviorLabel)\n    expectIdentifier     ('behavior name',BehaviorName)\n    allowPlainObject  ('sticker template',Template)\n    allowFunction    ('behavior function',BehaviorFunction)\n\n    const normalizedGroupName    = GroupLabel.toLowerCase().replace(/\\s/g,'')\n    const normalizedBehaviorName = BehaviorName.toLowerCase()\n\n    const normalizedTemplate = { ...Template }\n    if (normalizedTemplate.activeScript == null) {\n      normalizedTemplate.activeScript = `useBehavior('${BehaviorName}')\\n`\n    } else {\n      normalizedTemplate.activeScript = (\n        (normalizedTemplate.activeScript as SNS_Text).replace(/^\\s*\\n/,'').replace(/\\n\\s*$/,'\\n')\n      )\n    }\n\n    if (normalizedBehaviorName in BehaviorRegistry) throwError(\n      'BehaviorExists: behavior ' + quoted(BehaviorName) + ' was already registered'\n    )\n\n    let BehaviorSetGroup = groupedBehaviorRegistry[normalizedGroupName]\n    if (BehaviorSetGroup == null) {\n      groupedBehaviorRegistry[normalizedGroupName] = BehaviorSetGroup = {\n        GroupLabel, BehaviorSet:Object.create(null)\n      }\n    }\n\n    BehaviorSetGroup.BehaviorSet[BehaviorName] = {\n      Label:BehaviorLabel, Executable:BehaviorFunction, Template:normalizedTemplate\n    }\n\n    if (BehaviorFunction != null) {\n      TemplateRegistry[normalizedBehaviorName] = normalizedTemplate\n      BehaviorRegistry[normalizedBehaviorName] = BehaviorFunction\n    }\n\n    if (BehaviorStyle != null) {\n      if (BehaviorStyleElement.innerHTML.indexOf(BehaviorStyle.trim()) < 0) {\n        BehaviorStyleElement.innerHTML += BehaviorStyle\n      }\n    }\n  }\n\n/**** groupedBehaviorEntryList ****/\n\n  export type SNS_groupedBehaviorEntryList = SNS_BehaviorEntryGroup[]\n  export type SNS_BehaviorEntryGroup = {\n    GroupLabel:SNS_Textline,\n    BehaviorEntryList:SNS_BehaviorEntry[]\n  }\n  export type SNS_BehaviorEntry = {\n    Label:SNS_Textline, Name:SNS_Identifier, disabled:boolean\n  }\n\n  export function groupedBehaviorEntryList ():SNS_groupedBehaviorEntryList {\n    const Result:SNS_groupedBehaviorEntryList = []\n      function BehaviorEntriesIn (BehaviorGroup:SNS_BehaviorSetGroup):SNS_BehaviorEntryGroup {\n        const BehaviorEntryList:SNS_BehaviorEntry[] = []\n          const BehaviorSet = BehaviorGroup.BehaviorSet\n          for (let BehaviorName in BehaviorSet) {\n            BehaviorEntryList.push({\n              Label:BehaviorSet[BehaviorName].Label, Name:BehaviorName,\n              disabled:! (BehaviorName.toLowerCase() in BehaviorRegistry)\n            })\n          }\n        return { GroupLabel:BehaviorGroup.GroupLabel, BehaviorEntryList }\n      }\n\n      for (let GroupLabel in groupedBehaviorRegistry) {\n        Result.push(BehaviorEntriesIn(groupedBehaviorRegistry[GroupLabel]))\n      }\n    return Result\n  }\n\n/**** useBehavior ****/\n\n  function useBehavior (this:SNS_Visual, BehaviorName:SNS_Identifier):void {\n    expectSticker          ('visual',this)\n    expectIdentifier('behavior name',BehaviorName)\n\n    const BehaviorFunction = BehaviorRegistry[BehaviorName.toLowerCase()]\n    if (BehaviorFunction == null) throwError(\n      'NoSuchBehavior: no behavior called ' + quoted(BehaviorName) + ' found'\n    )\n\n    const reactively = (reactiveFunction:Function):void => {\n      expectFunction('reactive function',reactiveFunction)\n// @ts-ignore TS2345 do not care about the specific signature of \"reactiveFunction\"\n      registerReactiveFunctionIn(this,computed(reactiveFunction))\n    }\n\n    const onRender  = this.onRender.bind(this)\n    const onMount   = this.onMount.bind(this)\n    const onUnmount = this.onUnmount.bind(this)\n\n    BehaviorFunction.call(\n      this, this,this, SNS,JIL, this.Project.Application, html,reactively,\n      onRender,onMount,onUnmount, // onClick,onInput,onDrop\n    )\n  }\n\n/**** TemplateOfBehavior ****/\n\n  export function TemplateOfBehavior (BehaviorName:SNS_Identifier):Serializable {\n    expectIdentifier('behavior name',BehaviorName)\n\n    const normalizedBehaviorName = BehaviorName.toLowerCase()\n\n    const BehaviorFunction = BehaviorRegistry[normalizedBehaviorName]\n    if (BehaviorFunction == null) throwError(\n      'NoSuchBehavior: no behavior called ' + quoted(BehaviorName) + ' found'\n    )\n\n    return TemplateRegistry[normalizedBehaviorName]\n  }\n\n//------------------------------------------------------------------------------\n//--                           intrinsic Behaviors                            --\n//------------------------------------------------------------------------------\n\n  type IndexableSticker = SNS_Sticker & Indexable\n\n/**** plain Sticker ****/\n\n  registerBehavior('basic Views', 'plain Sticker', 'plainSticker', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    activeScript:'onRender(() => html`<div class=\"SNS Placeholder\">Script me!</div>`)',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => html`<div class=\"SNS plainSticker\"></div>`)\n  },`\n/**** plain Stickers ****/\n\n  .SNS.plainSticker {\n    border:dotted 1px gray;\n  }\n  `)\n\n/**** sticky Note ****/\n\n  registerBehavior('basic Views', 'sticky Note', 'stickyNote', {\n    Selectability:true,\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    minWidth:20, minHeight:10,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Selectability = true                       // for backwards compatibility\n\n    my.Renderer = function (PropSet:Indexable) {\n      const { builtinSelection,builtinDragging } = PropSet\n\n      const Value = acceptableText(my.Value,'')\n\n      const onKeyDown = (Event:KeyboardEvent) => {\n        if (Event.key === 'Tab') {\n          Event.stopPropagation()\n          Event.preventDefault()\n\n          const Editor = Event.target as HTMLTextAreaElement\n          const { value, selectionStart,selectionEnd } = Editor\n            Editor.value = value.slice(0,selectionStart) + '\\t' + value.slice(selectionEnd)\n          Editor.selectionStart = Editor.selectionEnd = selectionStart+1\n\n          return false\n        }\n      }\n\n      const onInput = (Event:InputEvent) => {\n        my.Value = (Event.target as HTMLTextAreaElement).value\n      }\n\n      return html`<div class=\"SNS NoteSticker\" style=${CSSStyleOfVisual(me)}\n        onPointerDown=${builtinSelection}\n      >\n        <div class=\"Header builtinDraggable\"\n          onPointerDown=${builtinDragging} onPointerMove=${builtinDragging}\n          onPointerUp=${builtinDragging} onPointerCancel=${builtinDragging}\n        />\n        <textarea class=\"Editor\" value=${Value} tabindex=-1\n          onKeyDown=${onKeyDown} onInput=${onInput}\n        ></textarea>\n      </div>`\n    }\n  },`\n/**** \"classical\" Note Stickers ****/\n\n  .SNS.NoteSticker {\n    background:ivory;\n    border:solid 1px darkgray;\n    outline:none;\n    font-family:'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-size:14px; font-weight:normal; line-height:1.4; color:black;\n  }\n\n  .SNS.NoteSticker > .Header {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; height:10px;\n    margin:0px; padding:0px;\n    background:#000000; opacity:0.3;\n  }\n\n  .SNS.NoteSticker > .Editor {\n    display:block; position:absolute;\n    left:0px; top:10px; right:0px; bottom:0px;\n    margin:0px; padding:2px;\n    background:none; border:none;\n\n    background-color:inherit; background-image:inherit;\n    font-family:inherit; font-size:inherit; font-weight:inherit;\n    line-height:inherit; color:inherit;\n\n    tab-size:10px; resize:none;\n  }\n  `)\n\n/**** Outline - e.g., for screenshot areas ****/\n\n  registerBehavior('basic Views', 'Outline', 'Outline', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function (PropSet:Indexable) {\n      return html`<div class=\"SNS Outline\"/>`\n    }\n  },`\n/**** Outline ****/\n\n  .SNS.Outline {\n    outline:dotted 1px blue;\n    outline-offset:2px;\n    pointer-events:none;\n  }\n  `)\n\n/**** Title View ****/\n\n  registerBehavior('basic Views', 'Title', 'Title', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Title',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableTextline(my.Value,'')\n      return html`<div class=\"SNS Title\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Title Views ****/\n\n  .SNS.Sticker > .SNS.Title {\n    font-size:22px; font-weight:bold; line-height:32px;\n  }\n  `)\n\n/**** Subtitle View ****/\n\n  registerBehavior('basic Views', 'Subtitle', 'Subtitle', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Subtitle',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableTextline(my.Value,'')\n      return html`<div class=\"SNS Subtitle\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Subtitle Views ****/\n\n  .SNS.Sticker > .SNS.Subtitle {\n    font-size:18px; font-weight:bold; line-height:27px;\n  }\n  `)\n\n/**** Label View ****/\n\n  registerBehavior('basic Views', 'Label', 'Label', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Label',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableTextline(my.Value,'')\n      return html`<div class=\"SNS Label\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Label Views ****/\n\n  .SNS.Sticker > .SNS.Label {\n    font-size:14px; font-weight:bold; line-height:21px;\n  }\n  `)\n\n/**** Text View ****/\n\n  registerBehavior('basic Views', 'Text', 'Text', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Text',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableText(my.Value,'')\n      return html`<div class=\"SNS Text\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** Text Views ****/\n\n  .SNS.Sticker > .SNS.Text {\n    font-size:14px; font-weight:normal; line-height:21px;\n  }\n  `)\n\n/**** FinePrint View ****/\n\n  registerBehavior('basic Views', 'FinePrint', 'FinePrint', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'FinePrint',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => {\n      const Value = acceptableText(my.Value,'')\n      return html`<div class=\"SNS FinePrint\" style=${my.CSSStyle}>${Value}</div>`\n    })\n  },`\n/**** FinePrint Views ****/\n\n  .SNS.Sticker > .SNS.FinePrint {\n    font-size:12px; font-weight:normal; line-height:18px;\n  }\n  `)\n\n/**** HTML View ****/\n\n  registerBehavior('basic Views', 'HTML View', 'HTMLView', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    Value:'<b><u>HTML View</u></b>',\n    activeScript:`\nuseBehavior('HTMLView')\n//my.Value = 'HTML Markup'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => html`<div class=\"SNS HTMLView\"\n      dangerouslySetInnerHTML=${{__html:acceptableText(my.Value,'')}}\n    />`\n  })\n\n/**** Image View ****/\n\n  registerBehavior('basic Views', 'Image View', 'ImageView', {\n    Geometry:{ x:20,y:20, Width:90,Height:90 },\n    Value:'https://www.rozek.de/Bangle.js/Mandelbrot_240x240.png',\n    activeScript:`\nuseBehavior('ImageView')\n//my.Value = 'Image URL'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => html`<img class=\"SNS ImageView\" src=${acceptableURL(my.Value,'')}/>`\n  },`\n/**** Image View ****/\n\n  .SNS.Sticker > .SNS.ImageView {\n    object-fit:contain; object-position:center;\n  }\n  `)\n\n/**** SVG View ****/\n\n  registerBehavior('basic Views', 'SVG View', 'SVGView', {\n    Geometry:{ x:20,y:20, Width:90,Height:90 },\n    activeScript:`\nuseBehavior('SVGView')\n//my.Value = 'SVG Document'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(acceptableText(my.Value,''))\n      return html`<img class=\"SNS SVGView\" src=${DataURL}/>`\n    }\n  },`\n/**** SVG View ****/\n\n  .SNS.Sticker > .SNS.SVGView {\n    object-fit:contain; object-position:center;\n  }\n  `)\n\n/**** Web View ****/\n\n  registerBehavior('basic Views', 'Web View', 'WebView', {\n    Geometry:{ x:20,y:20, Width:640,Height:480 },\n    minWidth:120, minHeight:80,\n    Value:'https://www.rozek.de',\n    activeScript:`\nuseBehavior('WebView')\n//my.Value = 'Document URL'\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => html`<iframe class=\"SNS WebView\"\n      src=${acceptableURL(my.Value,'')}\n    />`\n  })\n\n/**** Badge ****/\n\n  registerBehavior('basic Views', 'Badge', 'Badge', {\n    Geometry:{ x:20,y:20, Width:30,Height:30 },\n    Value:1, ForegroundColor:'red', BackgroundColor:'white',\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const Value = (\n        ValueIsNumber(my.Value)\n        ? ''+my.Value\n        : acceptableTextline(my.Value,'')\n      )\n      const BorderRadius = Math.round(Math.min(my.Width,my.Height/2))\n\n      return html`<div class=\"SNS Badge\" style=\"\n        border-color:${my.ForegroundColor}; border-radius:${BorderRadius}px;\n        line-height:${my.Height-4}px;\n      \">${acceptableTextline(Value,'')}</>`\n    }\n  },`\n/**** Badge ****/\n\n  .SNS.Sticker > .SNS.Badge {\n    font-size:18px; font-weight:bold; text-align:center;\n    border:solid 2px black;\n  }\n  `)\n\n/**** Icon ****/\n\n  registerBehavior('basic Views', 'Icon', 'Icon', {\n    Geometry:{ x:20,y:20, Width:24,Height:24 },\n    Value:null,\n    activeScript:`\nuseBehavior('Icon')\n//my.Value = 'icon image url'\n//onClick(() => ...)\n`,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return }\n\n      my.Value = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Value = acceptableURL(my.Value,'./icons/pencil.png')\n      const Color = acceptableColor(my.Color,'black')\n\n      return html`<div class=\"SNS Icon\" style=\"\n        -webkit-mask-image:url(${Value}); mask-image:url(${Value});\n        background-color:${Color};\n      \" disabled=${my.Enabling == false} onClick=${onClick}\n      />`\n    }\n  },`\n/**** Icon ****/\n\n  .SNS.Sticker > .SNS.Icon {\n    -webkit-mask-size:contain;           mask-size:contain;\n    -webkit-mask-position:center center; mask-position:center center;\n  }\n  `)\n\n/**** horizontalSeparator ****/\n\n  registerBehavior('basic Views', 'horizontal Separator', 'horizontalSeparator', {\n    Geometry:{ x:20,y:20, Width:80,Height:10 },\n    minWidth:10,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => html`<div class=\"SNS horizontalSeparator\"></div>`)\n  },`\n/**** horizontal Separator ****/\n\n  .SNS.horizontalSeparator {\n    border:none; border-top:solid 1px black;\n  }\n  `)\n\n\n/**** verticalSeparator ****/\n\n  registerBehavior('basic Views', 'vertical Separator', 'verticalSeparator', {\n    Geometry:{ x:20,y:20, Width:10,Height:40 },\n    minHeight:10,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onRender(() => html`<div class=\"SNS verticalSeparator\"></div>`)\n  },`\n/**** vertical Separator ****/\n\n  .SNS.verticalSeparator {\n    border:none; border-left:solid 1px black;\n  }\n  `)\n\n/**** Tab ****/\n\n  registerBehavior('basic Views', 'Tab', 'Tab')\n\n/**** IconTab ****/\n\n  registerBehavior('basic Views', 'Icon Tab', 'IconTab')\n\n/**** Button ****/\n\n  registerBehavior('native Controls', 'Button', 'Button', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:'Button',\n    activeScript:`\nuseBehavior('Button')\n//my.Value = 'Label'\n//onClick(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Label = acceptableTextline(my.Label || my.Value,'')\n\n      return html`<button class=\"SNS Button\" style=\"\n        line-height:${my.LineHeight || my.Height}px;\n      \" disabled=${my.Enabling == false} onClick=${onClick}\n      >${Label}</>`\n    }\n  },`\n/**** Button ****/\n\n  .SNS.Sticker > .SNS.Button {\n    border:solid 1px black; border-radius:4px;\n    background:white;\n    font-weight:bold; color:black;\n    text-align.center;\n  }\n  `)\n\n/**** Checkbox ****/\n\n  registerBehavior('native Controls', 'Checkbox', 'Checkbox', {\n    Geometry:{ x:20,y:20, Width:20,Height:20 },\n    Value:null,\n    activeScript:`\nuseBehavior('Checkbox')\n//my.Value = null/true/false\n//onClick(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.checked\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Value = acceptableOptionalBoolean(my.Value)\n\n      const checked       = (Value == true)\n      const indeterminate = (Value == null)\n\n      return html`<input type=\"checkbox\" class=\"SNS Checkbox\"\n        checked=${checked} indeterminate=${indeterminate}\n        disabled=${my.Enabling == false} onClick=${onClick}\n      />`\n    }\n  })\n\n/**** Radiobutton ****/\n\n  registerBehavior('native Controls', 'Radiobutton', 'Radiobutton', {\n    Geometry:{ x:20,y:20, Width:20,Height:20 },\n    Value:null,\n    activeScript:`\nuseBehavior('Radiobutton')\n//my.Value = true/false\n//onClick(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onClick (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.checked\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onClick === 'function') { my._onClick(Event) }\n    }\n\n    my.Renderer = () => {\n      const Value = acceptableBoolean(my.Value,false)\n\n      return html`<input type=\"radio\" class=\"SNS Radiobutton\"\n        checked=${Value == true}\n        disabled=${my.Enabling == false} onClick=${onClick}\n      />`\n    }\n  })\n\n/**** Gauge ****/\n\n  registerBehavior('native Controls', 'Gauge', 'Gauge', {\n    Geometry:{ x:20,y:20, Width:100,Height:20 },\n    Value:0,\n    activeScript:`\nuseBehavior('Gauge')\n//my.Value      = 0\n//my.Minimum    = 0\n//my.lowerBound = 0\n//my.Optimum    = undefined\n//my.upperBound = 1\n//my.Maximum    = 1\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const Value = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Minimum    = acceptableOptionalNumber(my.Minimum)\n      const lowerBound = acceptableOptionalNumber(my.lowerBound)\n      const Optimum    = acceptableOptionalNumber(my.Optimum)\n      const upperBound = acceptableOptionalNumber(my.upperBound)\n      const Maximum    = acceptableOptionalNumber(my.Maximum)\n\n      return html`<meter class=\"SNS Gauge\" value=${Value}\n        min=${Minimum} low=${lowerBound} opt=${Optimum}\n        high=${upperBound} max=${Maximum}\n      />`\n    }\n  })\n\n/**** Progressbar ****/\n\n  registerBehavior('native Controls', 'Progressbar', 'Progressbar', {\n    Geometry:{ x:20,y:20, Width:100,Height:10 },\n    Value:0,\n    activeScript:`\nuseBehavior('Progressbar')\n//my.Value   = 0\n//my.Maximum = 1\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = () => {\n      const Value = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Maximum = acceptableOptionalNumber(my.Maximum)\n\n      return html`<progress class=\"SNS Progressbar\" value=${Value} max=${Maximum}\n      style=\"accent-color:${my.ForegroundColor || 'dodgerblue'}\"/>`\n    }\n  },`\n/**** Progressbar ****/\n\n  .SNS.Sticker > .SNS.Progressbar {\n    -webkit-appearance:none; -moz-appearance:none; appearance:none;\n    background-color:#EEEEEE;\n  }\n  .SNS.Sticker > .SNS.Progressbar::-webkit-progress-bar {\n    background-color:#EEEEEE;\n    border:solid 1px #E0E0E0; border-radius:2px;\n  }\n  .SNS.Sticker > .SNS.Progressbar::-webkit-progress-value,\n  .SNS.Sticker > .SNS.Progressbar::-moz-progress-bar {\n    background-color:dodgerblue;\n    border:none; border-radius:2px;\n  }\n  `)\n\n/**** Slider ****/\n\n  const HashmarkPattern = /^\\s*([+-]?(\\d+([.]\\d+)?|[.]\\d+)([eE][+-]?\\d+)?|\\d*[.](?:\\d*))(?:\\s*:\\s*([^\\x00-\\x1F\\x7F-\\x9F\\u2028\\u2029\\uFFF9-\\uFFFB]+))?$/\n\n  registerBehavior('native Controls', 'Slider', 'Slider', {\n    Geometry:{ x:20,y:20, Width:100,Height:20 },\n    Value:null,\n    activeScript:`\nuseBehavior('Slider')\n//my.Value     = 0\n//my.Minimum   = undefined\n//my.Stepping  = undefined\n//my.Maximum   = undefined\n//my.Hashmarks = [0:'zero',1,2]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = 0\n\n    function HashmarkMatcher (Value:any):boolean {\n      return ValueIsStringMatching(Value,HashmarkPattern) || ValueIsNumber(Value)\n    }\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = parseFloat(Event.target.value)\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Minimum  = acceptableOptionalNumber(my.Minimum)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalNumber(my.Maximum)\n\n      const Hashmarks = acceptableOptionalListSatisfying(\n        my.Hashmarks, undefined, HashmarkMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let HashmarkList:any = '', HashmarkId\n      if ((Hashmarks != null) && (Hashmarks.length > 0)) {\n        HashmarkId = my.Id + '-Hashmarks'\n\n        HashmarkList = html`\\n<datalist id=${HashmarkId}>\n          ${Hashmarks.map((Item:string|number) => {\n            Item = ''+Item\n            const Value = Item.replace(/:.*$/,'').trim()\n            const Label = Item.replace(/^[^:]+:/,'').trim()\n\n            return html`<option value=${Value}>${Label}</option>`\n          })}\n        </datalist>`\n      }\n\n      return html`<input type=\"range\" class=\"SNS Slider\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${HashmarkId}\n      />${HashmarkList}`\n    }\n  })\n\n/**** Textline Input ****/\n\n  registerBehavior('native Controls', 'Textline Input', 'TextlineInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('TextlineInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.Pattern       = '.*'\n//my.SpellChecking = undefined\n//my.Suggestions   = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value         = acceptableTextline(my.Value,'')\n      const Placeholder   = acceptableOptionalTextline(my.Placeholder)\n      const readonly      = acceptableOptionalBoolean(my.readonly)\n      const minLength     = acceptableOptionalOrdinal(my.minLength)\n      const maxLength     = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern       = acceptableOptionalTextline(my.Pattern)\n      const SpellChecking = acceptableOptionalBoolean(my.SpellChecking)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"text\" class=\"SNS TextlineInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern} spellcheck=${SpellChecking}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** TextlineInput ****/\n\n  .SNS.Sticker > .SNS.TextlineInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.TextlineInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Password Input ****/\n\n  registerBehavior('native Controls', 'Password Input', 'PasswordInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('PasswordInput')\n//my.Value       = ''\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.minLength   = 0\n//my.maxLength   = undefined\n//my.Pattern     = '.*'\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptableTextline(my.Value,'')\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<input type=\"password\" class=\"SNS PasswordInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n      />`\n    }\n  },`\n/**** PasswordInput ****/\n\n  .SNS.Sticker > .SNS.PasswordInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.PasswordInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Number Input ****/\n\n  registerBehavior('native Controls', 'Number Input', 'NumberInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('NumberInput')\n//my.Value       = 0\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = [0,...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = 0\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = parseFloat(Event.target.value)\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:number|undefined = acceptableNumber(\n        ValueIsString(my.Value) ? parseFloat(my.Value as string) : my.Value, 0\n      )\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const Minimum     = acceptableOptionalNumber(my.Minimum)\n      const Stepping    = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum     = acceptableOptionalNumber(my.Maximum)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsNumber\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:number) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"number\" class=\"SNS NumberInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} placeholder=${Placeholder}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** NumberInput ****/\n\n  .SNS.Sticker > .SNS.NumberInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.NumberInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Phone Number Input ****/\n\n  registerBehavior('native Controls', 'Phone Number Input', 'PhoneNumberInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('PhoneNumberInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.Pattern       = '.*'\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptablePhoneNumber(my.Value,'')\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsPhoneNumber\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"tel\" class=\"SNS PhoneNumberInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** PhoneNumberInput ****/\n\n  .SNS.Sticker > .SNS.PhoneNumberInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.PhoneNumberInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** EMail Address Input ****/\n\n  registerBehavior('native Controls', 'EMail Address Input', 'EMailAddressInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('EMailAddressInput')\n//my.Value       = ''\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.minLength   = 0\n//my.maxLength   = undefined\n//my.Pattern     = '.*'\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptableTextline(my.Value,'') // not(!) acceptableEMailAddress\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsEMailAddress\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"email\" class=\"SNS EMailAddressInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** EMailAddressInput ****/\n\n  .SNS.Sticker > .SNS.EMailAddressInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.EMailAddressInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** URL Input ****/\n\n  registerBehavior('native Controls', 'URL Input', 'URLInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('URLInput')\n//my.Value       = ''\n//my.Placeholder = undefined\n//my.readonly    = false\n//my.minLength   = 0\n//my.maxLength   = undefined\n//my.Pattern     = '.*'\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value       = acceptableURL(my.Value,'')\n      const Placeholder = acceptableOptionalTextline(my.Placeholder)\n      const readonly    = acceptableOptionalBoolean(my.readonly)\n      const minLength   = acceptableOptionalOrdinal(my.minLength)\n      const maxLength   = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern     = acceptableOptionalTextline(my.Pattern)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsURL\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"url\" class=\"SNS URLInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** URLInput ****/\n\n  .SNS.Sticker > .SNS.URLInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.URLInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Time Input ****/\n\n  const TimePattern = '\\\\d{2}:\\\\d{2}'\n  const TimeRegExp  = /\\d{2}:\\d{2}/\n\n  function TimeMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,TimeRegExp)\n  }\n\n  registerBehavior('native Controls', 'Time Input', 'TimeInput', {\n    Geometry:{ x:20,y:20, Width:80,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('TimeInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, TimeRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, TimeRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, TimeRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, TimeMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"time\" class=\"SNS TimeInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${TimePattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** TimeInput ****/\n\n  .SNS.Sticker > .SNS.TimeInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.TimeInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Date and Time Input ****/\n\n  const DateTimePattern = '\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}'\n  const DateTimeRegExp  = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}/\n\n  function DateTimeMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,DateTimeRegExp)\n  }\n  registerBehavior('native Controls', 'Date and Time Input', 'DateTimeInput', {\n    Geometry:{ x:20,y:20, Width:180,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('DateTimeInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, DateTimeRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, DateTimeRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, DateTimeRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, DateTimeMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"datetime-local\" class=\"SNS DateTimeInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${DateTimePattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** DateTimeInput ****/\n\n  .SNS.Sticker > .SNS.DateTimeInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.DateTimeInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Date Input ****/\n\n  const DatePattern = '\\\\d{4}-\\\\d{2}-\\\\d{2}'\n  const DateRegExp  = /\\d{4}-\\d{2}-\\d{2}/\n\n  function DateMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,DateRegExp)\n  }\n\n  registerBehavior('native Controls', 'Date Input', 'DateInput', {\n    Geometry:{ x:20,y:20, Width:120,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('DateInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, DateRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, DateRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, DateRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, DateMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"date\" class=\"SNS DateInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${DatePattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** DateInput ****/\n\n  .SNS.Sticker > .SNS.DateInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.DateInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Week Input ****/\n\n  const WeekPattern = '\\\\d{4}-W\\\\d{2}'\n  const WeekRegExp  = /\\d{4}-W\\d{2}/\n\n  function WeekMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,WeekRegExp)\n  }\n\n  registerBehavior('native Controls', 'Week Input', 'WeekInput', {\n    Geometry:{ x:20,y:20, Width:150,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('WeekInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, WeekRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, WeekRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, WeekRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, WeekMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"week\" class=\"SNS WeekInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${WeekPattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** WeekInput ****/\n\n  .SNS.Sticker > .SNS.WeekInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.WeekInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Month Input ****/\n\n  const MonthPattern = '\\\\d{4}-\\\\d{2}'\n  const MonthRegExp  = /\\d{4}-\\d{2}/\n\n  function MonthMatcher (Value:any):boolean {\n    return ValueIsStringMatching(Value,MonthRegExp)\n  }\n\n  registerBehavior('native Controls', 'Month Input', 'MonthInput', {\n    Geometry:{ x:20,y:20, Width:150,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('MonthInput')\n//my.Value       = 0\n//my.readonly    = false\n//my.Minimum     = undefined\n//my.Stepping    = undefined\n//my.Maximum     = undefined\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value:string|undefined = acceptableOptionalStringMatching(\n        my.Value, undefined, MonthRegExp\n      )\n      const readonly = acceptableOptionalBoolean(my.readonly)\n      const Minimum  = acceptableOptionalStringMatching(my.Minimum, undefined, MonthRegExp)\n      const Stepping = acceptableOptionalNumberInRange(my.Stepping,undefined, 0)\n      const Maximum  = acceptableOptionalStringMatching(my.Maximum, undefined, MonthRegExp)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, MonthMatcher\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"month\" class=\"SNS MonthInput\"\n        value=${Value} min=${Minimum} max=${Maximum} step=${Stepping}\n        readOnly=${readonly} pattern=${MonthPattern}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** MonthInput ****/\n\n  .SNS.Sticker > .SNS.MonthInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.MonthInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** File Input ****/\n\n  registerBehavior('native Controls', 'File Input', 'FileInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('FileInput')\n//my.Value           = ''\n//my.Placeholder     = undefined\n//my.acceptableTypes = undefined\n//my.multiple        = false\n//onInput(() => ...)\n//onDrop(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Array.from(Event.target.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event,Event.target.files) }\n    }\n\n    function onDragEnter (Event:Event):void { return consumingEvent(Event) }\n    function onDragOver  (Event:Event):void { return consumingEvent(Event) }\n\n    function onDrop (Event:any):void {\n      consumeEvent(Event)\n      if (my.Enabling == false) { return }\n\n      my.Value = Array.from(Event.dataTransfer.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onDrop === 'function') { my._onDrop(Event,Event.dataTransfer.files) }\n    }                 // nota bene: \"files\" is now in \"Event.dataTransfer.files\"\n\n    my.Renderer = () => {\n      const Value           = acceptableText(my.Value,'').trim().replace(/[\\n\\r]+/g,',')\n      const Placeholder     = acceptableTextline(my.Placeholder,'').trim()\n      const acceptableTypes = acceptableOptionalTextline(my.acceptableTypes,'*')\n      const multiple        = acceptableOptionalBoolean(my.multiple)\n\n      return html`<label class=\"SNS FileInput\"\n        onDragEnter=${onDragEnter} onDragOver=${onDragOver} onDrop=${onDrop}\n      >\n        ${Value === ''\n          ? Placeholder === '' ? '' : html`<span style=\"\n              font-size:${Math.round((my.FontSize || 14)*0.95)}px; line-height:${my.Height}px\n            \">${Placeholder}</span>`\n          : html`<span style=\"line-height:${my.Height}px\">${Value}</span>`\n        }\n        <input type=\"file\" style=\"display:none\"\n          multiple=${multiple} accept=${acceptableTypes}\n          onInput=${onInput}\n        />\n      </label>`\n    }\n  },`\n/**** FileInput ****/\n\n  .SNS.Sticker > .SNS.FileInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n  .SNS.Sticker > .SNS.FileInput > span {\n    display:block; position:absolute; overflow:hidden;\n    left:0px; top:0px; width:100%; height:100%;\n    color:gray;\n    padding:0px 2px 0px 2px; white-space:pre; text-overflow:ellipsis;\n  }\n  `)\n\n/**** Pseudo File Input ****/\n\n  registerBehavior('native Controls', 'Pseudo File Input', 'PseudoFileInput', {\n    Geometry:{ x:20,y:20, Width:24,Height:24 },\n    Value:null,\n    activeScript:`\nuseBehavior('PseudoFileInput')\n//my.Value           = ''\n//my.Icon            = 'icon image url'\n//my.acceptableTypes = undefined\n//my.multiple        = false\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Array.from(Event.target.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event,Event.target.files) }\n    }\n\n    my.Renderer = () => {\n      const Icon            = acceptableURL(my.Icon,'./icons/arrow-up-from-bracket.png')\n      const Color           = acceptableColor(my.Color,'black')\n      const acceptableTypes = acceptableOptionalTextline(my.acceptableTypes,'*')\n      const multiple        = acceptableOptionalBoolean(my.multiple)\n\n      return html`<label class=\"SNS PseudoFileInput\">\n        <div style=\"\n          -webkit-mask-image:url(${Icon}); mask-image:url(${Icon});\n          background-color:${Color};\n        \"></div>\n        <input type=\"file\" style=\"display:none\"\n          multiple=${multiple} accept=${acceptableTypes}\n          onInput=${onInput}\n        />\n      </label>`\n    }\n  },`\n/**** PseudoFileInput ****/\n\n  .SNS.Sticker > .SNS.PseudoFileInput > div {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    -webkit-mask-size:contain;           mask-size:contain;\n    -webkit-mask-position:center center; mask-position:center center;\n  }\n  `)\n\n/**** File Drop Area ****/\n\n  registerBehavior('native Controls', 'File Drop Area', 'FileDropArea', {\n    Geometry:{ x:20,y:20, Width:100,Height:80 },\n    Value:null,\n    activeScript:`\nuseBehavior('FileDropArea')\n//my.Value           = ['']\n//my.Placeholder     = undefined\n//my.acceptableTypes = undefined\n//my.multiple        = false\n//onInput(() => ...)\n//onDrop(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Array.from(Event.target.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event,Event.target.files) }\n    }\n\n    function onDragEnter (Event:Event):void { return consumingEvent(Event) }\n    function onDragOver  (Event:Event):void { return consumingEvent(Event) }\n\n    function onDrop (Event:any):void {\n      consumeEvent(Event)\n      if (my.Enabling == false) { return }\n\n      my.Value = Array.from(Event.dataTransfer.files).map((File:any) => File.name).join('\\n')\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onDrop === 'function') { my._onDrop(Event,Event.dataTransfer.files) }\n    }                 // nota bene: \"files\" is now in \"Event.dataTransfer.files\"\n\n    my.Renderer = () => {\n      const Placeholder     = acceptableTextline(my.Placeholder,'').trim()\n      const acceptableTypes = acceptableOptionalTextline(my.acceptableTypes,'*')\n      const multiple        = acceptableOptionalBoolean(my.multiple)\n\n      return html`<label class=\"SNS FileDropArea\"\n        onDragEnter=${onDragEnter} onDragOver=${onDragOver} onDrop=${onDrop}>\n        <span>${Placeholder}</span>\n        <input type=\"file\"\n          multiple=${multiple} accept=${acceptableTypes}\n          onInput=${onInput}\n        />\n      </label>`\n    }\n  },`\n/**** FileDropArea ****/\n\n  .SNS.Sticker > .SNS.FileDropArea {\n    display:flex; flex-flow:column nowrap;\n      justify-content:center; align-items:center;\n    border:dashed 4px #DDDDDD; border-radius:4px;\n    color:#DDDDDD; background:white;\n  }\n\n  .SNS.Sticker > .SNS.FileDropArea * { pointer-events:none }\n\n  .SNS.Sticker > .SNS.FileDropArea > input[type=\"file\"] {\n    display:block; position:absolute; appearance:none;\n    left:0px; top:0px; right:0px; bottom:0px;\n    opacity:0.01;\n  }\n  `)\n\n/**** Search Input ****/\n\n  registerBehavior('native Controls', 'Search Input', 'SearchInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('SearchInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.Pattern       = '.*'\n//my.SpellChecking = undefined\n//my.Suggestions   = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value         = acceptableTextline(my.Value,'')\n      const Placeholder   = acceptableOptionalTextline(my.Placeholder)\n      const readonly      = acceptableOptionalBoolean(my.readonly)\n      const minLength     = acceptableOptionalOrdinal(my.minLength)\n      const maxLength     = acceptableOptionalOrdinal(my.maxLength)\n      const Pattern       = acceptableOptionalTextline(my.Pattern)\n      const SpellChecking = acceptableOptionalBoolean(my.SpellChecking)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"search\" class=\"SNS SearchInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        pattern=${Pattern} spellcheck=${SpellChecking}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** SearchInput ****/\n\n  .SNS.Sticker > .SNS.SearchInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.SearchInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** Color Input ****/\n\n  registerBehavior('native Controls', 'Color Input', 'ColorInput', {\n    Geometry:{ x:20,y:20, Width:40,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('ColorInput')\n//my.Value       = ''\n//my.Suggestions = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value = acceptableOptionalColor(my.Value)\n\n      const Suggestions = acceptableOptionalListSatisfying(\n        my.Suggestions, undefined, ValueIsColor\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      let SuggestionList:any = '', SuggestionId\n      if ((Suggestions != null) && (Suggestions.length > 0)) {\n        SuggestionId = my.Id + '-Suggestions'\n\n        SuggestionList = html`<datalist id=${SuggestionId}>\n          ${Suggestions.map((Value:string) => html`<option value=${Value}></option>`)}\n        </datalist>`\n      }\n\n      return html`<input type=\"color\" class=\"SNS ColorInput\"\n        value=${Value}\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        list=${SuggestionId}\n      />${SuggestionList}`\n    }\n  },`\n/**** ColorInput ****/\n\n  .SNS.Sticker > .SNS.ColorInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n  `)\n\n/**** DropDown ****/\n\n  registerBehavior('native Controls', 'DropDown', 'DropDown', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('DropDown')\n//my.Value   = '...'\n//my.Options = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let Value = acceptableTextline(my.Value,'')\n\n      const Options = acceptableListSatisfying(\n        my.Options, [], ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<select class=\"SNS DropDown\"\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n      >${Options.map((Option:string) => {\n          const OptionValue = Option.replace(/:.*$/,'').trim()\n          let   OptionLabel = Option.replace(/^[^:]+:/,'').trim()\n          const disabled    = (OptionLabel[0] === '-')\n            if (/^-[^-]+$/.test(OptionLabel)) {\n              OptionLabel = OptionLabel.slice(1)\n            }\n          return html`<option value=${OptionValue} selected=${OptionValue === Value}\n            disabled=${disabled}\n          >\n            ${OptionLabel}\n          </option>`\n        }\n      )}</select>`\n    }\n  },`\n/**** DropDown ****/\n\n  .SNS.Sticker > .SNS.DropDown {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n  `)\n\n/**** Pseudo DropDown ****/\n\n  registerBehavior('native Controls', 'Pseudo DropDown', 'PseudoDropDown', {\n    Geometry:{ x:20,y:20, Width:24,Height:24 },\n    Value:null,\n    activeScript:`\nuseBehavior('PseudoDropDown')\n//my.Value   = '...'\n//my.Icon    = 'icon image url'\n//my.Options = ['...',...]\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value = acceptableTextline(my.Value,'')\n      const Icon  = acceptableURL(my.Icon,'./icons/menu.png')\n      const Color = acceptableColor(my.Color,'black')\n\n      const Options = acceptableListSatisfying(\n        my.Options, [], ValueIsTextline\n      )\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<div class=\"SNS PseudoDropDown\">\n        <div style=\"\n          -webkit-mask-image:url(${Icon}); mask-image:url(${Icon});\n          background-color:${Color};\n        \"></div>\n        <select disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}>\n          ${Options.map((Option:string) => {\n            const OptionValue = Option.replace(/:.*\\$/,'').trim()\n            let   OptionLabel = Option.replace(/^[^:]+:/,'').trim()\n            const disabled    = (OptionLabel[0] === '-')\n              if (/^-[^-]+$/.test(OptionLabel)) {\n                OptionLabel = OptionLabel.slice(1)\n              }\n            return html`<option value=${OptionValue} selected=${OptionValue === Value}\n              disabled=${disabled}\n            >\n              ${OptionLabel}\n            </option>`\n          })}\n        </select>\n      </div>`\n    }\n  },`\n/**** PseudoDropDown ****/\n\n  .SNS.Sticker > .SNS.PseudoDropDown > div {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    -webkit-mask-size:contain;           mask-size:contain;\n    -webkit-mask-position:center center; mask-position:center center;\n  }\n\n  .SNS.Sticker > .SNS.PseudoDropDown > select {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n    opacity:0.01;\n  }\n  `)\n\n/**** Text Input ****/\n\n  registerBehavior('native Controls', 'Text Input', 'TextInput', {\n    Geometry:{ x:20,y:20, Width:100,Height:30 },\n    Value:null,\n    activeScript:`\nuseBehavior('TextInput')\n//my.Value         = ''\n//my.Placeholder   = undefined\n//my.readonly      = false\n//my.minLength     = 0\n//my.maxLength     = undefined\n//my.LineWrapping  = false\n//my.SpellChecking = undefined\n//onInput(() => ...)\n`,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.ValueToShow = ''\n\n    function onInput (Event:any):void {\n      if (my.Enabling == false) { return consumingEvent(Event) }\n\n      my.Value = my.ValueToShow = Event.target.value\n// @ts-ignore TS2445 well, this object *is* a subinstance of SNS_Sticker\n      if (typeof my._onInput === 'function') { my._onInput(Event) }\n    }\n\n    function onBlur () { me.rerender() }\n\n    my.Renderer = () => {\n      let   Value         = acceptableText(my.Value,'')\n      const Placeholder   = acceptableOptionalTextline(my.Placeholder)\n      const readonly      = acceptableOptionalBoolean(my.readonly)\n      const minLength     = acceptableOptionalOrdinal(my.minLength)\n      const maxLength     = acceptableOptionalOrdinal(my.maxLength)\n      const LineWrapping  = acceptableOptionalBoolean(my.LineWrapping)\n      const SpellChecking = acceptableOptionalBoolean(my.SpellChecking)\n\n      if (document.activeElement === my.View) {\n        Value = my.ValueToShow\n      } else {\n        my.ValueToShow = Value\n      }\n\n      return html`<textarea class=\"SNS TextInput\"\n        value=${Value} minlength=${minLength} maxlength=${maxLength}\n        readOnly=${readonly} placeholder=${Placeholder}\n        spellcheck=${SpellChecking} style=\"resize:none; ${\n          LineWrapping == true\n          ? 'white-space:pre; overflow-wrap:break-word; hyphens:auto'\n          : undefined\n        }\"\n        disabled=${my.Enabling == false} onInput=${onInput} onBlur=${onBlur}\n        value=${Value}\n      />`\n    }\n  },`\n/**** TextInput ****/\n\n  .SNS.Sticker > .SNS.TextInput {\n    left:1px; top:1px; right:1px; bottom:1px; width:auto; height:auto;\n    border:solid 1px #888888; border-radius:2px;\n    background:#e8f0ff;\n    padding:0px 2px 0px 2px;\n  }\n\n  .SNS.Sticker > .SNS.TextInput:read-only {\n    border:solid 1px #DDDDDD; border-radius:2px;\n    background:#F0F0F0;\n  }\n  `)\n\n/**** straightArrow_nw ****/\n\n  registerBehavior('straight Arrows', 'nw', 'straightArrow_nw', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width-6},${Height-6}, L 6,6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_n ****/\n\n  registerBehavior('straight Arrows', 'n', 'straightArrow_n', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width/2},${Height}, L ${Width/2},0\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_ne ****/\n\n  registerBehavior('straight Arrows', 'ne', 'straightArrow_ne', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M 6,${Height-6}, L ${Width-6},6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_e ****/\n\n  registerBehavior('straight Arrows', 'e', 'straightArrow_e', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M 0,${Height/2}, L ${Width},${Height/2}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_se ****/\n\n  registerBehavior('straight Arrows', 'se', 'straightArrow_se', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M 6,6, L ${Width-6},${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_s ****/\n\n  registerBehavior('straight Arrows', 's', 'straightArrow_s', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width/2},0, L ${Width/2},${Height}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_sw ****/\n\n  registerBehavior('straight Arrows', 'sw', 'straightArrow_sw', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width-6},6, L 6,${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** straightArrow_w ****/\n\n  registerBehavior('straight Arrows', 'w', 'straightArrow_w', {\n    Geometry:{ x:20,y:20, Width:40,Height:40 },\n    minWidth:12, minHeight:12,\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"4\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\"\n            d=\"M ${Width},${Height/2}, L 0,${Height/2}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** straight Arrows ****/\n\n  .SNS.straightArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw n ****/\n\n  registerBehavior('curved Arrows', 'cw n', 'curvedArrow_cw_n', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width},${Height-6}, A ${Width-6} ${Height-18} 0 0 1 6 12\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw e ****/\n\n  registerBehavior('curved Arrows', 'cw e', 'curvedArrow_cw_e', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 6,${Height}, A ${Width-18} ${Height-6} 0 0 1 ${Width-12} 6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw s ****/\n\n  registerBehavior('curved Arrows', 'cw s', 'curvedArrow_cw_s', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 0,6, A ${Width-6} ${Height-18} 0 0 1 ${Width-6} ${Height-12}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow cw w ****/\n\n  registerBehavior('curved Arrows', 'cw w', 'curvedArrow_cw_w', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width-6},0, A ${Width-18} ${Height-6} 0 0 1 12 ${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw n ****/\n\n  registerBehavior('curved Arrows', 'ccw n', 'curvedArrow_ccw_n', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 0,${Height-6}, A ${Width-6} ${Height-18} 0 0 0 ${Width-6} 12\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw e ****/\n\n  registerBehavior('curved Arrows', 'ccw e', 'curvedArrow_ccw_e', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M 6,0, A ${Width-18} ${Height-6} 0 0 0 ${Width-12} ${Height-6}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw s ****/\n\n  registerBehavior('curved Arrows', 'ccw s', 'curvedArrow_ccw_s', {\n    Geometry:{ x:20,y:20, Width:50,Height:60 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width},6, A ${Width-6} ${Height-18} 0 0 0 6 ${Height-12}\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** curvedArrow ccw w ****/\n\n  registerBehavior('curved Arrows', 'ccw w', 'curvedArrow_ccw_w', {\n    Geometry:{ x:20,y:20, Width:60,Height:50 },\n  }, (\n    me:SNS_Sticker, my:SNS_Sticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    my.Renderer = function () {\n      const { Width,Height } = my.Geometry\n      const Color = my.ForegroundColor || 'black'\n\n      const SVGSource = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"${Width}\" height=\"${Height}\"\n        >\n          <defs>\n            <marker id=\"arrow-head\" orient=\"auto\"\n              markerWidth=\"5\" markerHeight=\"4\"\n              refX=\"0\" refY=\"2\"\n            >\n              <path d=\"M0,0 V4 L5,2 Z\" fill=\"${Color}\"/>\n            </marker>\n          </defs>\n\n          <path marker-end=\"url(#arrow-head)\" stroke-width=\"3\" stroke=\"${Color}\" fill=\"none\"\n            d=\"M ${Width-6},${Height}, A ${Width-18} ${Height-8} 0 0 0 12 6\"\n          />\n        </svg>\n      `\n      const DataURL = 'data:image/svg+xml;base64,' + btoa(SVGSource)\n      return html`<img class=\"SNS straightArrow\" src=${DataURL}/>`\n    }\n  },`\n/**** curved Arrows ****/\n\n  .SNS.curvedArrow {\n    overflow:visible;\n  }\n  `)\n\n/**** Line ****/\n\n  registerBehavior('basic Shapes', 'Line', 'Line')\n\n/**** Polyline ****/\n\n  registerBehavior('basic Shapes', 'Polyline', 'Polyline')\n\n/**** Arc ****/\n\n  registerBehavior('basic Shapes', 'Arc', 'Arc')\n\n/**** quadratic Bezier ****/\n\n  registerBehavior('basic Shapes', 'quadratic Bezier', 'quadraticBezier')\n\n/**** cubic Bezier ****/\n\n  registerBehavior('basic Shapes', 'cubic Bezier', 'cubicBezier')\n\n/**** Box ****/\n\n  registerBehavior('basic Shapes', 'Box', 'Box')\n\n/**** rounded Box ****/\n\n  registerBehavior('basic Shapes', 'rounded Box', 'roundedBox')\n\n/**** Oval ****/\n\n  registerBehavior('basic Shapes', 'Oval', 'Oval')\n\n/**** Chord ****/\n\n  registerBehavior('basic Shapes', 'Chord', 'Chord')\n\n/**** Pie ****/\n\n  registerBehavior('basic Shapes', 'Pie', 'Pie')\n\n/**** Polygon ****/\n\n  registerBehavior('basic Shapes', 'Polygon', 'Polygon')\n\n/**** regular Polygon ****/\n\n  registerBehavior('basic Shapes', 'regular Polygon', 'regularPolygon')\n\n/**** horizontal Ruler ****/\n\n  registerBehavior('other Controls', 'horizontal Ruler', 'horizontalRuler', {\n    Geometry:{ x:20,y:20, Width:120,Height:40 },\n    activeScript:`\nuseBehavior('horizontalRuler')\n//my.Placement = 'above'|'below'\n    `,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    let Canvas = my.unobserved.Canvas = document.createElement('canvas')\n\n    onRender(() => {\n      const Placement = my.Placement\n\n      if (my.View == null) {\n        me.rerender()\n      } else {\n        my.View.innerHTML = ''\n        my.View.appendChild(Canvas)\n      }\n\n      const { Width,Height } = me\n\n      Canvas.width  = Width\n      Canvas.height = Height\n\n      function drawLine (x0:number,y0:number, x1:number,y1:number, Text?:any):void {\n        Context.beginPath()\n          Context.moveTo(x0,y0)\n          Context.lineTo(x1,y1)\n        Context.stroke()\n\n        if (Text != null) {\n          if (Placement === 'above') {\n            Context.fillText(Text, x0,y1-5)\n          } else {\n            Context.fillText(Text, x0,y1+5)\n          }\n        }\n      }\n\n      const Context = Canvas.getContext('2d') as CanvasRenderingContext2D\n        Context.clearRect(0,0, Width,Height)\n\n        Context.strokeStyle = my.Color || 'black'\n        Context.lineWidth   = 1\n\n        if (Placement === 'above') {\n          Context.textAlign    = 'center'\n          Context.textBaseline = 'bottom'\n\n          drawLine(0,Height, Width,Height)\n          for (let x = 0; x <= Width; x += 10) {\n            switch (true) {\n              case (x % 100 === 0): drawLine(x,Height, x,Height-15, x); break\n              case (x % 50  === 0): drawLine(x,Height, x,Height-10); break\n              default:              drawLine(x,Height, x,Height-7)\n            }\n          }\n        } else {\n          Context.textAlign    = 'center'\n          Context.textBaseline = 'top'\n\n          drawLine(0,0, Width,0)\n          for (let x = 0; x <= Width; x += 10) {\n            switch (true) {\n              case (x % 100 === 0): drawLine(x,0, x,15, x); break\n              case (x % 50  === 0): drawLine(x,0, x,10); break\n              default:              drawLine(x,0, x,7)\n            }\n          }\n        }\n      return ''\n    })\n  },`\n/**** horizontalRuler ****/\n\n  .SNS.horizontalRuler > canvas {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n  }\n  `)\n\n/**** vertical Ruler ****/\n\n  registerBehavior('other Controls', 'vertical Ruler', 'verticalRuler', {\n    Geometry:{ x:20,y:20, Width:40,Height:120 },\n    activeScript:`\nuseBehavior('verticalRuler')\n//my.Placement = 'left'|'right'\n    `,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    let Canvas = my.unobserved.Canvas = document.createElement('canvas')\n\n    onRender(() => {\n      const Placement = my.Placement\n\n      if (my.View == null) {\n        me.rerender()\n      } else {\n        my.View.innerHTML = ''\n        my.View.appendChild(Canvas)\n      }\n\n      const { Width,Height } = me\n\n      Canvas.width  = Width\n      Canvas.height = Height\n\n      function drawLine (x0:number,y0:number, x1:number,y1:number, Text?:any):void {\n        Context.beginPath()\n          Context.moveTo(x0,y0)\n          Context.lineTo(x1,y1)\n        Context.stroke()\n\n        if (Text != null) {\n          if (Placement === 'left') {\n            Context.fillText(Text, x1-5,y1)\n          } else {\n            Context.fillText(Text, x1+5,y1)\n          }\n        }\n      }\n\n      const Context = Canvas.getContext('2d') as CanvasRenderingContext2D\n        Context.clearRect(0,0, Width,Height)\n\n        Context.strokeStyle = my.Color || 'black'\n        Context.lineWidth   = 1\n\n        if (Placement === 'left') {\n          Context.textAlign    = 'right'\n          Context.textBaseline = 'middle'\n\n          drawLine(Width,0, Width,Height)\n          for (let y = 0; y <= Height; y += 10) {\n            switch (true) {\n              case (y % 100 === 0): drawLine(Width,y, Width-15,y, y); break\n              case (y % 50  === 0): drawLine(Width,y, Width-10,y); break\n              default:              drawLine(Width,y, Width-7,y)\n            }\n          }\n        } else {\n          Context.textAlign    = 'left'\n          Context.textBaseline = 'middle'\n\n          drawLine(0,0, 0,Height)\n          for (let y = 0; y <= Height; y += 10) {\n            switch (true) {\n              case (y % 100 === 0): drawLine(0,y, 15,y, y); break\n              case (y % 50  === 0): drawLine(0,y, 10,y); break\n              default:              drawLine(0,y, 7,y)\n            }\n          }\n        }\n      return ''\n    })\n  },`\n/**** verticalRuler ****/\n\n  .SNS.verticalRuler > canvas {\n    display:block; position:absolute;\n    left:0px; top:0px; right:0px; bottom:0px;\n  }\n  `)\n\n/**** flat List View ****/\n\n  registerBehavior('other Controls', 'flat List View', 'FlatListView')\n\n/**** nested List View ****/\n\n  registerBehavior('other Controls', 'nested List View', 'NestedListView')\n\n/**** QR-Code View ****/\n\n  registerBehavior('other Controls', 'QR-Code View', 'QRCodeView', {\n    Geometry:{ x:20,y:20, Width:120,Height:120 },\n    activeScript:`\nuseBehavior('QRCodeView')\n//my.Value           = '...'\n//my.ForegroundColor = 'black'\n//my.BackgroundColor = 'white'\n//my.CorrectionLevel = 'low'|'medium'|'quartile'|'high'\n    `,\n  }, (\n    me:IndexableSticker, my:IndexableSticker, SNS:Indexable, JIL:Indexable, Application:Indexable,\n    html:Function, reactively:Function,\n    onRender:Function, onMount:Function, onUnmount:Function\n  ):void => {\n    onMount(() => me.rerender())\n\n    const CorrectionLevelSet:Indexable = {\n      low:     (QRCode as Indexable).CorrectLevel.L,\n      medium:  (QRCode as Indexable).CorrectLevel.M,\n      quartile:(QRCode as Indexable).CorrectLevel.Q,\n      high:    (QRCode as Indexable).CorrectLevel.H\n    }\n\n    onRender(() => {\n      if (my.View != null) {\n        my.View.innerHTML = ''\n\n        const CorrectionLevel = (\n// @ts-ignore TS7053 allow indexing of \"CorrectionLevelSet\"\n          CorrectionLevelSet[''+my.CorrectionLevel] || QRCode.CorrectLevel.L\n        )\n        const Value = String(my.Value || 'https://github.com/rozek/shareable-note-stickers')\n        const Size  = Math.min(my.Width,my.Height)\n\n// @ts-ignore TS2351 allow construction of \"QRCode\"\n        new QRCode(my.View,{\n          text:Value,\n          width:Size, height:Size,\n          colorDark: my.ForegroundColor || 'black',\n          colorLight:my.BackgroundColor || 'white',\n          correctLevel:CorrectionLevel\n        })\n      }\n      return ''\n    })\n  })\n\n/**** CSSStyleOfVisual ****/\n\n  export function CSSStyleOfVisual (Visual:SNS_Visual):string {\n    expectVisual('visual',Visual)\n\n    let CSSStyleList:string[] = []\n      const {\n        BackgroundColor, BackgroundTexture, ForegroundColor,\n        FontFamily, FontSize, FontWeight, FontStyle, LineHeight\n      } = Visual\n\n      if (BackgroundColor != null) { CSSStyleList.push(`background-color:${BackgroundColor}`) }\n      if (BackgroundTexture != null) {\n        CSSStyleList.push(\n          `background-image:${BackgroundTexture}; background-repeat:repeat`\n        )\n      }\n      if (ForegroundColor != null) { CSSStyleList.push(`color:${ForegroundColor}`) }\n\n      if (FontFamily != null) { CSSStyleList.push(`font-family:${FontFamily}`) }\n      if (FontSize   != null) { CSSStyleList.push(`font-size:${FontSize}px`) }\n      if (FontWeight != null) { CSSStyleList.push(`font-weight:${FontWeight}`) }\n      if (FontStyle  != null) { CSSStyleList.push(`font-style:${FontStyle}`) }\n      if (LineHeight != null) { CSSStyleList.push(`line-height:${LineHeight}px`) }\n    return CSSStyleList.join(';')\n  }\n\n/**** consume/consumingEvent ****/\n\n  function consumeEvent (Event:Event):void {\n    Event.stopPropagation()\n    Event.preventDefault()\n  }\n  const consumingEvent = consumeEvent\n\n/**** propagateEvent ****/\n\n  function propagateEvent (Event:Event):void { /* nop - just a dummy */ }\n\n//------------------------------------------------------------------------------\n//--                                SNS_Visual                                --\n//------------------------------------------------------------------------------\n\n  export class SNS_Visual {\n    protected constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      this._Project = Project\n      this._Id = Id || newId()\n    }   // IMPORTANT: SNS_Project constructor will pass \"undefined\" as \"Project\"\n\n  /**** Id - for internal use only ****/\n\n    private _Id:SNS_Id\n\n    public get Id ():SNS_Id  { return this._Id }\n    public set Id (_:SNS_Id) { throwReadOnlyError('Id') }\n\n  /**** Name ****/\n\n    protected _Name:SNS_Name|undefined\n\n    public get Name ():SNS_Name|undefined { return this._Name }\n    public set Name (newName:SNS_Name|undefined) {\n      allowName('visual name',newName)\n      if (newName != null) {\n        newName = newName.trim()\n        if (newName === '') { newName = undefined }\n      }\n\n      if (this._Name !== newName) {\n        this._Name = newName\n        this._reportChange('configure',this,'Name',newName)\n        this.rerender()\n      }\n    }\n\n  /**** Project ****/\n\n    protected _Project:SNS_Project\n\n    public get Project ():SNS_Project  { return this._Project }\n    public set Project (_:SNS_Project) { throwReadOnlyError('Project') }\n\n  /**** Folder ****/\n\n    protected _Folder:SNS_Folder|undefined\n\n    public get Folder ():SNS_Folder|undefined  { return this._Folder }\n    public set Folder (_:SNS_Folder|undefined) { throwReadOnlyError('Folder') }\n\n  /**** isAttached ****/\n\n    public get isAttached ():boolean  {\n      return (this._Folder == null ? ValueIsProject(this) : this._Folder.isAttached )\n    }\n    public set isAttached (_:boolean) { throwReadOnlyError('isAttached') }\n\n  /**** Application ****/\n\n    public get Application ():Indexable  { return this._Project.Application }\n    public set Application (_:Indexable) { throwReadOnlyError('Application') }\n\n  /**** BackgroundColor ****/\n\n    protected _BackgroundColor:SNS_Color|undefined\n\n    public get BackgroundColor ():SNS_Color|undefined {\n      return (\n        this._BackgroundColor == null\n        ? this._Folder == null ? undefined : this._Folder.BackgroundColor\n        : this._BackgroundColor\n      )\n    }\n\n    public set BackgroundColor (newColor:SNS_Color|undefined) {\n      allowColor('visual background color',newColor)\n      if (this._BackgroundColor !== newColor) {\n        this._BackgroundColor = newColor\n\n        this._reportChange('configure',this,'BackgroundColor',newColor)\n        this.rerender()\n      }\n    }\n\n  /**** BackgroundTexture ****/\n\n    protected _BackgroundTexture:SNS_URL|undefined\n\n    public get BackgroundTexture ():SNS_URL|undefined {\n      return (\n        this._BackgroundTexture == null\n        ? this._Folder == null ? undefined : this._Folder.BackgroundTexture\n        : this._BackgroundTexture\n      )\n    }\n\n    public set BackgroundTexture (newTexture:SNS_URL|undefined) {\n      allowURL('visual background texture',newTexture)\n      if (this._BackgroundTexture !== newTexture) {\n        this._BackgroundTexture = newTexture\n\n        this._reportChange('configure',this,'BackgroundTexture',newTexture)\n        this.rerender()\n      }\n    }\n\n  /**** FontFamily ****/\n\n    protected _FontFamily:SNS_Textline|undefined\n\n    public get FontFamily ():SNS_Textline|undefined {\n      return (\n        this._FontFamily == null\n        ? this._Folder == null ? undefined : this._Folder.FontFamily\n        : this._FontFamily\n      )\n    }\n\n    public set FontFamily (newFontFamily:SNS_Textline|undefined) {\n      allowTextline('visual font family',newFontFamily)\n      if (this._FontFamily !== newFontFamily) {\n        this._FontFamily = newFontFamily\n\n        this._reportChange('configure',this,'FontFamily',newFontFamily)\n        this.rerender()\n      }\n    }\n\n  /**** FontSize ****/\n\n    protected _FontSize:SNS_Ordinal|undefined\n\n    public get FontSize ():SNS_Ordinal|undefined {\n      return (\n        this._FontSize == null\n        ? this._Folder == null ? undefined : this._Folder.FontSize\n        : this._FontSize\n      )\n    }\n\n    public set FontSize (newFontSize:SNS_Ordinal|undefined) {\n      allowOrdinal('visual font size',newFontSize)\n      if (this._FontSize !== newFontSize) {\n        this._FontSize = newFontSize\n\n        this._reportChange('configure',this,'FontSize',newFontSize)\n        this.rerender()\n      }\n    }\n\n  /**** FontWeight ****/\n\n    protected _FontWeight:SNS_Ordinal|undefined\n\n    public get FontWeight ():SNS_Ordinal|undefined {\n      return (\n        this._FontWeight == null\n        ? this._Folder == null ? undefined : this._Folder.FontWeight\n        : this._FontWeight\n      )\n    }\n\n    public set FontWeight (newFontWeight:SNS_Ordinal|undefined) {\n      allowIntegerInRange('visual font weight',newFontWeight, 1,1000)\n      if (this._FontWeight !== newFontWeight) {\n        this._FontWeight = newFontWeight\n\n        this._reportChange('configure',this,'FontWeight',newFontWeight)\n        this.rerender()\n      }\n    }\n\n  /**** FontStyle ****/\n\n    protected _FontStyle:SNS_FontStyle|undefined\n\n    public get FontStyle ():SNS_FontStyle|undefined {\n      return (\n        this._FontStyle == null\n        ? this._Folder == null ? undefined : this._Folder.FontStyle\n        : this._FontStyle\n      )\n    }\n\n    public set FontStyle (newFontStyle:SNS_FontStyle|undefined) {\n      allowOneOf('visual font style',newFontStyle, SNS_FontStyles)\n      if (this._FontStyle !== newFontStyle) {\n        this._FontStyle = newFontStyle\n\n        this._reportChange('configure',this,'FontStyle',newFontStyle)\n        this.rerender()\n      }\n    }\n\n  /**** LineHeight ****/\n\n    protected _LineHeight:SNS_Ordinal|undefined\n\n    public get LineHeight ():SNS_Ordinal|undefined {\n      return (\n        this._LineHeight == null\n        ? this._Folder == null ? undefined : this._Folder.LineHeight\n        : this._LineHeight\n      )\n    }\n\n    public set LineHeight (newLineHeight:SNS_Ordinal|undefined) {\n      allowOrdinal('visual line height',newLineHeight)\n      if (this._LineHeight !== newLineHeight) {\n        this._LineHeight = newLineHeight\n\n        this._reportChange('configure',this,'LineHeight',newLineHeight)\n        this.rerender()\n      }\n    }\n\n  /**** ForegroundColor ****/\n\n    protected _ForegroundColor:SNS_Color|undefined\n\n    public get ForegroundColor ():SNS_Color|undefined {\n      return (\n        this._ForegroundColor == null\n        ? this._Folder == null ? undefined : this._Folder.ForegroundColor\n        : this._ForegroundColor\n      )\n    }\n\n    public set ForegroundColor (newForegroundColor:SNS_Color|undefined) {\n      allowColor('visual foreground color',newForegroundColor)\n      if (this._ForegroundColor !== newForegroundColor) {\n        this._ForegroundColor = newForegroundColor\n\n        this._reportChange('configure',this,'ForegroundColor',newForegroundColor)\n        this.rerender()\n      }\n    }\n\n  /**** Color ****/\n\n    public get Color ():SNS_Color|undefined { return this.ForegroundColor }\n    public set Color (newColor:SNS_Color|undefined) { this.ForegroundColor = newColor }\n\n  /**** Value ****/\n\n    protected _Value:serializableValue = null\n\n    public get Value ():serializableValue  { return this._Value }\n    public set Value (newValue:serializableValue) {\n      if (ValuesDiffer(this._Value,newValue)) {\n        this._Value = newValue\n\n        this._reportChange('configure',this,'Value',newValue)\n        this.rerender()\n      }\n    }\n\n  /**** editableValue (may be overwritten) ****/\n\n    public get editableValue ():SNS_Text {\n      return (this._Value == null ? '' : ''+this._Value)\n    }                      // stringify non-literal values before returning them\n\n    public set editableValue (newValue:SNS_Text) {\n      this.Value = newValue      // parse text before setting non-literal values\n    }\n\n  /**** observed ****/\n\n// @ts-ignore TS2564 allow \"_observed\" to be assigned upon first use\n    protected _observed:Indexable\n\n    public get observed ():Indexable {\n      if (this._observed == null) {\n        this._observed = observe({},{ deep:false })\n      }\n      return this._observed\n    }\n    public set observed (_:Indexable) { throwReadOnlyError('observed') }\n\n  /**** unobserved ****/\n\n// @ts-ignore TS2564 allow \"_unobserved\" to be assigned upon first use\n    protected _unobserved:Indexable\n\n    public get unobserved ():Indexable {\n      if (this._unobserved == null) {\n        this._unobserved = {}\n      }\n      return this._unobserved\n    }\n    public set unobserved (_:Indexable) { throwReadOnlyError('unobserved') }\n\n  /**** memoized ****/\n\n// @ts-ignore TS2564 allow \"_memoized\" to be assigned upon first use\n    protected _memoized:Indexable\n\n    public get memoized ():Indexable {\n      if (this._memoized == null) {\n        this._memoized = {}\n      }\n      return this._memoized\n    }\n    public set memoized (_:Indexable) { throwReadOnlyError('memoized') }\n\n  /**** Script ****/\n\n    public get Script ():SNS_Text|undefined {\n      return (this._pendingScript == null ? this._activeScript : this._pendingScript)\n    }\n    public set Script (_:SNS_Text|undefined) { throwReadOnlyError('Script') }\n\n  /**** activeScript ****/\n\n    protected _activeScript:SNS_Text|undefined\n\n    public get activeScript ():SNS_Text|undefined {\n      return this._activeScript\n    }\n\n    public set activeScript (newScript:SNS_Text|undefined) {\n      allowText('visual script',newScript)\n      if (newScript === '') { newScript = undefined }      // no \".trim()\" here!\n\n      if (this._activeScript !== newScript) {\n        this._activeScript = newScript\n//      this.activateScript()                   // not here (because of sharing)\n\n        this._reportChange('configure',this,'activeScript',newScript)\n        this.rerender()\n      }\n    }\n\n  /**** pendingScript ****/\n\n    protected _pendingScript:SNS_Text|undefined\n\n    public get pendingScript ():SNS_Text|undefined {\n      return this._pendingScript\n    }\n\n    public set pendingScript (newScript:SNS_Text|undefined) {\n      allowText('visual script',newScript)\n      if (this._pendingScript !== newScript) {\n        this._pendingScript = newScript\n\n        this._reportChange('configure',this,'pendingScript',newScript)\n        this.rerender()\n      }\n    }\n\n  /**** activateScript ****/\n\n    public activateScript ():void {\n      let activeScript:string|undefined = (this._activeScript || '').trim()\n//    if (activeScript === '') { activeScript = undefined }\n\n      this.Error = undefined\n\n      this._Renderer = undefined\n      unregisterAllReactiveFunctionsFrom(this)\n\n      if (activeScript != null) {\n        let compiledScript\n        try {\n          compiledScript = new Function(\n            'me,my, SNS,JIL, Application, html,reactively, ' +\n            'onRender,onMount,onUnmount, onClick,onInput,onDrop, ' +\n            'useBehavior', activeScript\n          )\n        } catch (Signal:any) {\n          console.error('visual script compilation failure',Signal)\n          this.Error = {\n            Type:'Script Compilation Failure',\n            Message:''+Signal, Cause:Signal\n          }                          // also autoamtically rerenders this visual\n          return\n        }\n\n        const reactively = (reactiveFunction:Function):void => {\n          expectFunction('reactive function',reactiveFunction)\n// @ts-ignore TS2345 do not care about the specific signature of \"reactiveFunction\"\n          registerReactiveFunctionIn(this,computed(reactiveFunction))\n        }\n\n        const onRender  = this.onRender.bind(this)\n        const onMount   = this.onMount.bind(this)\n        const onUnmount = this.onUnmount.bind(this)\n\n// @ts-ignore TS7053 allow indexing for a moment\n        const onClick = (this['onClick'] || propagateEvent).bind(this)\n// @ts-ignore TS7053 allow indexing for a moment\n        const onInput = (this['onInput'] || propagateEvent).bind(this)\n// @ts-ignore TS7053 allow indexing for a moment\n        const onDrop  = (this['onDrop']  || propagateEvent).bind(this)\n\n        try {\n          compiledScript.call(\n            this, this,this, SNS,JIL, this.Project.Application, html,reactively,\n            onRender,onMount,onUnmount, onClick,onInput,onDrop,\n            useBehavior.bind(this)\n          )\n        } catch (Signal) {\n          console.error('visual script execution failure',Signal)\n          this.Error = {\n            Type:'Script Execution Failure',\n            Message:''+Signal, Cause:Signal\n          }                          // also automatically rerenders this visual\n          return\n        }\n      }\n      this.rerender()\n    }\n\n  /**** ScriptError - for internal use only ****/\n\n    protected _ScriptError:SNS_Error|undefined\n\n    public get ScriptError ():SNS_Error|undefined {\n      return (this._ScriptError == null ? undefined : { ...this._ScriptError })\n    }\n    public set ScriptError (newScriptError:SNS_Error|undefined) {\n      allowError('script error setting',newScriptError)\n      if (ValuesDiffer(this._ScriptError,newScriptError)) {\n        this._ScriptError = newScriptError\n\n        this._reportChange('configure',this,'ScriptError',newScriptError)\n        this.rerender()\n      }\n    }\n\n  /**** CSSStyle ****/\n\n    public get CSSStyle ():string  { return CSSStyleOfVisual(this) }\n    public set CSSStyle (_:string) { throwReadOnlyError('CSSStyle') }\n\n  /**** Renderer ****/\n\n    protected _Renderer:Function|undefined\n\n    public get Renderer ():Function|undefined { return this._Renderer }\n    public set Renderer (newRenderer:Function|undefined) {\n      allowFunction('visual renderer',newRenderer)\n      if (this._Renderer !== newRenderer) {\n        this._Renderer = newRenderer\n        this.rerender()\n      }\n    }\n\n  /**** onRender ****/\n\n    public onRender (newRenderer:Function):void {\n      expectFunction('renderer callback',newRenderer)\n      this.Renderer = newRenderer\n    }\n\n  /**** Rendering ****/\n\n    public Rendering (PropSet:Indexable):any {\n      if (this.hasError) {\n        return ErrorRenderer.call(this)\n      }\n\n      let Renderer = this._Renderer\n      if (Renderer == null) { return '' }\n\n      try {\n        return Renderer.call(this,PropSet)\n      } catch (Signal:any) {\n        this.Error = {\n          Type:'Rendering Failure',\n          Message:''+Signal, Cause:Signal\n        }\n        return ErrorRenderer.call(this)\n      }\n    }\n\n  /**** rerender (to be overwritten) ****/\n\n// @ts-ignore TS2564 allow \"Board\" and \"Sticker\" to be never read\n    public rerender (Board?:SNS_Board, Sticker?:SNS_Sticker):void {\n      /* to be overwritten */\n    }\n\n  /**** View ****/\n\n    private _View:HTMLElement|undefined\n\n    public get View ():HTMLElement|undefined { return this._View }\n    public set View (_:HTMLElement)          { throwReadOnlyError('View') }\n\n  /**** isMounted ****/\n\n    public get isMounted ():boolean  { return (this._View != null) }\n    public set isMounted (_:boolean) { throwReadOnlyError('isMounted') }\n\n  /**** onMount ****/\n\n    protected _onMount:Function|undefined\n\n    public onMount (newCallback:Function|undefined):void {\n      allowFunction('\"onMount\" callback',newCallback)\n      if (newCallback == null) {\n        this._onMount = undefined\n      } else {\n        this._onMount = () => {\n          try {\n            newCallback.call(this)\n          } catch (Signal:any) {\n            this.Error = {\n              Type:'\"onMount\" Callback Failure',\n              Message:''+Signal, Cause:Signal\n            }\n            this.rerender()\n          }\n        }\n      }\n    }\n\n  /**** onUnmount ****/\n\n    protected _onUnmount:Function|undefined\n\n    public onUnmount (newCallback:Function|undefined):void {\n      allowFunction('\"onUnmount\" callback',newCallback)\n      if (newCallback == null) {\n        this._onUnmount = undefined\n      } else {\n        this._onUnmount = () => {\n          try {\n            newCallback.call(this)\n          } catch (Signal:any) {\n            this.Error = {\n              Type:'\"onUnmount\" Callback Failure',\n              Message:''+Signal, Cause:Signal\n            }\n          }\n        }\n      }\n    }\n\n  /**** Error - for internal use only ****/\n\n    protected _Error:SNS_Error|undefined\n\n    public get Error ():SNS_Error|undefined {\n      return (this._Error == null ? undefined : {...this._Error})\n    }\n    public set Error (newError:SNS_Error|undefined) {\n      allowError('error setting',newError)\n      if (ValuesDiffer(this._Error,newError)) {\n        this._Error = newError\n\n        this._reportChange('configure',this,'Error',newError)\n        this.rerender()\n      }\n    }\n\n  /**** hasError ****/\n\n    public get hasError ():boolean  { return (this._Error != null) }\n    public set hasError (_:boolean) { throwReadOnlyError('hasError') }\n\n  /**** _reportChange ****/\n\n    /* protected */ _reportChange (\n      Change:SNS_Change|'configure', ...ArgList:any[]\n    ):void {\n// @ts-ignore TS2556 what is this error good for?\n      this._Project._reportChange(Change, ...ArgList)\n    }\n\n  /**** _serializeConfigurationInto ****/\n\n    protected _serializeConfigurationInto (Serialization:Serializable):void {\n      Serialization.Id = this.Id                                 // special case\n\n      const serializeProperty = (Name:string) => {\n// @ts-ignore TS7053 allow indexing of \"this\"\n        if (this['_'+Name] != null) {\n// @ts-ignore TS7053 allow indexing of \"this\" and \"Serialization\"\n          Serialization[Name] = this[Name]\n        }\n      }\n\n      ;[\n        'Name','BackgroundColor','BackgroundTexture',\n        'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n        'ForegroundColor',\n        'memoized','Value','activeScript','pendingScript',\n      ].forEach((Name:string) => serializeProperty(Name))\n    }\n\n  /**** _deserializeConfigurationFrom ****/\n\n    protected _deserializeConfigurationFrom (Serialization:Serializable):void {\n      const deserializeProperty = (Name:string) => {\n        if (Serialization[Name] != null) {\n          try {\n// @ts-ignore TS7053 allow indexing of \"this\" and \"Serialization\"\n            this[Name] = Serialization[Name]   // also validates the given value\n          } catch (Signal:any) {\n            console.warn(\n              'DeserializationError:invalid value for property ' + quoted(Name)\n            )\n          }\n        }\n      }\n\n      deserializeProperty('activeScript')            // e.g., for custom setters\n\n      ;[\n        'Name','BackgroundColor','BackgroundTexture',\n        'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n        'ForegroundColor',\n        /*'memoized',*/'Value','activeScript','pendingScript',\n      ].forEach((Name:string) => deserializeProperty(Name))\n\n      if (ValueIsPlainObject(Serialization.memoized)) {\n        try {\n          Object.assign(this.memoized,Serialization.memoized)\n        } catch (Signal:any) {\n          console.warn(\n            'DeserializationError:invalid value for property \"memoized\"'\n          )\n        }\n      }\n    }   // deserializing \"activeScript\" also automatically activates that script\n  }\n\n//------------------------------------------------------------------------------\n//--                                SNS_Folder                                --\n//------------------------------------------------------------------------------\n\n  export class SNS_Folder extends SNS_Visual {\n    protected constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      super(Project, Id)\n    }   // IMPORTANT: SNS_Project constructor will pass \"undefined\" as \"Project\"\n\n  /**** Path ****/\n\n    public get Path ():SNS_Textline  {\n      const outerFolder = this._Folder\n      if (outerFolder == null) {\n        return '|'\n      } else {\n        const localPath = this.Name || ('#' + this.Index)\n        const outerPath = outerFolder.Path\n        return (outerPath === '|' ? '' : outerPath) + '|' + localPath\n      }\n    }\n    public set Path (_:SNS_Textline) { throwReadOnlyError('Path') }\n\n  /**** BoardAtPath ****/\n\n    public BoardAtPath (Path:SNS_Textline):SNS_Board|undefined {\n      expectTextline('board path',Path)\n\n      Path = Path.trim()\n      if (Path === '') {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n        return (this._Folder == null ? undefined : this as SNS_Board)\n      }\n\n      if (Path.startsWith('|')) {        // let \"Project\" process absolute paths\n        return this._Project.BoardAtPath(Path.replace(/^(\\s*\\|)*/,''))\n      }\n\n      Path = Path.replace(/\\|+/g,'|')        // reduce multiple consecutive \"|\"s\n\n      const splitPath:(string|number)[] = Path.split('|').map(\n        (Element:string) => Element.trim()      // eliminate leading/trailing ws\n      ).map(\n        (Element:string) => (/^#\\d+$/.test(Element)    // disting. names/indices\n          ? parseInt(Element.slice(1),10)\n          : Element\n        )\n      )\n\n      let Result:SNS_Board|undefined\n        for (let i = 0, l = splitPath.length; i < l; i++) {\n          const Element:string|number = splitPath[i]\n          if (typeof Element === 'number') {\n            Result = (Result || this).BoardAt(Element)\n          } else {\n            Result = (Result || this).BoardNamed(Element)\n          }\n          if (Result == null) { return undefined }\n        }\n      return Result\n    }\n\n  /**** IndexPath ****/\n\n    public get IndexPath ():SNS_Ordinal[]  {\n      const outerFolder = this._Folder\n      if (outerFolder == null) {\n        return []\n      } else {\n        return outerFolder.IndexPath.concat(this.Index)\n      }\n    }\n    public set IndexPath (_:SNS_Ordinal[]) { throwReadOnlyError('IndexPath') }\n\n  /**** SnapToGrid - inherited from outer folders ****/\n\n    protected _SnapToGrid:boolean|undefined\n\n    public get SnapToGrid ():boolean {\n      return (\n        ! this._SnapToGrid\n        ? this._Folder == null ? false : this._Folder.SnapToGrid\n        : this._SnapToGrid == true\n      )\n    }\n\n    public set SnapToGrid (newSetting:boolean|undefined) {\n      allowBoolean('snap-to-grid setting',newSetting)\n      if (this._SnapToGrid !== newSetting) {\n        this._SnapToGrid = newSetting\n\n        this._reportChange('configure',this,'SnapToGrid',newSetting)\n        this.rerender()\n      }\n    }\n\n  /**** GridWidth ****/\n\n    protected _GridWidth:SNS_Cardinal|undefined\n\n    public get GridWidth ():SNS_Cardinal {\n      return (\n        this._GridWidth == null\n        ? this._Folder == null ? defaultGridWidth : this._Folder.GridWidth\n        : this._GridWidth\n      )\n    }\n\n    public set GridWidth (newWidth:SNS_Cardinal|undefined) {\n      allowCardinal('snap-to-grid width',newWidth)\n      if (this._GridWidth !== newWidth) {\n        this._GridWidth = newWidth\n\n        this._reportChange('configure',this,'GridWidth',newWidth)\n        this.rerender()\n      }\n    }\n\n  /**** GridHeight ****/\n\n    protected _GridHeight:SNS_Cardinal|undefined\n\n    public get GridHeight ():SNS_Cardinal {\n      return (\n        this._GridHeight == null\n        ? this._Folder == null ? defaultGridHeight : this._Folder.GridHeight\n        : this._GridHeight\n      )\n    }\n\n    public set GridHeight (newHeight:SNS_Cardinal|undefined) {\n      allowCardinal('snap-to-grid height',newHeight)\n      if (this._GridHeight !== newHeight) {\n        this._GridHeight = newHeight\n\n        this._reportChange('configure',this,'GridHeight',newHeight)\n        this.rerender()\n      }\n    }\n\n  /**** Index ****/\n\n    public get Index ():number  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? -1 : this._Folder.IndexOfBoard(this))\n    }\n    public set Index (_:number) { throwReadOnlyError('Index') }\n\n  /**** mayBeShiftedUp ****/\n\n    public get mayBeShiftedUp ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardUp(this))\n    }\n    public set mayBeShiftedUp (_:boolean) { throwReadOnlyError('mayBeShiftedUp') }\n\n  /**** mayBeShiftedDown ****/\n\n    public get mayBeShiftedDown ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardDown(this))\n    }\n    public set mayBeShiftedDown (_:boolean) { throwReadOnlyError('mayBeShiftedDown') }\n\n  /**** mayBeShiftedIn ****/\n\n    public get mayBeShiftedIn ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardIn(this))\n    }\n    public set mayBeShiftedIn (_:boolean) { throwReadOnlyError('mayBeShiftedIn') }\n\n  /**** mayBeShiftedOut ****/\n\n    public get mayBeShiftedOut ():boolean  {\n// @ts-ignore TS2322 a \"Folder\" with no outer folder is a \"Board\"\n      return (this._Folder == null ? false : this._Folder.mayShiftBoardOut(this))\n    }\n    public set mayBeShiftedOut (_:boolean) { throwReadOnlyError('mayBeShiftedOut') }\n\n  /**** containsFolder ****/\n\n    public containsFolder (Folder:SNS_Folder):boolean {\n      expectFolder('folder',Folder)\n\n      Folder = Folder.Folder as SNS_Folder\n        while (Folder != null) {\n          if (Folder === this) { return true }\n          Folder = Folder.Folder as SNS_Folder\n        }\n      return false\n    }\n\n  /**** BoardList ****/\n\n    protected _BoardList:SNS_Board[] = []\n\n    public get BoardList ():SNS_Board[]  { return this._BoardList.slice() }\n    public set BoardList (_:SNS_Board[]) { throwReadOnlyError('BoardList') }\n\n  /**** BoardCount ****/\n\n    public get BoardCount ():number  { return this._BoardList.length }\n    public set BoardCount (_:number) { throwReadOnlyError('BoardCount') }\n\n  /**** IndexOfBoard ****/\n\n    public IndexOfBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):number {\n      const Board = this.Board(BoardOrNameOrIndex)\n      if (Board == null) { return -1 }\n\n      return this._BoardList.indexOf(Board)\n    }\n\n  /**** Board ****/\n\n    public Board (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):SNS_Board|undefined {\n      expectValue('board, name or index',BoardOrNameOrIndex)\n\n      switch (true) {\n        case ValueIsBoard(BoardOrNameOrIndex):\n          const Board = BoardOrNameOrIndex as SNS_Board\n          return (Board._Folder === this ? Board : undefined)\n        case ValueIsInteger(BoardOrNameOrIndex):\n          let Index = BoardOrNameOrIndex as number\n          if (Index < 0) { Index += this._BoardList.length }\n          return this._BoardList[Index]\n        case ValueIsName(BoardOrNameOrIndex):\n          return this.BoardNamed(BoardOrNameOrIndex as SNS_Name)\n      }\n\n      throwError(\n        'InvalidArgument: no valid board, board name or board index given'\n      )\n    }\n\n  /**** existingBoard ****/\n\n    public existingBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):SNS_Board {\n      let Board = this.Board(BoardOrNameOrIndex)\n        if (Board == null) throwError(\n          'BoardNotFound: the desired board could not be found'\n        )\n      return Board\n    }\n\n  /**** BoardNamed ****/\n\n    public BoardNamed (Name:SNS_Name):SNS_Board|undefined {\n      expectName('SNS board name',Name)\n      Name = Name.trim().toLowerCase()\n\n      let Result:SNS_Board|undefined = undefined\n        this._BoardList.forEach((Board:SNS_Board) => {\n          if (\n            (Result == null) &&\n            (Board.Name != null) && (Board.Name.toLowerCase() === Name)\n          ) {\n            Result = Board\n          }\n        })\n      return Result\n    }\n\n  /**** BoardAt ****/\n\n    public BoardAt (Index:number):SNS_Board|undefined {\n      expectInteger('SNS board index',Index)\n      if (Index < 0) { Index += this._BoardList.length }\n      return this._BoardList[Index]\n    }\n\n  /**** hasBoard ****/\n\n    public hasBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      return (this.Board(BoardOrNameOrIndex) != null)\n    }\n\n  /**** newBoardAt ****/\n\n    public newBoardAt (Index?:number, Id?:SNS_Id):SNS_Board {\n      return (\n        Id == null\n        ? this.BoardDeserializedAt({},Index)\n        : this.BoardDeserializedAt({ Id },Index)\n      )\n    }\n\n  /**** BoardDeserializedAt - nota bene: needs explicit script activation! ****/\n\n    public BoardDeserializedAt (Serialization:Serializable, Index?:number):SNS_Board {\n      expectSerializable('board serialization',Serialization)\n      allowInteger     ('board insertionindex',Index)\n\n      if (Index == null) {\n        Index = this._BoardList.length\n      } else {\n        if (Index < 0) { Index += this._BoardList.length }\n        Index = Math.max(0,Math.min(Index,this._BoardList.length))\n      }\n\n      const Id = allowedId('board id',Serialization.Id)\n\n      let newBoard = new SNS_Board(this._Project, Id)        // registers itself\n        this._attachBoardAt(newBoard,Index)\n\n        newBoard._deserializeConfigurationFrom(Serialization)\n// @ts-ignore TS2445 \"newBoard\" *IS* an SNS_Board\n        newBoard._deserializeStickersFrom(Serialization)\n// @ts-ignore TS2445 \"newBoard\" *IS* an SNS_Board\n        newBoard._deserializeBoardsFrom(Serialization)\n\n        this.rerender()\n      return newBoard\n    }\n\n  /**** DuplicateOfBoardAt ****/\n\n    public DuplicateOfBoardAt (Index:number):SNS_Board {\n      expectInteger('board index',Index)\n      const Board = this.existingBoard(Index)                             // DRY\n      const Serialization = Board.Serialization\n        removeIdsFrom(Serialization)\n      return this.BoardDeserializedAt(Serialization,Index+1)\n    }\n\n  /**** mayShiftBoardUp/Down ****/\n\n    public mayShiftBoardUp (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      return (this._BoardList.indexOf(Board) > 0)\n    }\n\n    public mayShiftBoardDown (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n\n      const BoardList  = this._BoardList\n      const BoardIndex = BoardList.indexOf(Board)\n      return (BoardIndex >= 0) && (BoardIndex < BoardList.length-1)\n    }\n\n  /**** shiftBoardToTop ****/\n\n    public shiftBoardToTop (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardUp(Board)) {                       // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,0)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardUp ****/\n\n    public shiftBoardUp (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardUp(Board)) {                       // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,oldIndex-1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardDown ****/\n\n    public shiftBoardDown (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardDown(Board)) {                     // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,oldIndex+1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardToBottom ****/\n\n    public shiftBoardToBottom (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardDown(Board)) {                     // keeps code DRY\n        const oldIndex = this._BoardList.indexOf(Board)\n        this._detachBoardAt(oldIndex)\n        this._attachBoardAt(Board,this._BoardList.length)\n        this.rerender()\n      }\n    }\n\n  /**** shiftBoardTo ****/\n\n    public shiftBoardTo (\n      BoardOrNameOrIndex:SNS_Board|SNS_Name|number, newIndex:number\n    ):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n\n      expectInteger('SNS board index',newIndex)\n      if (newIndex < 0) { newIndex += this._BoardList.length }\n      newIndex = Math.max(0,Math.min(newIndex,this._BoardList.length))\n\n      const oldIndex = this._BoardList.indexOf(Board)\n      if (oldIndex === newIndex) { return }\n\n      this._detachBoardAt(oldIndex)\n      this._attachBoardAt(Board,newIndex)\n\n      this.rerender()\n    }\n\n  /**** shiftBoardsByIndex ****/\n\n    public shiftBoardsByIndex (\n      oldIndex:number, newIndex:number, Count:number\n    ):void {\n      const BoardCount = this._BoardList.length\n\n      expectIntegerInRange('old index',oldIndex,0,BoardCount)\n      expectIntegerInRange('new index',newIndex,0,BoardCount)\n\n      const BoardsToShift = this._BoardList.slice(oldIndex,oldIndex+Count)\n      BoardsToShift.forEach((_:any) => this._detachBoardAt(oldIndex))\n\n      if (newIndex > oldIndex) { newIndex -= Count }\n      BoardsToShift.forEach(\n        (Board:SNS_Board,i:number) => this._attachBoardAt(Board,newIndex+i)\n      )\n\n      this.rerender()\n    }\n\n  /**** mayShiftBoardIn/Out ****/\n\n    public mayShiftBoardIn (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      return this.mayShiftBoardDown(Board)                                // DRY\n    }\n\n    public mayShiftBoardOut (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):boolean {\n      return (this._Folder != null)\n    }\n\n  /**** shiftBoardIn ****/\n\n    public shiftBoardIn (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardIn(Board)) {                       // keeps code DRY\n        const oldIndex  = this._BoardList.indexOf(Board)\n        const newFolder = this._BoardList[oldIndex+1]\n\n        this._detachBoardAt(oldIndex)\n        newFolder._attachBoardAt(Board,0)\n\n        this.rerender()\n        newFolder.rerender()\n      }\n    }\n\n  /**** shiftBoardOut ****/\n\n    public shiftBoardOut (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      if (this.mayShiftBoardOut(Board)) {                      // keeps code DRY\n        const oldIndex  = this._BoardList.indexOf(Board)\n        const newFolder = this._Folder as SNS_Folder\n\n        this._detachBoardAt(oldIndex)\n        newFolder._attachBoardAt(Board,newFolder.Index)\n\n        this.rerender()\n        newFolder.rerender()\n      }\n    }\n\n  /**** mayMoveBoardTo ****/\n\n    public mayMoveBoardTo (\n      BoardOrNameOrIndex:SNS_Board|SNS_Name|number,\n      FolderOrNameOrIndex:SNS_Folder|SNS_Name|number, Index?:number\n    ):boolean {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      const Folder = (\n        ValueIsFolder(FolderOrNameOrIndex)\n        ? FolderOrNameOrIndex as SNS_Folder\n        : this.existingBoard(FolderOrNameOrIndex as SNS_Name|number)\n      )\n      allowInteger('insertion index',Index)\n\n      return (\n        Folder.isAttached && (Folder !== Board) && ! Board.containsFolder(Folder)\n      )\n    }\n\n  /**** moveBoardTo ****/\n\n    public moveBoardTo (\n      BoardOrNameOrIndex:SNS_Board|SNS_Name|number,\n      FolderOrNameOrIndex:SNS_Folder|SNS_Name|number, Index?:number\n    ):void {\n      const Board = this.existingBoard(BoardOrNameOrIndex)\n      const newFolder = (\n        ValueIsFolder(FolderOrNameOrIndex)\n        ? FolderOrNameOrIndex as SNS_Folder\n        : this.existingBoard(FolderOrNameOrIndex as SNS_Name|number)\n      )\n      allowInteger('insertion index',Index)\n\n      if (\n        newFolder.isAttached && (newFolder !== Board) &&\n        ! Board.containsFolder(newFolder)\n      ) {\n        const oldIndex = this._BoardList.indexOf(Board)\n\n        let newIndex = (Index == null ? newFolder.BoardCount : Index)\n        if (newIndex < 0) { newIndex += newFolder.BoardCount }\n        newIndex = Math.max(0, Math.min(newIndex,newFolder.BoardCount))\n\n        this._detachBoardAt(oldIndex)\n        newFolder._attachBoardAt(Board,newIndex)\n\n        this.rerender()\n        newFolder.rerender()\n      }\n    }\n\n  /**** destroyBoard ****/\n\n    public destroyBoard (BoardOrNameOrIndex:SNS_Board|SNS_Name|number):void {\n      const Board = this.Board(BoardOrNameOrIndex)\n      if (Board == null) {\n        if (ValueIsBoard(BoardOrNameOrIndex)) throwError(\n          'NoSuchBoard: the given board could not be found'\n        )\n        return\n      }\n\n      ;(Board as SNS_Board).clear()\n      unregisterAllReactiveFunctionsFrom(Board as SNS_Board)\n\n      const oldIndex = this._BoardList.indexOf(Board as SNS_Board)\n      this._detachBoardAt(oldIndex)\n\n      unregisterFolder(Board)\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n      Board._Project = undefined         // detaches this board from the project\n\n      this._reportChange('destroyBoard',Board)\n      this.rerender()\n    }\n\n  /**** clear ****/\n\n    public clear ():void {\n      for (let i = 0, l = this._BoardList.length; i < l; i++) {\n        this.destroyBoard(this._BoardList[0])\n      }\n    }\n\n  /**** _attachBoardAt ****/\n\n    /* protected */ _attachBoardAt (Board:SNS_Board, Index:number):void {\n      Board._Folder = this\n      this._BoardList.splice(Index,0, Board)\n      this._reportChange('attachBoard', Board, this, Index)\n    }\n\n  /**** _detachBoardAt ****/\n\n    /* protected */ _detachBoardAt (Index:number):void {\n      const Board = this._BoardList.splice(Index,1)[0]\n      Board._Folder = undefined\n      this._reportChange('detachBoard', Board, this, Index)\n    }\n\n  /**** _serializeConfigurationInto ****/\n\n    protected _serializeConfigurationInto (Serialization:Serializable):void {\n      super._serializeConfigurationInto(Serialization)\n\n      const serializeProperty = (Name:string) => {\n// @ts-ignore TS7053 allow indexing of \"this\"\n        if (this['_'+Name] != null) {\n// @ts-ignore TS7053 allow indexing of \"Serialization\"\n          Serialization[Name] = this[Name]\n        }\n      }\n\n      ;[\n        'SnapToGrid','GridWidth','GridHeight',\n      ].forEach((Name:string) => serializeProperty(Name))\n    }\n\n  /**** _deserializeConfigurationFrom ****/\n\n    protected _deserializeConfigurationFrom (Serialization:Serializable):void {\n      super._deserializeConfigurationFrom(Serialization)\n\n      const deserializeProperty = (Name:string) => {\n        if (Serialization[Name] != null) {\n          try {\n// @ts-ignore TS7053 allow indexing of \"this\"\n            this[Name] = Serialization[Name]   // also validates the given value\n          } catch (Signal:any) {\n            console.warn(\n              'DeserializationError:invalid value for property ' + quoted(Name)\n            )\n          }\n        }\n      }\n\n      ;[\n        'SnapToGrid','GridWidth','GridHeight',\n      ].forEach((Name:string) => deserializeProperty(Name))\n    }\n\n  /**** _serializeBoardsInto ****/\n\n    protected _serializeBoardsInto (Serialization:Serializable):void {\n      const BoardList = this._BoardList.slice()\n      if (BoardList.length > 0) {\n        Serialization.BoardList = BoardList.map(\n          (Board:SNS_Board) => Board.Serialization\n        )\n      }\n    }\n\n  /**** _deserializeBoardsFrom ****/\n\n    protected _deserializeBoardsFrom (Serialization:Serializable):void {\n      const BoardList = this._BoardList\n      if (BoardList.length > 0) { this.clear() }\n\n      if (\n        ValueIsListSatisfying(Serialization.BoardList,ValueIsPlainObject) &&\n        ((Serialization.BoardList as any[]).length > 0)\n      ) {\n        (Serialization.BoardList as Serializable[]).forEach(\n          (BoardSerialization:Serializable, Index:number) => {\n            this.BoardDeserializedAt(BoardSerialization,Index)\n          }\n        )\n      }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                               SNS_Project                                --\n//------------------------------------------------------------------------------\n\n  const SNS_ProjectPropertySet:Indexable = Object.create(null)\n    ;[\n      'Name','BackgroundColor','BackgroundTexture',\n      'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n      'ForegroundColor',\n      'memoized','Value','activeScript','pendingScript',\n      'SnapToGrid','GridWidth','GridHeight',\n    ].forEach((Property:string) => SNS_ProjectPropertySet[Property] = true)\n\n  export class SNS_Project extends SNS_Folder {\n    protected constructor (Name:SNS_Name) {\n// @ts-ignore TS2345 allow \"undefined\" here, as \"this\" is not possible\n      super(undefined,undefined)\n      this._Project = this // n.b. \"this\" must not be passed to \"super\"\n\n      expectName('project name',Name)\n      this._Name = Name\n    }\n\n  /**** Name ****/\n\n    public get Name ():SNS_Name|undefined  { return this._Name }\n    public set Name (_:SNS_Name|undefined) { throwReadOnlyError('Name') }\n\n  /**** IndexPath ****/\n\n    public get IndexPath ():SNS_Ordinal[]  { return [] }\n    public set IndexPath (_:SNS_Ordinal[]) { throwReadOnlyError('IndexPath') }\n\n  /**** BoardAtIndexPath ****/\n\n    public BoardAtIndexPath (IndexPath:SNS_Ordinal[]):SNS_Board|undefined {\n      expectListSatisfying('board index path',IndexPath,ValueIsOrdinal)\n\n      if (IndexPath.length === 0) {\n        return undefined\n      } else {\n        let Result:SNS_Board|undefined\n          for (let i = 0, l = IndexPath.length; i < l; i++) {\n            Result = (Result || this).BoardAt(IndexPath[i])\n            if (Result == null) { return undefined }\n          }\n        return Result\n      }\n    }\n\n  /**** FolderWithId ****/\n\n    public FolderWithId (Id:SNS_Id):SNS_Folder|undefined {\n      expectId('folder id',Id)\n      return FolderWithId(this,Id)\n    }\n\n  /**** BoardWithId ****/\n\n    public BoardWithId (Id:SNS_Id):SNS_Board|undefined {\n      const Folder = FolderWithId(this,Id)\n      if (ValueIsProject(Folder)) throwError(\n        'NotABoard: the folder with the given id is not a board, but the project'\n      )\n\n      return Folder as SNS_Board\n    }\n\n  /**** StickerWithId ****/\n\n    public StickerWithId (Id:SNS_Id):SNS_Sticker|undefined {\n      expectId('sticker id',Id)\n      return StickerWithId(this,Id)\n    }\n\n  /**** recursivelyActivateAllScripts ****/\n\n    public recursivelyActivateAllScripts ():void {\n      this.activateScript();\n\n      this._BoardList.forEach(\n        (Board:SNS_Board) => Board.recursivelyActivateAllScripts()\n      )\n    }\n\n  /**** onChange ****/\n\n    protected _onChange:SNS_onChangeCallback[] = []\n\n    public onChange (Callback:SNS_onChangeCallback):void {\n      expectFunction('\"onChange\" callback',Callback)\n      this._onChange.push(Callback)\n    }\n\n  /**** _reportChange ****/\n\n    /* protected */ _reportChange (\n      Change:SNS_Change|'configure', Visual:SNS_Visual, ...ArgList:any[]\n    ):void {\n      if (Change === 'configure') {\n        Change = ValueIsFolder(Visual) ? 'configureFolder' : 'configureSticker'\n      }\n\n      ArgList.unshift(this, Change, Visual)\n      this._onChange.forEach(\n// @ts-ignore TS2345 skip checking of individual \"ArgList\" elements\n        (Callback:SNS_onChangeCallback) => Callback.apply(this,ArgList)\n      )\n    }\n\n  /**** onRendering ****/\n\n    protected _onRendering:SNS_onRenderingCallback[] = []\n\n    public onRendering (Callback:SNS_onRenderingCallback):void {\n      expectFunction('\"onRendering\" callback',Callback)\n      this._onRendering.push(Callback)\n    }\n\n  /**** rerender - warning: semantics differs from that of other visuals ****/\n\n    public rerender (Board?:SNS_Board, Sticker?:SNS_Sticker):void {\n      this._onRendering.forEach(\n        (Callback:SNS_onRenderingCallback) => Callback(this, Board, Sticker)\n      )\n    }\n\n  /**** onError ****/\n\n    protected _onError:SNS_onErrorCallback[] = []\n\n    public onError (Callback:SNS_onErrorCallback):void {\n      expectFunction('\"onError\" callback',Callback)\n      this._onError.push(Callback)\n    }\n\n  /**** showError ****/\n\n    public showError (Visual:SNS_Visual, Error:SNS_Error):void {\n      this._onError.forEach(\n        (Callback:SNS_onErrorCallback) => Callback(this, Visual, Error)\n      )\n    }\n\n  /**** Application ****/\n\n    private _Application:Indexable = {}\n\n    public get Application ():Indexable  { return { ...this._Application } }\n    public set Application (newInterface:Indexable) {\n      if (! ObjectIsEmpty(this._Application)) throwError(\n        'AlreadySet: the \"Application\" interface has already been set'\n      )\n\n      expectSerializable('application interface',newInterface)\n      if (ObjectIsEmpty(newInterface)) throwError(\n        'InvalidArgument: the given application interface is empty'\n      )\n\n      this._Application = { ...newInterface }\n    }\n\n  /**** Serialization ****/\n\n    public get Serialization ():Serializable {\n      const Result:Serializable = {}\n        this._serializeConfigurationInto(Result)\n        this._serializeBoardsInto(Result)\n\n        delete Result.Id               // do not serialize the \"Id\" of a project\n      return Result\n    }\n    public set Serialization (_:Serializable) { throwReadOnlyError('Serialization') }\n\n  /**** deserializedFrom - nota bene: needs explicit script activation! ****/\n\n    public static deserializedFrom (\n      Name:SNS_Name, Serialization:Serializable\n    ):SNS_Project {\n      expectName('project name',Name)\n\n      const Result = new SNS_Project(Name)\n        delete Serialization.Name\n        Result._Name = Name\n\n        Result._deserializeConfigurationFrom(Serialization)\n        Result._deserializeBoardsFrom(Serialization)\n      return Result\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                                SNS_Board                                 --\n//------------------------------------------------------------------------------\n\n  const SNS_BoardPropertySet:Indexable = Object.create(null)\n    ;[\n      'Name','BackgroundColor','BackgroundTexture',\n      'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n      'ForegroundColor',\n      'memoized','Value','activeScript','pendingScript',\n      'SnapToGrid','GridWidth','GridHeight',\n    ].forEach((Property:string) => SNS_BoardPropertySet[Property] = true)\n\n  export class SNS_Board extends SNS_Folder {\n    /* protected */ constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      super(Project, Id)\n      registerFolder(Project,this)\n\n      Project._reportChange('createBoard', this)\n    }\n\n  /**** StickerList ****/\n\n    protected _StickerList:SNS_Sticker[] = []\n\n    public get StickerList ():SNS_Sticker[]  { return this._StickerList.slice() }\n    public set StickerList (_:SNS_Sticker[]) { throwReadOnlyError('StickerList') }\n\n  /**** StickerCount ****/\n\n    public get StickerCount ():number  { return this._StickerList.length }\n    public set StickerCount (_:number) { throwReadOnlyError('StickerCount') }\n\n  /**** IndexOfSticker ****/\n\n    public IndexOfSticker (Sticker:SNS_Sticker):number {\n      expectSticker('SNS sticker to search for',Sticker)\n      return this._StickerList.indexOf(Sticker)\n    }\n\n  /**** Sticker ****/\n\n    public Sticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):SNS_Sticker|undefined {\n      expectValue('sticker, name or index',StickerOrNameOrIndex)\n\n      switch (true) {\n        case ValueIsSticker(StickerOrNameOrIndex):\n          const Sticker = StickerOrNameOrIndex as SNS_Sticker\n          return (Sticker.Board === this ? Sticker : undefined)\n        case ValueIsInteger(StickerOrNameOrIndex):\n          const Index = StickerOrNameOrIndex as number\n          return this._StickerList[Index]\n        case ValueIsName(StickerOrNameOrIndex):\n          return this.StickerNamed(StickerOrNameOrIndex as SNS_Name)\n      }\n\n      throwError(\n        'InvalidArgument: no valid sticker, sticker name or sticker index given'\n      )\n    }\n\n  /**** existingSticker ****/\n\n    public existingSticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):SNS_Sticker {\n      let Sticker = this.Sticker(StickerOrNameOrIndex)\n        if (Sticker == null) throwError(\n          'StickerNotFound: the desired sticker could not be found'\n        )\n      return Sticker\n    }\n\n  /**** StickerNamed ****/\n\n    public StickerNamed (Name:SNS_Name):SNS_Sticker|undefined {\n      expectName('SNS sticker name',Name)\n      Name = Name.trim().toLowerCase()\n\n      let Result:SNS_Sticker|undefined = undefined\n        this._StickerList.forEach((Sticker:SNS_Sticker) => {\n          if (\n            (Result == null) &&\n            (Sticker.Name != null) && (Sticker.Name.toLowerCase() === Name)\n          ) {\n            Result = Sticker\n          }\n        })\n      return Result\n    }\n\n  /**** StickerAt ****/\n\n    public StickerAt (Index:number):SNS_Sticker|undefined {\n      expectInteger('SNS sticker index',Index)\n      if (Index < 0) { Index += this._StickerList.length }\n      return this._StickerList[Index]\n    }\n\n  /**** hasSticker ****/\n\n    public hasSticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):boolean {\n      return (this.Sticker(StickerOrNameOrIndex) != null)\n    }\n\n  /**** newStickerAt ****/\n\n    public newStickerAt (Index?:number, Id?:SNS_Id):SNS_Sticker {\n      return (\n        Id == null\n        ? this.StickerDeserializedAt({},Index)\n        : this.StickerDeserializedAt({ Id },Index)\n      )\n    }\n\n  /**** StickerDeserializedAt - nota bene: needs explicit script activation! ****/\n\n    public StickerDeserializedAt (Serialization:Serializable, Index?:number):SNS_Sticker {\n      expectSerializable('sticker serialization',Serialization)\n      allowInteger          ('SNS sticker index',Index)\n\n      if (Index == null) {\n        Index = this._StickerList.length\n      } else {\n        if (Index < 0) { Index += this._StickerList.length }\n        Index = Math.max(0,Math.min(Index,this._StickerList.length))\n      }\n\n      const Id = allowedId('sticker id',Serialization.Id)\n\n      let newSticker = new SNS_Sticker(this.Project, Id)     // registers itself\n        this._attachStickerAt(newSticker,Index)\n\n// @ts-ignore TS2445 \"newSticker\" *IS* an SNS_Visual\n        newSticker._deserializeConfigurationFrom(Serialization)\n\n        this.rerender()\n      return newSticker\n    }\n\n  /**** DuplicateOfStickerAt ****/\n\n    public DuplicateOfStickerAt (Index:number):SNS_Sticker {\n      expectInteger('SNS sticker index',Index)\n      const Sticker = this.existingSticker(Index)                         // DRY\n      const Serialization = Sticker.Serialization\n        removeIdsFrom(Serialization)\n      return this.StickerDeserializedAt(Serialization,Index+1)\n    }\n\n  /**** mayShiftStickerUp/Down ****/\n\n    public mayShiftStickerUp (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):boolean {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      return (this._StickerList.indexOf(Sticker) > 0)\n    }\n\n    public mayShiftStickerDown (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):boolean {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n\n      const StickerList  = this._StickerList\n      const StickerIndex = StickerList.indexOf(Sticker)\n      return (StickerIndex >= 0) && (StickerIndex < StickerList.length-1)\n    }\n\n  /**** shiftStickerToTop ****/\n\n    public shiftStickerToTop (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerUp(Sticker)) {                   // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,0)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerUp ****/\n\n    public shiftStickerUp (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerUp(Sticker)) {                   // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,oldIndex-1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerDown ****/\n\n    public shiftStickerDown (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerDown(Sticker)) {                 // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,oldIndex+1)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerToBottom ****/\n\n    public shiftStickerToBottom (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n      if (this.mayShiftStickerDown(Sticker)) {                 // keeps code DRY\n        const oldIndex = this._StickerList.indexOf(Sticker)\n        this._detachStickerAt(oldIndex)\n        this._attachStickerAt(Sticker,this._StickerList.length)\n        this.rerender()\n      }\n    }\n\n  /**** shiftStickerTo ****/\n\n    public shiftStickerTo (\n      StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number, newIndex:number\n    ):void {\n      const Sticker = this.existingSticker(StickerOrNameOrIndex)\n\n      expectInteger('SNS sticker index',newIndex)\n      if (newIndex < 0) { newIndex += this._StickerList.length }\n      newIndex = Math.max(0,Math.min(newIndex,this._StickerList.length-1))\n\n      const oldIndex = this._StickerList.indexOf(Sticker)\n      if (oldIndex === newIndex) { return }\n\n      this._detachStickerAt(oldIndex)\n      this._attachStickerAt(Sticker,newIndex)\n\n      this.rerender()\n    }\n\n  /**** shiftStickersByIndex ****/\n\n    public shiftStickersByIndex (\n      oldIndex:number, newIndex:number, Count:number\n    ):void {\n      const StickerCount = this._StickerList.length\n\n      expectIntegerInRange('old index',oldIndex,0,StickerCount)\n      expectIntegerInRange('new index',newIndex,0,StickerCount)\n\n      const StickersToShift = this._StickerList.slice(oldIndex,oldIndex+Count)\n      StickersToShift.forEach((_:any) => this._detachStickerAt(oldIndex))\n\n      if (newIndex > oldIndex) { newIndex -= Count }\n      StickersToShift.forEach(\n        (Sticker:SNS_Sticker,i:number) => this._attachStickerAt(Sticker,newIndex+i)\n      )\n\n      this.rerender()\n    }\n\n  /**** destroySticker ****/\n\n    public destroySticker (StickerOrNameOrIndex:SNS_Sticker|SNS_Name|number):void {\n      const Sticker = this.Sticker(StickerOrNameOrIndex)\n      if (Sticker == null) {\n        if (ValueIsSticker(StickerOrNameOrIndex)) throwError(\n          'NoSuchSticker: the given sticker could not be found'\n        )\n        return\n      }\n\n      unregisterAllReactiveFunctionsFrom(Sticker as SNS_Sticker)\n\n      const oldIndex = this._StickerList.indexOf(Sticker as SNS_Sticker)\n      this._detachStickerAt(oldIndex)\n\n      unregisterSticker(Sticker)\n// @ts-ignore TS2322 allow _Project to become undefined upon deletion\n      Sticker._Project = undefined     // detaches this sticker from the project\n\n      this._reportChange('destroySticker',Sticker)\n      this.rerender()\n    }\n\n  /**** clear ****/\n\n    public clear ():void {\n      super.clear()                                  // deletes all inner boards\n\n      for (let i = 0, l = this._StickerList.length; i < l; i++) {\n        this.destroySticker(this._StickerList[0])\n      }\n    }\n\n  /**** recursivelyActivateAllScripts ****/\n\n    public recursivelyActivateAllScripts ():void {\n      this.activateScript();\n\n      this._BoardList.forEach(\n        (Board:SNS_Board) => Board.recursivelyActivateAllScripts()\n      )\n\n      this._StickerList.forEach(\n        (Sticker:SNS_Sticker) => Sticker.activateScript()\n      )\n    }\n\n  /**** Rendering ****/\n\n    public Rendering (PropSet:Indexable):any {\n      if (this.hasError) {\n        return ErrorRenderer.call(this)\n      }\n\n      let Renderer = this._Renderer\n      if (Renderer == null) { return '' }\n\n      try {\n        return Renderer.call(this,PropSet)\n      } catch (Signal:any) {\n        this.Error = {\n          Type:'Rendering Failure',\n          Message:''+Signal, Cause:Signal\n        }\n        return ErrorRenderer.call(this)\n      }\n    }\n\n  /**** rerender ****/\n\n    public rerender ():void {\n      this.Project.rerender(this)\n    }\n\n  /**** onClick ****/\n\n    protected _onClick:Function|undefined\n\n    public onClick (newHandler:Function):void {\n      expectFunction('\"click\" event handler',newHandler)\n      this._onClick = newHandler\n    }\n\n  /**** onDrop ****/\n\n    protected _onDrop:Function|undefined\n\n    public onDrop (newHandler:Function):void {\n      expectFunction('\"drop\" event handler',newHandler)\n      this._onDrop = newHandler\n    }\n\n  /**** _attachStickerAt ****/\n\n    /* protected */ _attachStickerAt (Sticker:SNS_Sticker, Index:number):void {\n// @ts-ignore TS2446 this is a hack, I know\n      Sticker._Folder = this\n      this._StickerList.splice(Index,0, Sticker)\n      this._reportChange('attachSticker', Sticker, this, Index)\n    }\n\n  /**** _detachStickerAt ****/\n\n    /* protected */ _detachStickerAt (Index:number):void {\n      const Sticker = this._StickerList.splice(Index,1)[0]\n// @ts-ignore TS2446 this is a hack, I know\n      Sticker._Folder = undefined\n      this._reportChange('detachSticker', Sticker, this, Index)\n    }\n\n  /**** Serialization ****/\n\n    public get Serialization ():Serializable {\n      const Result:Serializable = {}\n        this._serializeConfigurationInto(Result)\n        this._serializeBoardsInto(Result)\n        this._serializeStickersInto(Result)\n      return Result\n    }\n    public set Serialization (_:Serializable) { throwReadOnlyError('Serialization') }\n\n  /**** _serializeStickersInto ****/\n\n    protected _serializeStickersInto (Serialization:Serializable):void {\n      const StickerList = this._StickerList.slice()\n      if (StickerList.length > 0) {\n        Serialization.StickerList = StickerList.map(\n          (Sticker:SNS_Sticker) => Sticker.Serialization\n        )\n      }\n    }\n\n  /**** _deserializeStickersFrom ****/\n\n    protected _deserializeStickersFrom (Serialization:Serializable):void {\n      const StickerList = this._StickerList\n      if (StickerList.length > 0) { this.clear() }\n\n      if (\n        ValueIsListSatisfying(Serialization.StickerList,ValueIsPlainObject) &&\n        ((Serialization.StickerList as Serializable[]).length > 0)\n      ) {\n        (Serialization.StickerList as Serializable[]).forEach(\n          (StickerSerialization:Serializable, Index:number) => {\n            this.StickerDeserializedAt(StickerSerialization,Index)\n          }\n        )\n      }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                               CNS_Sticker                                --\n//------------------------------------------------------------------------------\n\n  const SNS_StickerPropertySet:Indexable = Object.create(null)\n    ;[\n      'Name',\n      'Lock','Selectability','Visibility','Enabling',\n      'minWidth','maxWidth','minHeight','maxHeight',\n      'BackgroundColor','BackgroundTexture',\n      'FontFamily','FontSize','FontWeight','FontStyle','LineHeight',\n      'ForegroundColor',\n      'memoized','Value','activeScript','pendingScript',\n    ].forEach((Property:string) => SNS_StickerPropertySet[Property] = true)\n\n  export class SNS_Sticker extends SNS_Visual {\n    /* protected */ constructor (Project:SNS_Project, Id:SNS_Id|undefined) {\n      super(Project, Id)\n      registerSticker(Project,this)\n\n      Project._reportChange('createSticker', this)\n    }\n\n  /**** Board ****/\n\n    public get Board ():SNS_Board  { return this._Folder as SNS_Board }\n    public set Board (_:SNS_Board) { throwReadOnlyError('Board') }\n\n  /**** BackgroundColor ****/\n\n    public get BackgroundColor ():SNS_Color|undefined {\n      return this._BackgroundColor\n    }\n\n    public set BackgroundColor (newColor:SNS_Color|undefined) {\n      allowColor('sticker background color',newColor)\n      if (this._BackgroundColor !== newColor) {\n        this._BackgroundColor = newColor\n\n        this._reportChange('configure',this,'BackgroundColor',newColor)\n        this.rerender()\n      }\n    }\n\n  /**** BackgroundTexture ****/\n\n    public get BackgroundTexture ():SNS_URL|undefined {\n      return this._BackgroundTexture\n    }\n\n    public set BackgroundTexture (newTexture:SNS_URL|undefined) {\n      allowURL('sticker background texture',newTexture)\n      if (this._BackgroundTexture !== newTexture) {\n        this._BackgroundTexture = newTexture\n\n        this._reportChange('configure',this,'BackgroundTexture',newTexture)\n        this.rerender()\n      }\n    }\n\n  /**** Index ****/\n\n    public get Index ():number  { return (this._Folder as SNS_Board).IndexOfSticker(this) }\n    public set Index (_:number) { throwReadOnlyError('Index') }\n\n  /**** mayBeShiftedUp ****/\n\n    public get mayBeShiftedUp ():boolean  { return (this._Folder as SNS_Board).mayShiftStickerUp(this) }\n    public set mayBeShiftedUp (_:boolean) { throwReadOnlyError('mayBeShiftedUp') }\n\n  /**** mayBeShiftedDown ****/\n\n    public get mayBeShiftedDown ():boolean  { return (this._Folder as SNS_Board).mayShiftStickerDown(this) }\n    public set mayBeShiftedDown (_:boolean) { throwReadOnlyError('mayBeShiftedDown') }\n\n  /**** minWidth ****/\n\n    protected _minWidth:SNS_Dimension|undefined = undefined\n\n    public get minWidth ():SNS_Dimension {\n      return (this._minWidth == null ? defaultMinWidth : this._minWidth)\n    }\n    public set minWidth (newMinWidth:SNS_Dimension|undefined) {\n      allowDimension('minimal sticker width',newMinWidth)\n      if (this._minWidth !== newMinWidth) {\n        this._minWidth = newMinWidth\n        this._reportChange('configure',this,'minWidth',newMinWidth)\n\n        if (\n          (this._minWidth != null) && (this._maxWidth != null) &&\n          (this._maxWidth < this._minWidth)\n        ) {\n          this._maxWidth = newMinWidth\n          this._reportChange('configure',this,'maxWidth',this._minWidth)\n        }\n\n        if ((this._minWidth != null) && (this._Geometry.Width < this._minWidth)) {\n          this.Width = this._minWidth\n        }\n        this.rerender()\n      }\n    }\n\n  /**** maxWidth ****/\n\n    protected _maxWidth:SNS_Dimension|undefined = defaultMaxWidth\n\n    public get maxWidth ():SNS_Dimension|undefined  { return this._maxWidth }\n    public set maxWidth (newMaxWidth:SNS_Dimension|undefined) {\n      allowDimension('maximal sticker width',newMaxWidth)\n      if ((newMaxWidth != null) && (this._minWidth != null)) {\n        newMaxWidth = Math.max(this._minWidth,newMaxWidth)\n      }\n\n      if (this._maxWidth !== newMaxWidth) {\n        this._maxWidth = newMaxWidth\n        this._reportChange('configure',this,'maxWidth',this._maxWidth)\n\n        if ((this._maxWidth != null) && (this._Geometry.Width > this._maxWidth)) {\n          this.Width = this._maxWidth\n        }\n        this.rerender()\n      }\n    }\n\n  /**** minHeight ****/\n\n    protected _minHeight:SNS_Dimension|undefined = undefined\n\n    public get minHeight ():SNS_Dimension  {\n      return (this._minHeight == null ? defaultMinHeight : this._minHeight)\n    }\n    public set minHeight (newMinHeight:SNS_Dimension|undefined) {\n      allowDimension('minimal sticker height',newMinHeight)\n      if (this._minHeight !== newMinHeight) {\n        this._minHeight = newMinHeight\n        this._reportChange('configure',this,'minHeight',newMinHeight)\n\n        if (\n          (this._minHeight != null) && (this._maxHeight != null) &&\n          (this._maxHeight < this._minHeight)\n        ) {\n          this._maxHeight = newMinHeight\n          this._reportChange('configure',this,'maxHeight',this._minHeight)\n        }\n\n        if ((this._minHeight != null) && (this._Geometry.Height < this._minHeight)) {\n          this.Height = this._minHeight\n        }\n        this.rerender()\n      }\n    }\n\n  /**** maxHeight ****/\n\n    protected _maxHeight:SNS_Dimension|undefined = defaultMaxHeight\n\n    public get maxHeight ():SNS_Dimension|undefined  { return this._maxHeight }\n    public set maxHeight (newMaxHeight:SNS_Dimension|undefined) {\n      allowDimension('maximal sticker height',newMaxHeight)\n      if ((newMaxHeight != null) && (this._minHeight != null)) {\n        newMaxHeight = Math.max(this._minHeight,newMaxHeight)\n      }\n\n      if (this._maxHeight !== newMaxHeight) {\n        this._maxHeight = newMaxHeight\n        this._reportChange('configure',this,'maxHeight',this._maxHeight)\n\n        if ((this._maxHeight != null) && (this._Geometry.Height > this._maxHeight)) {\n          this.Height = this._maxHeight\n        }\n        this.rerender()\n      }\n    }\n\n  /**** x ****/\n\n    public get x ():SNS_Location { return this._Geometry.x }\n    public set x (newX:SNS_Location) {\n      expectLocation('sticker x coordinate',newX)\n      this.Geometry = { ...this.Geometry, x:newX }\n    }\n\n  /**** y ****/\n\n    public get y ():SNS_Location { return this._Geometry.y }\n    public set y (newY:SNS_Location) {\n      expectLocation('sticker y coordinate',newY)\n      this.Geometry = { ...this.Geometry, y:newY }\n    }\n\n  /**** Width ****/\n\n    public get Width ():SNS_Dimension { return this._Geometry.Width }\n    public set Width (newWidth:SNS_Dimension) {\n      expectDimension('sticker width',newWidth)\n      this.Geometry = { ...this.Geometry, Width:newWidth }\n    }\n\n  /**** Height ****/\n\n    public get Height ():SNS_Dimension { return this._Geometry.Height }\n    public set Height (newHeight:SNS_Dimension) {\n      expectDimension('sticker height',newHeight)\n      this.Geometry = { ...this.Geometry, Height:newHeight }\n    }\n\n  /**** Position ****/\n\n    public get Position ():SNS_Position {\n      return { x:this._Geometry.x, y:this._Geometry.y }\n    }\n\n    public set Position (newPosition:SNS_Position) {\n      expectPosition('visual position',newPosition)\n      this.Geometry = { ...this.Geometry, x:newPosition.x, y:newPosition.y }\n    }\n\n  /**** Size ****/\n\n    public get Size ():SNS_Size {\n      return { Width:this._Geometry.Width, Height:this._Geometry.Height }\n    }\n\n    public set Size (newSize:SNS_Size) {\n      expectSize('visual size',newSize)\n      this.Geometry = { ...this.Geometry, Width:newSize.Width, Height:newSize.Height }\n    }\n\n  /**** Geometry ****/\n\n    protected _Geometry:SNS_Geometry = { ...defaultStickerGeometry }\n\n    public get Geometry ():SNS_Geometry {\n      let { x,y, Width,Height } = this._Geometry\n        if (this._minWidth != null) { Width = Math.max(this._minWidth,Width) }\n        if (this._maxWidth != null) { Width = Math.min(Width,this._maxWidth) }\n\n        if (this._minHeight != null) { Height = Math.max(this._minHeight,Height) }\n        if (this._maxHeight != null) { Height = Math.min(Height,this._maxHeight) }\n      return { x,y, Width,Height }\n    }\n\n    public set Geometry (newGeometry:SNS_Geometry) {\n      expectGeometry('visual geometry',newGeometry)\n\n      let { x,y, Width,Height } = this._Geometry\n      if (\n        (x !== newGeometry.x) || (Width  !== newGeometry.Width) ||\n        (y !== newGeometry.y) || (Height !== newGeometry.Height)\n      ) {\n        this._Geometry = { ...newGeometry }\n\n        this._reportChange('configure',this,'Geometry',{ ...newGeometry })\n        this.rerender()\n      }\n    }\n\n  /**** Lock ****/\n\n    protected _Lock:boolean = false\n\n    public get Lock ():boolean { return this._Lock }\n    public set Lock (newLock:boolean) {\n      expectBoolean('sticker lock',newLock)\n      if (this._Lock !== newLock) {\n        this._Lock = newLock\n\n        this._reportChange('configure',this,'Lock',newLock)\n        this.rerender()\n      }\n    }\n\n  /**** lock/unlock ****/\n\n    public lock ():void   { this.Lock = true }\n    public unlock ():void { this.Lock = false }\n\n  /**** isLocked ****/\n\n    public get isLocked ():boolean        { return this._Lock }\n    public set isLocked (newLock:boolean) { this.Lock = newLock }\n\n  /**** Lock ****/\n\n    protected _Selectability:boolean = false\n\n    public get Selectability ():boolean { return this._Selectability }\n    public set Selectability (newSelectability:boolean) {\n      expectBoolean('sticker selectability',newSelectability)\n      if (this._Selectability !== newSelectability) {\n        this._Selectability = newSelectability\n\n        this._reportChange('configure',this,'Selectability',newSelectability)\n        this.rerender()\n      }\n    }\n\n  /**** isSelectable ****/\n\n    public get isSelectable ():boolean                 { return this._Selectability }\n    public set isSelectable (newSelectability:boolean) { this.Selectability = newSelectability }\n\n  /**** Visibility ****/\n\n    protected _Visibility:boolean = true\n\n    public get Visibility ():boolean { return this._Visibility }\n    public set Visibility (newVisibility:boolean) {\n      expectBoolean('sticker visibility',newVisibility)\n      if (this._Visibility !== newVisibility) {\n        this._Visibility = newVisibility\n\n        this._reportChange('configure',this,'Visibility',newVisibility)\n        this.rerender()\n      }\n    }\n\n  /**** show/hide ****/\n\n    public show ():void { this.Visibility = true }\n    public hide ():void { this.Visibility = false }\n\n  /**** isVisible ****/\n\n    public get isVisible ():boolean              { return this._Visibility }\n    public set isVisible (newVisibility:boolean) { this.Visibility = newVisibility }\n\n  /**** Enabling ****/\n\n    protected _Enabling:boolean = true\n\n    public get Enabling ():boolean { return this._Enabling }\n    public set Enabling (newEnabling:boolean) {\n      expectBoolean('sticker enabling',newEnabling)\n      if (this._Enabling !== newEnabling) {\n        this._Enabling = newEnabling\n\n        this._reportChange('configure',this,'Enabling',newEnabling)\n        this.rerender()\n      }\n    }\n\n  /**** enable/disable ****/\n\n    public enable ():void  { this.Enabling = true }\n    public disable ():void { this.Enabling = false }\n\n  /**** isEnabled ****/\n\n    public get isEnabled ():boolean            { return this._Enabling }\n    public set isEnabled (newEnabling:boolean) { this.Enabling = newEnabling }\n\n  /**** onClick ****/\n\n    protected _onClick:Function|undefined\n\n    public onClick (newHandler:Function):void {\n      expectFunction('\"click\" event handler',newHandler)\n      this._onClick = newHandler\n    }\n\n  /**** onInput ****/\n\n    protected _onInput:Function|undefined\n\n    public onInput (newHandler:Function):void {\n      expectFunction('\"input\" event handler',newHandler)\n      this._onInput = newHandler\n    }\n\n  /**** onDrop ****/\n\n    protected _onDrop:Function|undefined\n\n    public onDrop (newHandler:Function):void {\n      expectFunction('\"drop\" event handler',newHandler)\n      this._onDrop = newHandler\n    }\n\n  /**** Rendering ****/\n\n    public Rendering (PropSet:Indexable):any {\n      if (this.hasError) {\n        return ErrorRenderer.call(this)\n      }\n\n      let Renderer = this._Renderer || DefaultRenderer\n\n      try {\n        return Renderer.call(this,PropSet)\n      } catch (Signal:any) {\n        this.Error = {\n          Type:'Rendering Failure',\n          Message:''+Signal, Cause:Signal\n        }\n        return ErrorRenderer.call(this)\n      }\n    }\n\n  /**** rerender ****/\n\n    public rerender ():void {\n      this._Project.rerender((this._Folder as SNS_Board), this)\n    }\n\n  /**** Serialization ****/\n\n    public get Serialization ():Serializable {\n      const Result:Serializable = {}\n        this._serializeConfigurationInto(Result)\n      return Result\n    }\n    public set Serialization (_:Serializable) { throwReadOnlyError('Serialization') }\n\n  /**** _serializeConfigurationInto ****/\n\n    protected _serializeConfigurationInto (Serialization:Serializable):void {\n      super._serializeConfigurationInto(Serialization)\n\n      Serialization.Geometry = { ...this._Geometry }\n\n      if (this._minWidth  != null) { Serialization.minWidth  = this._minWidth }\n      if (this._maxWidth  != null) { Serialization.maxWidth  = this._maxWidth }\n      if (this._minHeight != null) { Serialization.minHeight = this._minHeight }\n      if (this._maxHeight != null) { Serialization.maxHeight = this._maxHeight }\n\n      if (this.isSelectable) { Serialization.Selectability = true }\n      if (this.isLocked)     { Serialization.Lock          = true }\n      if (! this.isVisible)  { Serialization.Visibility    = false }\n      if (! this.isEnabled)  { Serialization.Enabling      = false }\n    }\n\n  /**** _deserializeConfigurationFrom ****/\n\n    protected _deserializeConfigurationFrom (Serialization:Serializable):void {\n      super._deserializeConfigurationFrom(Serialization)\n\n      let { x,y, Width,Height } = Serialization.Geometry as SNS_Geometry || defaultStickerGeometry\n        if (! ValueIsLocation(x)) { x = defaultStickerGeometry.x }\n        if (! ValueIsLocation(y)) { y = defaultStickerGeometry.y }\n        if (! ValueIsDimension(Width))  { Width  = defaultStickerGeometry.Width  }\n        if (! ValueIsDimension(Height)) { Height = defaultStickerGeometry.Height }\n// @ts-ignore TS2322 \"x\",\"y\",\"Width\" and \"Height\" will never be \"null\"\n      this.Geometry = { x,y, Width,Height }\n\n      if (Serialization.Selectability === true)  { this.Selectability = true }\n      if (Serialization.Lock          === true)  { this.Lock          = true }\n      if (Serialization.Visibility    === false) { this.Visibility    = false }\n      if (Serialization.Enabling      === false) { this.Enabling      = false }\n    }\n  }\n\n//------------------------------------------------------------------------------\n//--                               SNS_Adapter                                --\n//------------------------------------------------------------------------------\n\n  export const SNS_ConnectionStates = ['not-ready','disconnected','connecting','connected']\n  export type  SNS_ConnectionState  = typeof SNS_ConnectionStates[number]\n\n  export abstract class SNS_Adapter {\n    public abstract ConnectionState:SNS_ConnectionState\n    public abstract isConnected:boolean\n\n    public abstract connect ():void\n    public abstract disconnect ():void\n  }\n\n// @ts-ignore TS2339 allow global variable \"SNS\"\n  const SNS:Indexable = window.SNS = {\n    SNS_FontStyles, SNS_ErrorTypes,\n    throwError, throwReadOnlyError,\n    ValueIsVisual, allowVisual, allowedVisual, expectVisual, expectedVisual,\n    ValueIsFolder, allowFolder, allowedFolder, expectFolder, expectedFolder,\n    ValueIsProject, allowProject, allowedProject, expectProject, expectedProject,\n    ValueIsBoard, allowBoard, allowedBoard, expectBoard, expectedBoard,\n    ValueIsSticker, allowSticker, allowedSticker, expectSticker, expectedSticker,\n    ValueIsId, allowId, allowedId, expectId, expectedId,\n    ValueIsIdentifier, allowIdentifier, allowedIdentifier, expectIdentifier, expectedIdentifier,\n    ValueIsName, allowName, allowedName, expectName, expectedName,\n    ValueIsLocation, allowLocation, allowedLocation, expectLocation, expectedLocation,\n    ValueIsDimension, allowDimension, allowedDimension, expectDimension, expectedDimension,\n    ValueIsPosition, allowPosition, allowedPosition, expectPosition, expectedPosition,\n    ValueIsSize, allowSize, allowedSize, expectSize, expectedSize,\n    ValueIsGeometry, allowGeometry, allowedGeometry, expectGeometry, expectedGeometry,\n    ValueIsError, allowError, allowedError, expectError, expectedError,\n    ValueIsSerializable, allowSerializable, allowedSerializable, expectSerializable, expectedSerializable,\n    acceptableBoolean, acceptableOptionalBoolean,\n    acceptableNumber, acceptableOptionalNumber,\n    acceptableNumberInRange, acceptableOptionalNumberInRange,\n    acceptableInteger, acceptableOptionalInteger,\n    acceptableIntegerInRange, acceptableOptionalIntegerInRange,\n    acceptableOrdinal, acceptableOptionalOrdinal,\n    acceptableString, acceptableOptionalString,\n    acceptableNonEmptyString, acceptableOptionalNonEmptyString,\n    acceptableStringMatching, acceptableOptionalStringMatching,\n    acceptableText, acceptableOptionalText,\n    acceptableTextline, acceptableOptionalTextline,\n    acceptableFunction, acceptableOptionalFunction,\n    acceptableList, acceptableOptionalList,\n    acceptableListSatisfying, acceptableOptionalListSatisfying,\n    acceptableColor, acceptableOptionalColor,\n    acceptableEMailAddress, acceptablePhoneNumber, acceptableURL,\n    newId,\n    CSSStyleOfVisual,\n    SNS_ConnectionStates\n  }\nconsole.log('SNS is globally available now')\n\n  document.dispatchEvent(\n// @ts-ignore TS2339 allow global variable \"SNS\"\n    new CustomEvent('SNS',{ detail:window.SNS })\n  )\n"],"names":["ValueIsPhoneNumber","ValueIsTextline","observe","hyperactiv","computed","dispose","BehaviorStyleElement","document","createElement","innerHTML","head","appendChild","SNS_FontStyles","SNS_ErrorTypes","throwError","Message","Match","exec","Error","namedError","name","throwReadOnlyError","Name","quoted","ValueIsVisual","Value","SNS_Visual","allowVisual","ValidatorForClassifier","acceptNil","allowedVisual","expectVisual","rejectNil","expectedVisual","ValueIsFolder","SNS_Folder","allowFolder","allowedFolder","expectFolder","expectedFolder","ValueIsProject","SNS_Project","allowProject","allowedProject","expectProject","expectedProject","ValueIsBoard","SNS_Board","allowBoard","allowedBoard","expectBoard","expectedBoard","ValueIsSticker","SNS_Sticker","allowSticker","allowedSticker","expectSticker","expectedSticker","ValueIsId","allowId","allowedId","expectId","expectedId","SNS_IdentifierPattern","ValueIsIdentifier","ValueIsStringMatching","allowIdentifier","allowedIdentifier","expectIdentifier","expectedIdentifier","ValueIsName","allowName","allowedName","expectName","expectedName","ValueIsLocation","ValueIsFiniteNumber","allowLocation","allowedLocation","expectLocation","expectedLocation","ValueIsDimension","allowDimension","allowedDimension","expectDimension","expectedDimension","ValueIsPosition","ValueIsObject","x","y","allowPosition","allowedPosition","expectPosition","expectedPosition","ValueIsSize","Width","Height","allowSize","allowedSize","expectSize","expectedSize","ValueIsGeometry","allowGeometry","allowedGeometry","expectGeometry","expectedGeometry","ValueIsError","ValueIsPlainObject","ValueIsOneOf","Type","ValueIsText","allowError","allowedError","expectError","expectedError","ValueIsSerializable","allowSerializable","allowedSerializable","expectSerializable","expectedSerializable","sanitizeBoardList","Project","Folder","Board","Index","allowOrdinal","BoardSet","Set","BoardList","i","length","BoardFromList","has","_detachBoardAt","add","sanitizeStickerList","Sticker","StickerSet","StickerList","StickerFromList","_detachStickerAt","defaultStickerGeometry","acceptableBoolean","Default","ValueIsBoolean","acceptableOptionalBoolean","undefined","acceptableNumber","ValueIsNumber","acceptableOptionalNumber","acceptableNumberInRange","minValue","maxValue","withMin","withMax","Infinity","ValueIsNumberInRange","acceptableOptionalNumberInRange","acceptableInteger","ValueIsInteger","acceptableOptionalInteger","acceptableIntegerInRange","ValueIsIntegerInRange","acceptableOptionalIntegerInRange","acceptableOrdinal","ValueIsOrdinal","acceptableOptionalOrdinal","acceptableString","ValueIsString","acceptableOptionalString","acceptableNonEmptyString","trim","acceptableOptionalNonEmptyString","acceptableStringMatching","Pattern","acceptableOptionalStringMatching","noCtrlCharsButCRLFTABPattern","acceptableText","acceptableOptionalText","acceptableTextline","replace","acceptableOptionalTextline","Result","acceptableFunction","ValueIsFunction","acceptableOptionalFunction","acceptableList","ValueIsList","acceptableOptionalList","acceptableListSatisfying","Matcher","ValueIsListSatisfying","acceptableOptionalListSatisfying","acceptableColor","ValueIsColor","acceptableOptionalColor","acceptableEMailAddress","ValueIsEMailAddress","acceptablePhoneNumber","acceptableURL","ValueIsURL","DefaultRenderer","html","_templateObject","_taggedTemplateLiteralLoose","CSSStyleOfVisual","this","ErrorRenderer","_this","call","_templateObject2","showError","newId","customAlphabet","nolookalikesSafe","FolderRegistryForProject","WeakMap","unregisterFolder","FolderRegistry","get","Id","FolderWithId","StickerRegistryForProject","unregisterSticker","StickerRegistry","removeIdsFrom","Serialization","forEach","reactiveFunctionsForVisual","registerReactiveFunctionIn","Visual","reactiveFunction","reactiveFunctions","set","push","unregisterAllReactiveFunctionsFrom","groupedBehaviorRegistry","Object","create","BehaviorRegistry","TemplateRegistry","registerBehavior","GroupLabel","BehaviorLabel","BehaviorName","Template","BehaviorFunction","BehaviorStyle","expectTextline","allowPlainObject","allowFunction","normalizedGroupName","toLowerCase","normalizedBehaviorName","normalizedTemplate","_extends","activeScript","BehaviorSetGroup","BehaviorSet","Label","Executable","indexOf","useBehavior","_this2","onRender","bind","onMount","onUnmount","SNS","JIL","Application","expectFunction","Geometry","me","my","reactively","_templateObject3","Selectability","minWidth","minHeight","Renderer","PropSet","builtinSelection","builtinDragging","_templateObject4","Event","key","stopPropagation","preventDefault","Editor","target","value","selectionStart","selectionEnd","slice","_templateObject5","_templateObject6","CSSStyle","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","__html","_templateObject12","DataURL","btoa","_templateObject13","_templateObject14","ForegroundColor","BackgroundColor","BorderRadius","Math","round","min","_templateObject15","onClick","Enabling","_onClick","Color","_templateObject16","_templateObject17","_templateObject18","consumingEvent","_templateObject19","LineHeight","checked","indeterminate","_templateObject20","_templateObject21","parseFloat","Minimum","lowerBound","Optimum","upperBound","Maximum","_templateObject22","_templateObject23","HashmarkPattern","HashmarkMatcher","onInput","ValueToShow","_onInput","onBlur","rerender","Stepping","Hashmarks","activeElement","View","HashmarkId","HashmarkList","_templateObject24","map","Item","_templateObject25","_templateObject26","Placeholder","readonly","minLength","maxLength","SpellChecking","Suggestions","SuggestionId","SuggestionList","_templateObject27","_templateObject28","_templateObject29","_templateObject30","_templateObject31","_templateObject32","_templateObject33","_templateObject34","_templateObject35","_templateObject36","_templateObject37","_templateObject38","_templateObject39","_templateObject40","_templateObject41","_templateObject42","TimeRegExp","TimeMatcher","_templateObject43","_templateObject44","_templateObject45","DateTimeRegExp","DateTimeMatcher","_templateObject46","_templateObject47","_templateObject48","DateRegExp","DateMatcher","_templateObject49","_templateObject50","_templateObject51","WeekRegExp","WeekMatcher","_templateObject52","_templateObject53","_templateObject54","MonthRegExp","MonthMatcher","CSSStyleList","BackgroundTexture","FontFamily","FontSize","FontWeight","FontStyle","join","consumeEvent","_templateObject55","_templateObject56","_templateObject57","Array","from","files","File","onDragEnter","onDragOver","onDrop","dataTransfer","_onDrop","acceptableTypes","multiple","_templateObject58","_templateObject59","_templateObject60","Icon","_templateObject61","_templateObject62","_templateObject63","_templateObject64","_templateObject65","_templateObject66","_templateObject67","_templateObject68","Options","_templateObject69","Option","OptionValue","OptionLabel","disabled","test","_templateObject70","_templateObject71","_templateObject72","LineWrapping","_templateObject73","_my$Geometry","_templateObject74","_my$Geometry2","_templateObject75","_my$Geometry3","_templateObject76","_my$Geometry4","_templateObject77","_my$Geometry5","_templateObject78","_my$Geometry6","_templateObject79","_my$Geometry7","_templateObject80","_my$Geometry8","_templateObject81","_my$Geometry9","_templateObject82","_my$Geometry10","_templateObject83","_my$Geometry11","_templateObject84","_my$Geometry12","_templateObject85","_my$Geometry13","_templateObject86","_my$Geometry14","_templateObject87","_my$Geometry15","_templateObject88","_my$Geometry16","_templateObject89","Canvas","unobserved","Placement","drawLine","x0","y0","x1","y1","Text","Context","beginPath","moveTo","lineTo","stroke","fillText","width","height","getContext","clearRect","strokeStyle","lineWidth","textAlign","textBaseline","CorrectionLevelSet","low","QRCode","CorrectLevel","L","medium","M","quartile","Q","high","H","CorrectionLevel","String","Size","text","colorDark","colorLight","correctLevel","propagateEvent","_Id","_Name","_Project","_Folder","_BackgroundColor","_BackgroundTexture","_FontFamily","_FontSize","_FontWeight","_FontStyle","_LineHeight","_ForegroundColor","_Value","_observed","_unobserved","_memoized","_activeScript","_pendingScript","_ScriptError","_Renderer","_View","_onMount","_onUnmount","_Error","_proto","prototype","activateScript","_this3","compiledScript","Function","Signal","console","error","Cause","newRenderer","Rendering","hasError","newCallback","_this4","_this5","_reportChange","Change","_this$_Project","apply","concat","arguments","_serializeConfigurationInto","_this6","serializeProperty","_deserializeConfigurationFrom","_this7","deserializeProperty","warn","memoized","assign","_createClass","_","newName","isAttached","newColor","allowColor","newTexture","allowURL","newFontFamily","allowTextline","newFontSize","newFontWeight","allowIntegerInRange","newFontStyle","allowOneOf","newLineHeight","newForegroundColor","newValue","ValuesDiffer","deep","newScript","allowText","newScriptError","newError","_SNS_Visual2","_this8","_SnapToGrid","_GridWidth","_GridHeight","_BoardList","_inheritsLoose","_proto2","BoardAtPath","Path","startsWith","splitPath","split","Element","parseInt","l","BoardAt","BoardNamed","containsFolder","IndexOfBoard","BoardOrNameOrIndex","expectValue","existingBoard","expectInteger","hasBoard","newBoardAt","BoardDeserializedAt","allowInteger","max","newBoard","_attachBoardAt","_deserializeStickersFrom","_deserializeBoardsFrom","DuplicateOfBoardAt","mayShiftBoardUp","mayShiftBoardDown","BoardIndex","shiftBoardToTop","oldIndex","shiftBoardUp","shiftBoardDown","shiftBoardToBottom","shiftBoardTo","newIndex","shiftBoardsByIndex","Count","_this9","BoardCount","expectIntegerInRange","BoardsToShift","mayShiftBoardIn","mayShiftBoardOut","shiftBoardIn","newFolder","shiftBoardOut","mayMoveBoardTo","FolderOrNameOrIndex","moveBoardTo","destroyBoard","clear","splice","_this10","_this11","_serializeBoardsInto","_this12","BoardSerialization","outerFolder","outerPath","IndexPath","SnapToGrid","newSetting","allowBoolean","GridWidth","newWidth","allowCardinal","GridHeight","newHeight","SNS_ProjectPropertySet","Property","_SNS_Folder2","_this13","_onChange","_onRendering","_onError","_Application","_proto3","BoardAtIndexPath","expectListSatisfying","BoardWithId","StickerWithId","recursivelyActivateAllScripts","onChange","Callback","_this14","ArgList","unshift","onRendering","_this15","onError","_this16","deserializedFrom","newInterface","ObjectIsEmpty","SNS_BoardPropertySet","_SNS_Folder3","_this17","_StickerList","registerFolder","_proto4","IndexOfSticker","StickerOrNameOrIndex","StickerNamed","existingSticker","StickerAt","hasSticker","newStickerAt","StickerDeserializedAt","newSticker","_attachStickerAt","DuplicateOfStickerAt","mayShiftStickerUp","mayShiftStickerDown","StickerIndex","shiftStickerToTop","shiftStickerUp","shiftStickerDown","shiftStickerToBottom","shiftStickerTo","shiftStickersByIndex","_this18","StickerCount","StickersToShift","destroySticker","newHandler","_serializeStickersInto","_this19","StickerSerialization","SNS_StickerPropertySet","_SNS_Visual3","_this20","_minWidth","_maxWidth","_minHeight","_maxHeight","_Geometry","_Lock","_Selectability","_Visibility","_Enabling","registerSticker","_proto5","lock","Lock","unlock","show","Visibility","hide","enable","disable","maxWidth","maxHeight","isSelectable","isLocked","isVisible","isEnabled","_ref","newMinWidth","newMaxWidth","newMinHeight","newMaxHeight","newX","newY","newPosition","newSize","_this$_Geometry","newGeometry","_this$_Geometry2","newLock","expectBoolean","newSelectability","newVisibility","newEnabling","SNS_ConnectionStates","window","log","dispatchEvent","CustomEvent","detail","SNS_Adapter","BoardId","FolderId","expectOrdinal","oldFolder","setTimeout","StickerId","oldBoard","BehaviorEntriesIn","BehaviorGroup","BehaviorEntryList"],"mappings":"mqEAmCE,IAAMA,GAAqBC,EAAeA,gBASlCC,GAA+BC,GAAAA,QAA/BD,QAASE,GAAsBD,GAAAA,QAAtBC,SAAUC,GAAYF,GAAU,QAAtBE,QAgBrBC,GAAuBC,SAASC,cAAc,SAClDF,GAAqBG,UAAS,gHAOhCF,SAASG,KAAKC,YAAYL,IA0Bb,IAAAM,GAAiB,CAAC,SAAS,UAW3BC,GAAiB,CAC5B,oBAA6B,8BAC7B,6BAA6B,2BAC7B,oBAA6B,yBAC7B,6BAA6B,gCAkBf,SAAAC,GAAYC,GAC1B,IAAIC,EAAQ,0CAA0CC,KAAKF,GAC3D,GAAa,MAATC,EACF,MAAM,IAAIE,MAAMH,GAEhB,IAAII,EAAa,IAAID,MAAMF,EAAM,IAEjC,MADEG,EAAWC,KAAOJ,EAAM,GACpBG,CAEV,CAKM,SAAUE,GAAoBC,GAClCR,GACE,8BAAgCS,EAAAA,OAAOD,GAAQ,mBAEnD,UAQgBE,GAAeC,GAC7B,OAAOA,aAAiBC,EAC1B,CAIa,IAAAC,GAAcC,yBACzBJ,GAAeK,EAAAA,UAAW,cACzBC,GAAgBH,GAENI,GAAeH,yBAC1BJ,GAAeQ,EAAAA,UAAW,cACzBC,GAAiBF,GAIJ,SAAAG,GAAeT,GAC7B,OAAQA,aAAiBU,EAC3B,CAIa,IAAAC,GAAcR,EAAsBA,uBAC/CM,GAAeL,YAAW,cACzBQ,GAAgBD,GAENE,GAAeV,EAAsBA,uBAChDM,GAAeF,YAAW,cACzBO,GAAiBD,GAId,SAAUE,GAAgBf,GAC9B,OAAQA,aAAiBgB,EAC3B,CAIa,IAAAC,GAAed,EAAsBA,uBAChDY,GAAgBX,EAASA,UAAE,eAC1Bc,GAAiBD,GAEPE,GAAgBhB,EAAsBA,uBACjDY,GAAgBR,EAASA,UAAE,eAC1Ba,GAAkBD,GAIL,SAAAE,GAAcrB,GAC5B,OAAQA,aAAiBsB,EAC3B,CAIa,IAAAC,GAAapB,EAAsBA,uBAC9CkB,GAAcjB,EAASA,UAAE,aACxBoB,GAAeD,GAELE,GAActB,EAAsBA,uBAC/CkB,GAAcd,EAASA,UAAE,aACxBmB,GAAgBD,GAIb,SAAUE,GAAgB3B,GAC9B,OAAQA,aAAiB4B,EAC3B,CAIa,IAAAC,GAAe1B,EAAAA,uBAC1BwB,GAAgBvB,EAASA,UAAE,eAC1B0B,GAAiBD,GAEPE,GAAgB5B,EAAAA,uBAC3BwB,GAAgBpB,EAASA,UAAE,eAC1ByB,GAAkBD,GAIL,SAAAE,GAAWjC,GACzB,OAAOxB,EAAeA,gBAACwB,EACzB,CAIa,IAAAkC,GAAU/B,EAAsBA,uBAC3C8B,GAAW7B,YAAW,iBACrB+B,GAAYD,GAEFE,GAAWjC,EAAsBA,uBAC5C8B,GAAW1B,YAAW,iBACrB8B,GAAaD,GAIVE,GAAwB,wBAEd,SAAAC,GAAmBvC,GACjC,OAAOwC,EAAqBA,sBAACxC,EAAOsC,GACtC,CAIa,IAAAG,GAAkBtC,yBAC7BoC,GAAmBnC,EAAAA,UAAW,4BAC7BsC,GAAoBD,GAEVE,GAAmBxC,yBAC9BoC,GAAmBhC,EAAAA,UAAW,4BAC7BqC,GAAqBD,YAIRE,GAAa7C,GAC3B,OAAOxB,EAAAA,gBAAgBwB,EACzB,CAIa,IAAA8C,GAAY3C,EAAAA,uBACvB0C,GAAazC,EAASA,UAAE,YACvB2C,GAAcD,GAEJE,GAAa7C,EAAAA,uBACxB0C,GAAatC,EAASA,UAAE,YACvB0C,GAAeD,GAIF,SAAAE,GAAiBlD,GAC/B,OAAOmD,EAAmBA,oBAACnD,EAC7B,CAIa,IAAAoD,GAAgBjD,EAAsBA,uBACjD+C,GAAiB9C,EAASA,UAAE,sBAC3BiD,GAAkBD,GAERE,GAAiBnD,EAAsBA,uBAClD+C,GAAiB3C,EAASA,UAAE,sBAC3BgD,GAAmBD,GAIhB,SAAUE,GAAkBxD,GAChC,OAAOmD,EAAmBA,oBAACnD,IAAWA,GAAS,CACjD,CAIa,IAAAyD,GAAiBtD,EAAAA,uBAC5BqD,GAAkBpD,EAAAA,UAAW,qBAC5BsD,GAAmBD,GAETE,GAAkBxD,EAAAA,uBAC7BqD,GAAkBjD,EAAAA,UAAW,qBAC5BqD,GAAoBD,YAIPE,GAAiB7D,GAC/B,OACE8D,EAAAA,cAAc9D,IACdkD,GAAgBlD,EAAM+D,IACtBb,GAAgBlD,EAAMgE,EAE1B,CAIa,IAAAC,GAAgB9D,EAAAA,uBAC3B0D,GAAiBzD,EAAAA,UAAW,oBAC3B8D,GAAkBD,GAERE,GAAiBhE,EAAAA,uBAC5B0D,GAAiBtD,EAAAA,UAAW,oBAC3B6D,GAAmBD,GAIhB,SAAUE,GAAarE,GAC3B,OACE8D,EAAAA,cAAc9D,IACdwD,GAAiBxD,EAAMsE,QACvBd,GAAiBxD,EAAMuE,OAE3B,CAIa,IAAAC,GAAYrE,EAAAA,uBACvBkE,GAAajE,EAAAA,UAAW,gBACvBqE,GAAcD,GAEJE,GAAavE,EAAAA,uBACxBkE,GAAa9D,EAAAA,UAAW,gBACvBoE,GAAeD,GAIF,SAAAE,GAAiB5E,GAC/B,OACE8D,EAAAA,cAAc9D,IACdkD,GAAgBlD,EAAM+D,IAAMP,GAAiBxD,EAAMsE,QACnDpB,GAAgBlD,EAAMgE,IAAMR,GAAiBxD,EAAMuE,OAEvD,CAIa,IAAAM,GAAgB1E,EAAAA,uBAC3ByE,GAAiBxE,EAASA,UAAE,oBAC3B0E,GAAkBD,GAERE,GAAiB5E,EAAAA,uBAC5ByE,GAAiBrE,EAASA,UAAE,oBAC3ByE,GAAmBD,GAIN,SAAAE,GAAcjF,GAC5B,OACEkF,EAAkBA,mBAAClF,IACnBmF,EAAAA,aAAanF,EAAMoF,KAAKhG,KACxBiG,cAAYrF,EAAMV,QAEtB,CAIa,IAAAgG,GAAanF,EAAAA,uBACxB8E,GAAc7E,EAAAA,UAAW,oBACxBmF,GAAeD,GAELE,GAAcrF,EAAAA,uBACzB8E,GAAc1E,EAAAA,UAAW,oBACxBkF,GAAgBD,GAIb,SAAUE,GAAqB1F,GACnC,OAAOkF,EAAAA,mBAAmBlF,EAC5B,CAIa,IAAA2F,GAAoBxF,EAAsBA,uBACrDuF,GAAqBtF,EAASA,UAAE,uBAC/BwF,GAAsBD,GAEZE,GAAqB1F,EAAsBA,uBACtDuF,GAAqBnF,EAASA,UAAE,uBAC/BuF,GAAuBD,GAuSpB,SAAUE,GACdC,EAAqBC,EAAmBC,EAAiBC,GAEzDhF,GAAc,cAAc6E,GAC5BnF,GAAmB,SAASoF,GAC5BxE,GAAoB,QAAQyE,GAC5BE,EAAAA,aAAoB,QAAQD,GAK5B,IAHA,IAAIE,EAA0B,IAAIC,IAE5BC,EAAYN,EAAOM,UAChBC,EAAID,EAAUE,OAAO,EAAGD,GAAK,EAAGA,IAAK,CAC5C,IAAME,EAAgBH,EAAUC,GAE7BE,EAAcT,SAAWA,GACzBS,IAAkBR,GAAWC,IAAUK,GACxCH,EAASM,IAAID,GAEbT,EAAOW,eAAeJ,GAEtBH,EAASQ,IAAIH,EAEjB,CACF,CAIgB,SAAAI,GACdd,EAAqBE,EAAiBa,EAAqBZ,GAE3DhF,GAAc,cAAc6E,GAC5BvE,GAAoB,QAAQyE,GAC5BnE,GAAkB,UAAUgF,GAC5BX,EAAAA,aAAoB,QAAQD,GAK5B,IAHA,IAAIa,EAA8B,IAAIV,IAEhCW,EAAcf,EAAMe,YACjBT,EAAIS,EAAYR,OAAO,EAAGD,GAAK,EAAGA,IAAK,CAC9C,IAAMU,EAAkBD,EAAYT,GAEjCU,EAAgBhB,QAAUA,GAC1BgB,IAAoBH,GAAaZ,IAAUK,GAC5CQ,EAAWL,IAAIO,GAEfhB,EAAMiB,iBAAiBX,GAEvBQ,EAAWH,IAAIK,EAEnB,CACF,CAMA,IAAME,GAAyB,CAAErD,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IAe5C,SAAA8C,GAAmBrH,EAAWsH,GAC5C,OAAQC,EAAcA,eAACvH,GAASA,EAAQsH,CAC1C,CAIgB,SAAAE,GACdxH,EAAWsH,GAEX,OACW,MAATtH,OACEyH,EACAF,EAAcA,eAACvH,GAASA,EAAQsH,CAEtC,CAIgB,SAAAI,GAAkB1H,EAAWsH,GAC3C,OAAQK,EAAAA,cAAc3H,GAASA,EAAQsH,CACzC,UAIgBM,GACd5H,EAAWsH,GAEX,OAAQK,EAAaA,cAAC3H,GAASA,EAAQsH,CACzC,CAIgB,SAAAO,GACd7H,EAAWsH,EACXQ,EAA6BC,EAC7BC,EAAyBC,GAEzB,YAHAH,IAAAA,IAAAA,GAAmBI,eAAUH,IAAAA,IAAAA,EAAkBG,eAC/CF,IAAAA,IAAAA,GAAkB,YAAOC,IAAAA,GAAkB,GAEnCE,EAAoBA,qBAACnI,EAAM8H,EAASC,EAASC,EAAQC,GAAWjI,EAAQsH,CAClF,UAIgBc,GACdpI,EAAWsH,EACXQ,EAA6BC,EAC7BC,EAAyBC,GAEzB,YAHAH,IAAAA,IAAAA,GAAmBI,mBAAUH,IAAAA,EAAkBG,mBAC/CF,IAAAA,GAAkB,QAAOC,IAAAA,IAAAA,GAAkB,GAGzCE,EAAoBA,qBAACnI,EAAM8H,EAASC,EAASC,EAAQC,GACnDjI,EACAsH,CAEN,CAIgB,SAAAe,GAAmBrI,EAAWsH,GAC5C,OAAQgB,EAAcA,eAACtI,GAASA,EAAQsH,CAC1C,CAIgB,SAAAiB,GACdvI,EAAWsH,GAEX,OAAQgB,EAAAA,eAAetI,GAASA,EAAQsH,CAC1C,CAIgB,SAAAkB,GACdxI,EAAWsH,EAAgBQ,EAA6BC,GAExD,YAF2BD,IAAAA,IAAAA,GAAmBI,eAAUH,IAAAA,IAAAA,EAAkBG,UAElEO,EAAAA,sBAAsBzI,EAAM8H,EAASC,GAAY/H,EAAQsH,CACnE,UAIgBoB,GACd1I,EAAWsH,EACXQ,EAA6BC,GAE7B,gBAFAD,IAAAA,GAAmBI,eAAUH,IAAAA,IAAAA,EAAkBG,UAEvCO,EAAAA,sBAAsBzI,EAAM8H,EAASC,GAAY/H,EAAQsH,CACnE,CAIgB,SAAAqB,GAAmB3I,EAAWsH,GAC5C,OAAQsB,EAAAA,eAAe5I,GAASA,EAAQsH,CAC1C,CAIgB,SAAAuB,GACd7I,EAAWsH,GAEX,OAAQsB,EAAcA,eAAC5I,GAASA,EAAQsH,CAC1C,CAIgB,SAAAwB,GAAkB9I,EAAWsH,GAC3C,OAAQyB,EAAaA,cAAC/I,GAASA,EAAQsH,CACzC,CAIgB,SAAA0B,GACdhJ,EAAWsH,GAEX,OAAQyB,EAAAA,cAAc/I,GAASA,EAAQsH,CACzC,CAIgB,SAAA2B,GAA0BjJ,EAAWsH,GACnD,OAAQyB,EAAaA,cAAC/I,IAA4B,KAAjBA,EAAMkJ,OAAiBlJ,EAAQsH,CAClE,CAIgB,SAAA6B,GACdnJ,EAAWsH,GAEX,OAAQyB,EAAAA,cAAc/I,IAA4B,KAAjBA,EAAMkJ,OAAiBlJ,EAAQsH,CAClE,CAIgB,SAAA8B,GACdpJ,EAAWsH,EAAgB+B,GAE3B,OAAQ7G,EAAqBA,sBAACxC,EAAMqJ,GAAWrJ,EAAQsH,CACzD,UAIgBgC,GACdtJ,EAAWsH,EAA0B+B,GAErC,OAAQ7G,EAAAA,sBAAsBxC,EAAMqJ,GAAWrJ,EAAQsH,CACzD,CAIA,IAAMiC,GAA+B,qEAErB,SAAAC,GAAgBxJ,EAAWsH,GACzC,OAAQ9E,EAAqBA,sBAACxC,EAAMuJ,IAAgCvJ,EAAQsH,CAC9E,CAIgB,SAAAmC,GACdzJ,EAAWsH,GAEX,OAAQjC,EAAAA,YAAYrF,GAASA,EAAQsH,CACvC,CAIgB,SAAAoC,GAAoB1J,EAAWsH,GAC7C,OAAQ9I,EAAeA,gBAACwB,GAASA,EAAQsH,GAASqC,QAChD,kCAAkC,MAEtC,CAIgB,SAAAC,GACd5J,EAAWsH,GAEX,IAAMuC,EAASrL,EAAeA,gBAACwB,GAASA,EAAQsH,EAChD,OACY,MAAVuC,OACEpC,EACAoC,EAAOF,QAAQ,kCAAkC,MAEvD,CAIgB,SAAAG,GAAoB9J,EAAWsH,GAC7C,OAAQyC,EAAAA,gBAAgB/J,GAASA,EAAQsH,CAC3C,CAIgB,SAAA0C,GACdhK,EAAWsH,GAEX,OAAQyC,EAAeA,gBAAC/J,GAASA,EAAQsH,CAC3C,CAIgB,SAAA2C,GAAgBjK,EAAWsH,GACzC,OAAQ4C,EAAAA,YAAYlK,GAASA,EAAQsH,CACvC,UAIgB6C,GACdnK,EAAWsH,GAEX,OAAQ4C,EAAWA,YAAClK,GAASA,EAAQsH,CACvC,UAIgB8C,GACdpK,EAAWsH,EAAe+C,GAE1B,OAAQC,EAAqBA,sBAACtK,EAAMqK,GAAWrK,EAAQsH,CACzD,CAIgB,SAAAiD,GACdvK,EAAWsH,EAAyB+C,GAEpC,OAAQC,EAAAA,sBAAsBtK,EAAMqK,GAAWrK,EAAQsH,CACzD,CAIgB,SAAAkD,GAAiBxK,EAAWsH,GAC1C,OAAQmD,EAAYA,aAACzK,GAASA,EAAQsH,CACxC,CAIgB,SAAAoD,GACd1K,EAAWsH,GAEX,OAAQmD,EAAYA,aAACzK,GAASA,EAAQsH,CACxC,CAIgB,SAAAqD,GAAwB3K,EAAWsH,GACjD,OAAQsD,EAAAA,oBAAoB5K,GAASA,EAAQsH,CAC/C,CAIgB,SAAAuD,GAAuB7K,EAAWsH,GAChD,OAAQ/I,GAAmByB,GAASA,EAAQsH,CAC9C,CAIgB,SAAAwD,GAAe9K,EAAWsH,GACxC,OAAQyD,EAAAA,WAAW/K,GAASA,EAAQsH,CACtC,CAQA,SAAS0D,KACP,OAAOC,EAAIA,KAAAC,IAAAA,EAAAC,GAAyCC,CAAAA,yCAAAA,QAAAA,GAAiBC,MACvE,CAIA,SAASC,KAAaC,IAAAA,EAEpBF,KAAM5L,EAAQ4L,KAAK5L,MACnB,OAAa,MAATA,EAAwBuL,GAAgBQ,KAAKH,MAK1CJ,EAAIA,KAAAQ,IAAAA,EAAAN,0GAFK,WAAH,OAASI,EAAKvF,QAAQ0F,UAAUH,EAAK9L,EAAM,EAK1D,CAQa,IAAAkM,GAAQC,EAAAA,eAAeC,EAAgBA,iBAAC,IAI/CC,GAA0D,IAAIC,QAqBpE,SAASC,GAAkB/F,GACzB,IAEIgG,EAAiBH,GAAyBI,IAF9BjG,EAAOD,SAGD,MAAlBiG,UAEGA,EAAehG,EAAOkG,GAC/B,CAIA,SAASC,GAAcpG,EAAqBmG,GAC1C,IAAIF,EAAiBH,GAAyBI,IAAIlG,GAClD,GAAsB,MAAlBiG,EAEJ,OAAOA,EAAeE,EACxB,CAIA,IAAME,GAA2D,IAAIN,QAqBrE,SAASO,GAAmBvF,GAC1B,IAEIwF,EAAkBF,GAA0BH,IAFhCnF,EAAQf,SAGD,MAAnBuG,UAEGA,EAAgBxF,EAAQoF,GACjC,CAaM,SAAUK,GAAeC,GAC7B5G,GAAmB,gBAAgB4G,UAE5BA,EAAcN,GAEjBjC,EAAWA,YAACuC,EAAclG,YAC3BkG,EAAclG,UAA6BmG,QAC1C,SAACD,UAA+BD,GAAcC,EAAc,GAI5DvC,EAAAA,YAAYuC,EAAcxF,cAC3BwF,EAAcxF,YAA+ByF,QAC5C,SAACD,GAA0B,OAAKD,GAAcC,EAAc,EAGlE,CAMA,IAAME,GAA6D,IAAIZ,QAIvE,SAASa,GACPC,EAAmBC,GAEnB,IAAIC,EAAoBJ,GAA2BT,IAAIW,GAC9B,MAArBE,GACFJ,GAA2BK,IAAIH,EAAOE,EAAoB,IAE5DA,EAAkBE,KAAKH,EACzB,CAIA,SAASI,GAAoCL,GAC3C,IAAIE,EAAoBJ,GAA2BT,IAAIW,GAC9B,MAArBE,GAEJA,EAAkBL,QAAQ,SAACI,GACzBlO,GAAQkO,EACV,EACF,CAWA,IAAMK,GAA0DC,OAAOC,OAAO,MACxEC,GAA0DF,OAAOC,OAAO,MACxEE,GAA0DH,OAAOC,OAAO,MAI9E,SAASG,GACPC,EAAyBC,EACzBC,EAA6BC,EAC7BC,EAA4BC,GAE5BC,EAAcA,eAAC,uBAAuBN,GACtCM,EAAcA,eAAO,iBAAiBL,GACtC/K,GAAsB,gBAAgBgL,GACtCK,EAAAA,iBAAmB,mBAAmBJ,GACtCK,EAAaA,cAAK,oBAAoBJ,GAEtC,IAAMK,EAAyBT,EAAWU,cAAcxE,QAAQ,MAAM,IAChEyE,EAAyBT,EAAaQ,cAEtCE,EAAkBC,GAAQV,CAAAA,EAAAA,GAE9BS,EAAmBE,aADkB,MAAnCF,EAAmBE,aAC6BZ,gBAAAA,EACpD,OAEKU,EAAmBE,aAA0B5E,QAAQ,SAAS,IAAIA,QAAQ,SAAS,MAIpFyE,KAA0Bd,IAAkBjO,GAC9C,4BAA8BS,EAAAA,OAAO6N,GAAgB,2BAGvD,IAAIa,EAAmBrB,GAAwBe,GACvB,MAApBM,IACFrB,GAAwBe,GAAuBM,EAAmB,CAChEf,WAAAA,EAAYgB,YAAYrB,OAAOC,OAAO,QAI1CmB,EAAiBC,YAAYd,GAAgB,CAC3Ce,MAAMhB,EAAeiB,WAAWd,EAAkBD,SAASS,GAGrC,MAApBR,IACFN,GAAiBa,GAA0BC,EAC3Cf,GAAiBc,GAA0BP,GAGxB,MAAjBC,GACEjP,GAAqBG,UAAU4P,QAAQd,EAAc5E,QAAU,IACjErK,GAAqBG,WAAa8O,EAGxC,CAmCA,SAASe,GAA8BlB,GAA2BmB,IAAAA,OAChE/M,GAAwB,SAASsJ,MACjC1I,GAAiB,gBAAgBgL,GAEjC,IAAME,EAAmBP,GAAiBK,EAAaQ,eAC/B,MAApBN,GAA0BxO,GAC5B,sCAAwCS,EAAMA,OAAC6N,GAAgB,UAGjE,IAMMoB,EAAY1D,KAAK0D,SAASC,KAAK3D,MAC/B4D,EAAY5D,KAAK4D,QAAQD,KAAK3D,MAC9B6D,EAAY7D,KAAK6D,UAAUF,KAAK3D,MAEtCwC,EAAiBrC,KACfH,KAAMA,KAAKA,KAAM8D,GAAIC,GAAK/D,KAAKrF,QAAQqJ,YAAapE,EAAAA,KAXnC,SAAC6B,GAClBwC,EAAcA,eAAC,oBAAoBxC,GAEnCF,GAA2BkC,EAAKnQ,GAASmO,GAC3C,EAQEiC,EAASE,EAAQC,EAErB,CAyBA1B,GAAiB,cAAe,gBAAiB,eAAgB,CAC/D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCgK,aAAa,uEACZ,SACDiB,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WAAA,OAAM9D,EAAI0E,IAAAA,EAAAxE,GAAsC,CAAA,0CAAA,EAC3D,EAAC,+FAUDqC,GAAiB,cAAe,cAAe,aAAc,CAC3DoC,eAAc,EACdL,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGG,eAAgB,EAEnBH,EAAGM,SAAW,SAAUC,GACtB,IAAQC,EAAqCD,EAArCC,iBAAiBC,EAAoBF,EAApBE,gBAEnBlQ,EAAQwJ,GAAeiG,EAAGzP,MAAM,IAoBtC,OAAOiL,EAAIkF,IAAAA,EAAAhF,6WAAsCC,GAAiBoE,GAChDS,EAGEC,EAAiCA,EACnCA,EAAmCA,EAElBlQ,EAzBjB,SAACoQ,GACjB,GAAkB,QAAdA,EAAMC,IAAe,CACvBD,EAAME,kBACNF,EAAMG,iBAEN,IAAMC,EAASJ,EAAMK,OACbC,EAAuCF,EAAvCE,MAAOC,EAAgCH,EAAhCG,eAAeC,EAAiBJ,EAAjBI,aAI9B,OAHEJ,EAAOE,MAAQA,EAAMG,MAAM,EAAEF,GAAkB,KAAOD,EAAMG,MAAMD,GACpEJ,EAAOG,eAAiBH,EAAOI,aAAeD,EAAe,GAG/D,CAAA,CACF,EAEgB,SAACP,GACfX,EAAGzP,MAASoQ,EAAMK,OAA+BC,KACnD,EAaF,CACF,EAAC,63BAkCDlD,GAAiB,cAAe,UAAW,UAAW,CACpD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,KACtC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,SAAUC,GACtB,OAAO/E,EAAI6F,IAAAA,EAAA3F,GACb,CAAA,gCAAA,CACF,EAAC,uIAYDqC,GAAiB,cAAe,QAAS,QAAS,CAChD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,SACL,SACDwP,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WACP,IAAM/O,EAAQ0J,GAAmB+F,EAAGzP,MAAM,IAC1C,OAAOiL,EAAI8F,IAAAA,EAAA5F,GAAA,CAAA,gCAAA,IAAA,YAAgCsE,EAAGuB,SAAYhR,EAC5D,EACF,EAMC,gIAIDwN,GAAiB,cAAe,WAAY,WAAY,CACtD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,YACL,SACDwP,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WACP,IAAM/O,EAAQ0J,GAAmB+F,EAAGzP,MAAM,IAC1C,OAAOiL,EAAIgG,IAAAA,EAAA9F,uDAAmCsE,EAAGuB,SAAYhR,EAC/D,EACF,EAMC,sIAIDwN,GAAiB,cAAe,QAAS,QAAS,CAChD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,SACL,SACDwP,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WACP,IAAM/O,EAAQ0J,GAAmB+F,EAAGzP,MAAM,IAC1C,OAAOiL,EAAIiG,IAAAA,EAAA/F,GAAgCsE,CAAAA,gCAAAA,IAAAA,YAAAA,EAAGuB,SAAYhR,EAC5D,EACF,EAAC,gIAUDwN,GAAiB,cAAe,OAAQ,OAAQ,CAC9C+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,QACL,SACDwP,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WACP,IAAM/O,EAAQwJ,GAAeiG,EAAGzP,MAAM,IACtC,OAAOiL,EAAIkG,IAAAA,EAAAhG,GAA+BsE,CAAAA,+BAAAA,IAAAA,YAAAA,EAAGuB,SAAYhR,EAC3D,EACF,EAMC,gIAIDwN,GAAiB,cAAe,YAAa,YAAa,CACxD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,aACL,SACDwP,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WACP,IAAM/O,EAAQwJ,GAAeiG,EAAGzP,MAAM,IACtC,OAAOiL,EAAImG,IAAAA,EAAAjG,GAAoCsE,CAAAA,oCAAAA,IAAAA,YAAAA,EAAGuB,SAAYhR,EAChE,EACF,EAMC,0IAIDwN,GAAiB,cAAe,YAAa,WAAY,CACvD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,0BACNuO,aAAY,2DAIX,SACDiB,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WAAM,OAAA9E,EAAIoG,IAAAA,EAAAlG,GAAA,CAAA,4DAAA,cACI,CAACmG,OAAO9H,GAAeiG,EAAGzP,MAAM,KAE9D,CAAA,GAIAwN,GAAiB,cAAe,aAAc,YAAa,CACzD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,wDACNuO,uEAIC,SACDiB,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WAAM,OAAA9E,EAAIsG,IAAAA,EAAApG,8CAAkCL,GAAc2E,EAAGzP,MAAM,IAAG,CACtF,EAAC,2HAUDwN,GAAiB,cAAe,WAAY,UAAW,CACrD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCgK,wEAIC,SACDiB,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAMyB,EAAU,6BAA+BC,KAAKjI,GAAeiG,EAAGzP,MAAM,KAC5E,OAAOiL,EAAIyG,IAAAA,EAAAvG,GAAA,CAAA,gCAAA,QAAgCqG,EAC7C,CACF,yHAUAhE,GAAiB,cAAe,WAAY,UAAW,CACrD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,KACvCsL,SAAS,IAAKC,UAAU,GACxB9P,MAAM,uBACNuO,aAAY,2DAIX,SACDiB,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WAAA,OAAM9E,EAAI0G,IAAAA,EAAAxG,GAAA,CAAA,0CAAA,cAChBL,GAAc2E,EAAGzP,MAAM,IAEjC,CAAA,GAIAwN,GAAiB,cAAe,QAAS,QAAS,CAChD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,EAAG4R,gBAAgB,MAAOC,gBAAgB,SAC/C,SACDrC,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAM/P,EACJ2H,EAAAA,cAAc8H,EAAGzP,OACf,GAAGyP,EAAGzP,MACN0J,GAAmB+F,EAAGzP,MAAM,IAE1B8R,EAAeC,KAAKC,MAAMD,KAAKE,IAAIxC,EAAGnL,MAAMmL,EAAGlL,OAAO,IAE5D,OAAO0G,EAAIiH,IAAAA,EAAA/G,GACMsE,CAAAA,wDAAAA,mBAAAA,4BAAAA,gBAAAA,SAAAA,EAAGmC,gBAAkCE,EACtCrC,EAAGlL,OAAO,EACtBmF,GAAmB1J,EAAM,IAC/B,CACF,EAAC,wJAWDwN,GAAiB,cAAe,OAAQ,OAAQ,CAC9C+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,6FAKC,SACDiB,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASiD,EAAS/B,GACG,GAAfX,EAAG2C,WAEP3C,EAAGzP,MAAQoQ,EAAMK,OAAOC,MAEG,mBAAhBjB,EAAG4C,UAA2B5C,EAAG4C,SAASjC,GACvD,CAEAX,EAAGM,SAAW,WACZ,IAAM/P,EAAQ8K,GAAc2E,EAAGzP,MAAM,sBAC/BsS,EAAQ9H,GAAgBiF,EAAG6C,MAAM,SAEvC,OAAOrH,EAAIsH,IAAAA,EAAApH,GACgBnL,CAAAA,iEAAAA,qBAAAA,gCAAAA,uBAAAA,YAAAA,gBAAAA,EAA0BA,EAChCsS,EACO,GAAf7C,EAAG2C,SAA6BD,EAE/C,CACF,EAOC,mMAID3E,GAAiB,cAAe,uBAAwB,sBAAuB,CAC7E+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,IACR,SACDL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,kBAAM9D,EAAIuH,IAAAA,EAAArH,GAAA,CAAA,iDAAA,EACrB,EAMC,6HAKDqC,GAAiB,cAAe,qBAAsB,oBAAqB,CACzE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCuL,UAAU,IACT,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCH,EAAS,WAAA,OAAM9D,EAAIwH,IAAAA,EAAAtH,GAAA,CAAA,+CAAA,EACrB,EAMC,0HAIDqC,GAAiB,cAAe,MAAO,OAIvCA,GAAiB,cAAe,WAAY,WAI5CA,GAAiB,kBAAmB,SAAU,SAAU,CACtD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,SACNuO,sFAKC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASiD,EAAS/B,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAGvB,mBAAhBX,EAAG4C,UAA2B5C,EAAG4C,SAASjC,EACvD,CAEAX,EAAGM,SAAW,WACZ,IAAMrB,EAAQhF,GAAmB+F,EAAGf,OAASe,EAAGzP,MAAM,IAEtD,OAAOiL,EAAI0H,IAAAA,EAAAxH,GACKsE,CAAAA,2DAAAA,yBAAAA,YAAAA,YAAAA,SAAAA,EAAGmD,YAAcnD,EAAGlL,OACR,GAAfkL,EAAG2C,SAA6BD,EAC1CzD,EACL,CACF,wMAaAlB,GAAiB,kBAAmB,WAAY,WAAY,CAC1D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,gGAKC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASiD,EAAS/B,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoQ,EAAMK,OAAOoC,QAEG,mBAAhBpD,EAAG4C,UAA2B5C,EAAG4C,SAASjC,EACvD,CAEAX,EAAGM,SAAW,WACZ,IAAM/P,EAAQwH,GAA0BiI,EAAGzP,OAErC6S,EAA0B,GAAT7S,EACjB8S,EAA0B,MAAT9S,EAEvB,OAAOiL,EAAI8H,IAAAA,EAAA5H,GAAA,CAAA,gEAAA,kBAAA,sBAAA,YAAA,gBACC0H,EAAyBC,EACT,GAAfrD,EAAG2C,SAA6BD,EAE/C,CACF,GAIA3E,GAAiB,kBAAmB,cAAe,cAAe,CAChE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,8FAKC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASiD,EAAS/B,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoQ,EAAMK,OAAOoC,QAEG,mBAAhBpD,EAAG4C,UAA2B5C,EAAG4C,SAASjC,EACvD,CAEAX,EAAGM,SAAW,WACZ,IAAM/P,EAAQqH,GAAkBoI,EAAGzP,OAAM,GAEzC,OAAOiL,EAAI+H,IAAAA,EAAA7H,sHACU,GAATnL,EACgB,GAAfyP,EAAG2C,SAA6BD,EAE/C,CACF,GAIA3E,GAAiB,kBAAmB,QAAS,QAAS,CACpD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,EACNuO,+KASC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAM/P,EAAQ0H,GACZqB,EAAaA,cAAC0G,EAAGzP,OAASiT,WAAWxD,EAAGzP,OAAmByP,EAAGzP,MAAO,GAEjEkT,EAAatL,GAAyB6H,EAAGyD,SACzCC,EAAavL,GAAyB6H,EAAG0D,YACzCC,EAAaxL,GAAyB6H,EAAG2D,SACzCC,EAAazL,GAAyB6H,EAAG4D,YACzCC,EAAa1L,GAAyB6H,EAAG6D,SAE/C,OAAOrI,EAAIsI,IAAAA,EAAApI,GAAkCnL,CAAAA,kCAAAA,iBAAAA,QAAAA,QAAAA,kBAAAA,QAAAA,gBAAAA,EACrCkT,EAAeC,EAAkBC,EAChCC,EAAkBC,EAE7B,CACF,GAIA9F,GAAiB,kBAAmB,cAAe,cAAe,CAChE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,EACNuO,aAAY,sEAKX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAM/P,EAAQ0H,GACZqB,EAAAA,cAAc0G,EAAGzP,OAASiT,WAAWxD,EAAGzP,OAAmByP,EAAGzP,MAAO,GAEjEsT,EAAU1L,GAAyB6H,EAAG6D,SAE5C,OAAOrI,EAAIuI,IAAAA,EAAArI,GAA2CnL,CAAAA,2CAAAA,QAAAA,+BAAAA,SAAAA,EAAasT,EAC7C7D,EAAGmC,iBAAmB,aAC9C,CACF,EAAC,kgBAoBD,IAAM6B,GAAkB,8HAExBjG,GAAiB,kBAAmB,SAAU,SAAU,CACtD+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,yMASC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASwE,EAAiB1T,GACxB,OAAOwC,EAAAA,sBAAsBxC,EAAMyT,KAAoB9L,EAAAA,cAAc3H,EACvE,CAEA,SAAS2T,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcX,WAAW7C,EAAMK,OAAOC,OAEzB,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAdnCtE,EAAGmE,YAAc,EAgBjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAQ0H,GACVqB,EAAAA,cAAc0G,EAAGzP,OAASiT,WAAWxD,EAAGzP,OAAmByP,EAAGzP,MAAO,GAEjEkT,EAAWtL,GAAyB6H,EAAGyD,SACvCc,EAAW5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GAClE6L,EAAW1L,GAAyB6H,EAAG6D,SAEvCW,EAAY1J,GAChBkF,EAAGwE,eAAWxM,EAAWiM,GAGvB5U,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA2BoU,EAAvBC,EAAmB,GAevB,OAdkB,MAAbJ,GAAuBA,EAAUxN,OAAS,IAC7C2N,EAAa3E,EAAGtD,GAAK,aAErBkI,EAAepJ,EAAIqJ,IAAAA,EAAAnJ,GAAkBiJ,CAAAA,kBAAAA,gBAAAA,yBAAAA,CAAAA,mBAAAA,gBAAAA,2BAAAA,EACjCH,EAAUM,IAAI,SAACC,GAEf,IAAMxU,GADNwU,EAAO,GAAGA,GACS7K,QAAQ,OAAO,IAAIT,OAChCwF,EAAQ8F,EAAK7K,QAAQ,UAAU,IAAIT,OAEzC,OAAO+B,EAAIwJ,IAAAA,EAAAtJ,GAAA,CAAA,iBAAA,IAAA,eAAiBnL,EAAS0O,EACvC,KAIGzD,EAAIyJ,IAAAA,EAAAvJ,GACDnL,CAAAA,yDAAAA,QAAAA,QAAAA,SAAAA,sBAAAA,YAAAA,WAAAA,kBAAAA,aAAAA,MAAAA,EAAakT,EAAeI,EAAgBU,EAC1B,GAAfvE,EAAG2C,SAA6BuB,EAAkBG,EACtDM,EACLC,EACN,CACF,GAIA7G,GAAiB,kBAAmB,iBAAkB,gBAAiB,CACrE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,iTAYC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAgB0J,GAAmB+F,EAAGzP,MAAM,IAC5C2U,EAAgB/K,GAA2B6F,EAAGkF,aAC9CC,EAAgBpN,GAA0BiI,EAAGmF,UAC7CC,EAAgBhM,GAA0B4G,EAAGoF,WAC7CC,EAAgBjM,GAA0B4G,EAAGqF,WAC7CzL,EAAgBO,GAA2B6F,EAAGpG,SAC9C0L,EAAgBvN,GAA0BiI,EAAGsF,eAE7CC,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWjJ,EAAeA,iBAGxCM,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIkK,IAAAA,EAAAhK,GAAgB8J,CAAAA,gBAAAA,gBAAAA,2BAAAA,EACjCD,EAAYT,IAAI,SAACvU,UAAiBiL,EAAImK,IAAAA,EAAAjK,GAAA,CAAA,iBAAA,gBAAiBnL,EAAK,KAI3DiL,EAAIoK,IAAAA,EAAAlK,GAAA,CAAA,+DAAA,cAAA,cAAA,sBAAA,gBAAA,qBAAA,eAAA,sBAAA,YAAA,WAAA,kBAAA,aAAA,MACDnL,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACzBtL,EAAsB0L,EACN,GAAftF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAAC,qYAkBD1H,GAAiB,kBAAmB,iBAAkB,gBAAiB,CACrE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,mOAUC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAc0J,GAAmB+F,EAAGzP,MAAM,IAC1C2U,EAAc/K,GAA2B6F,EAAGkF,aAC5CC,EAAcpN,GAA0BiI,EAAGmF,UAC3CC,EAAchM,GAA0B4G,EAAGoF,WAC3CC,EAAcjM,GAA0B4G,EAAGqF,WAC3CzL,EAAcO,GAA2B6F,EAAGpG,SAQlD,OANIvK,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGZiL,EAAIqK,IAAAA,EAAAnK,GAAA,CAAA,mEAAA,cAAA,cAAA,sBAAA,gBAAA,qBAAA,sBAAA,YAAA,WAAA,gBACDnL,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACzBtL,EACgB,GAAfoG,EAAG2C,SAA6BuB,EAAkBG,EAEjE,CACF,EAcC,qYAIDtG,GAAiB,kBAAmB,eAAgB,cAAe,CACjE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,yQAWC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcX,WAAW7C,EAAMK,OAAOC,OAEzB,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,EAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAyB0H,GAC3BqB,EAAAA,cAAc0G,EAAGzP,OAASiT,WAAWxD,EAAGzP,OAAmByP,EAAGzP,MAAO,GAEjE2U,EAAc/K,GAA2B6F,EAAGkF,aAC5CC,EAAcpN,GAA0BiI,EAAGmF,UAC3C1B,EAActL,GAAyB6H,EAAGyD,SAC1Cc,EAAc5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GACrE6L,EAAc1L,GAAyB6H,EAAG6D,SAE1C0B,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWE,iBAGzB7I,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIsK,IAAAA,EAAApK,GAAgB8J,CAAAA,gBAAAA,gBAAAA,2BAAAA,EACjCD,EAAYT,IAAI,SAACvU,GAAiB,OAAAiL,EAAIuK,IAAAA,EAAArK,qCAAiBnL,EAAK,KAI3DiL,EAAIwK,IAAAA,EAAAtK,oNACDnL,EAAakT,EAAeI,EAAgBU,EACzCY,EAAwBD,EACT,GAAflF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAcC,+XAID1H,GAAiB,kBAAmB,qBAAsB,mBAAoB,CAC5E+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,qQAWX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAc6K,GAAsB4E,EAAGzP,MAAM,IAC7C2U,EAAc/K,GAA2B6F,EAAGkF,aAC5CC,EAAcpN,GAA0BiI,EAAGmF,UAC3CC,EAAchM,GAA0B4G,EAAGoF,WAC3CC,EAAcjM,GAA0B4G,EAAGqF,WAC3CzL,EAAcO,GAA2B6F,EAAGpG,SAE5C2L,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWlJ,IAGzBO,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIyK,IAAAA,EAAAvK,GAAgB8J,CAAAA,gBAAAA,gBAAAA,2BAAAA,EACjCD,EAAYT,IAAI,SAACvU,UAAiBiL,EAAI0K,IAAAA,EAAAxK,GAAA,CAAA,iBAAA,gBAAiBnL,EAAK,KAI3DiL,EAAI2K,IAAAA,EAAAzK,GAAA,CAAA,iEAAA,cAAA,cAAA,sBAAA,gBAAA,qBAAA,sBAAA,YAAA,WAAA,kBAAA,aAAA,MACDnL,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACzBtL,EACgB,GAAfoG,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAcC,8YAID1H,GAAiB,kBAAmB,sBAAuB,oBAAqB,CAC9E+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,0PAWX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAc0J,GAAmB+F,EAAGzP,MAAM,IAC1C2U,EAAc/K,GAA2B6F,EAAGkF,aAC5CC,EAAcpN,GAA0BiI,EAAGmF,UAC3CC,EAAchM,GAA0B4G,EAAGoF,WAC3CC,EAAcjM,GAA0B4G,EAAGqF,WAC3CzL,EAAcO,GAA2B6F,EAAGpG,SAE5C2L,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWmD,EAAAA,qBAGzB9L,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAI4K,IAAAA,EAAA1K,+DAAgB8J,EACjCD,EAAYT,IAAI,SAACvU,GAAY,OAAKiL,EAAI6K,IAAAA,EAAA3K,GAAA,CAAA,iBAAA,gBAAiBnL,EAAK,KAI3DiL,EAAI8K,IAAAA,EAAA5K,GAAA,CAAA,oEAAA,cAAA,cAAA,sBAAA,gBAAA,qBAAA,sBAAA,YAAA,WAAA,kBAAA,aAAA,MACDnL,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACzBtL,EACgB,GAAfoG,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAcC,iZAID1H,GAAiB,kBAAmB,YAAa,WAAY,CAC3D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,iPAWX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAc8K,GAAc2E,EAAGzP,MAAM,IACrC2U,EAAc/K,GAA2B6F,EAAGkF,aAC5CC,EAAcpN,GAA0BiI,EAAGmF,UAC3CC,EAAchM,GAA0B4G,EAAGoF,WAC3CC,EAAcjM,GAA0B4G,EAAGqF,WAC3CzL,EAAcO,GAA2B6F,EAAGpG,SAE5C2L,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWsD,EAAAA,YAGzBjM,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAI+K,IAAAA,EAAA7K,GAAA,CAAA,gBAAA,gBAAA,2BAAgB8J,EACjCD,EAAYT,IAAI,SAACvU,GAAY,OAAKiL,EAAIgL,IAAAA,EAAA9K,GAAA,CAAA,iBAAA,gBAAiBnL,EAAK,KAI3DiL,EAAIiL,IAAAA,EAAA/K,GAAA,CAAA,yDAAA,cAAA,cAAA,sBAAA,gBAAA,qBAAA,sBAAA,YAAA,WAAA,kBAAA,aAAA,MACDnL,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACzBtL,EACgB,GAAfoG,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,wXAkBA,IACMiB,GAAc,cAEpB,SAASC,GAAapW,GACpB,OAAOwC,wBAAsBxC,EAAMmW,GACrC,CAEA3I,GAAiB,kBAAmB,aAAc,YAAa,CAC7D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,6OAUC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAyBsJ,GAC3BmG,EAAGzP,WAAOyH,EAAW0O,IAEjBvB,EAAWpN,GAA0BiI,EAAGmF,UACxC1B,EAAW5J,GAAiCmG,EAAGyD,aAASzL,EAAW0O,IACnEnC,EAAW5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GAClE6L,EAAWhK,GAAiCmG,EAAG6D,aAAS7L,EAAW0O,IAEnEnB,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAW2O,IAGzBtX,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIoL,IAAAA,EAAAlL,GAAA,CAAA,gBAAA,gBAAA,2BAAgB8J,EACjCD,EAAYT,IAAI,SAACvU,GAAiB,OAAAiL,EAAIqL,IAAAA,EAAAnL,GAAiBnL,CAAAA,iBAAAA,gBAAAA,EAAiB,KAIvEiL,EAAIsL,IAAAA,EAAApL,GAAA,CAAA,2DAAA,QAAA,QAAA,SAAA,sBAAA,YAAA,sBAAA,YAAA,WAAA,kBAAA,aAAA,MACDnL,EAAakT,EAAeI,EAAgBU,EACzCY,EAnEG,gBAoEY,GAAfnF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAAC,yXAkBD,IACMsB,GAAkB,gCAExB,SAASC,GAAiBzW,GACxB,OAAOwC,EAAAA,sBAAsBxC,EAAMwW,GACrC,CACAhJ,GAAiB,kBAAmB,sBAAuB,gBAAiB,CAC1E+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,oOAUX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAyBsJ,GAC3BmG,EAAGzP,WAAOyH,EAAW+O,IAEjB5B,EAAWpN,GAA0BiI,EAAGmF,UACxC1B,EAAW5J,GAAiCmG,EAAGyD,aAASzL,EAAW+O,IACnExC,EAAW5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GAClE6L,EAAWhK,GAAiCmG,EAAG6D,aAAS7L,EAAW+O,IAEnExB,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWgP,IAGzB3X,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIyL,IAAAA,EAAAvL,GAAA,CAAA,gBAAA,gBAAA,2BAAgB8J,EACjCD,EAAYT,IAAI,SAACvU,GAAY,OAAKiL,EAAI0L,KAAAA,GAAAxL,qCAAiBnL,EAAK,KAI3DiL,EAAI2L,KAAAA,GAAAzL,GACDnL,CAAAA,yEAAAA,QAAAA,QAAAA,SAAAA,sBAAAA,YAAAA,sBAAAA,YAAAA,WAAAA,kBAAAA,aAAAA,MAAAA,EAAakT,EAAeI,EAAgBU,EACzCY,EAlEO,qCAmEQ,GAAfnF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAAC,qYAkBD,IACM2B,GAAc,oBAEpB,SAASC,GAAa9W,GACpB,OAAOwC,EAAqBA,sBAACxC,EAAM6W,GACrC,CAEArJ,GAAiB,kBAAmB,aAAc,YAAa,CAC7D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,gOAUX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAyBsJ,GAC3BmG,EAAGzP,WAAOyH,EAAWoP,IAEjBjC,EAAWpN,GAA0BiI,EAAGmF,UACxC1B,EAAW5J,GAAiCmG,EAAGyD,aAASzL,EAAWoP,IACnE7C,EAAW5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GAClE6L,EAAWhK,GAAiCmG,EAAG6D,aAAS7L,EAAWoP,IAEnE7B,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWqP,IAGzBhY,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAI8L,KAAAA,GAAA5L,GAAA,CAAA,gBAAA,gBAAA,2BAAgB8J,EACjCD,EAAYT,IAAI,SAACvU,GAAiB,OAAAiL,EAAI+L,KAAAA,GAAA7L,GAAiBnL,CAAAA,iBAAAA,gBAAAA,OAItDiL,EAAIgM,KAAAA,GAAA9L,GAAA,CAAA,2DAAA,QAAA,QAAA,SAAA,sBAAA,YAAA,sBAAA,YAAA,WAAA,kBAAA,aAAA,MACDnL,EAAakT,EAAeI,EAAgBU,EACzCY,EAnEG,uBAoEY,GAAfnF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAAC,yXAkBD,IACMgC,GAAc,eAEpB,SAASC,GAAanX,GACpB,OAAOwC,EAAqBA,sBAACxC,EAAMkX,GACrC,CAEA1J,GAAiB,kBAAmB,aAAc,YAAa,CAC7D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,gOAUX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAyBsJ,GAC3BmG,EAAGzP,WAAOyH,EAAWyP,IAEjBtC,EAAWpN,GAA0BiI,EAAGmF,UACxC1B,EAAW5J,GAAiCmG,EAAGyD,aAASzL,EAAWyP,IACnElD,EAAW5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GAClE6L,EAAWhK,GAAiCmG,EAAG6D,aAAS7L,EAAWyP,IAEnElC,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAW0P,IAGzBrY,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAImM,KAAAA,GAAAjM,GAAA,CAAA,gBAAA,gBAAA,2BAAgB8J,EACjCD,EAAYT,IAAI,SAACvU,UAAiBiL,EAAIoM,KAAAA,GAAAlM,GAAA,CAAA,iBAAA,gBAAiBnL,EAAK,KAI3DiL,EAAIqM,KAAAA,GAAAnM,GACDnL,CAAAA,2DAAAA,QAAAA,QAAAA,SAAAA,sBAAAA,YAAAA,sBAAAA,YAAAA,WAAAA,kBAAAA,aAAAA,MAAAA,EAAakT,EAAeI,EAAgBU,EACzCY,EAnEG,iBAoEY,GAAfnF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAcC,yXAID,IACMqC,GAAe,cAErB,SAASC,GAAcxX,GACrB,OAAOwC,wBAAsBxC,EAAMuX,GACrC,CA4lDgB,SAAAnM,GAAkByB,GAChCvM,GAAa,SAASuM,GAEtB,IAAI4K,EAAwB,GAExB5F,EAEEhF,EAFFgF,gBAAiB6F,EAEf7K,EAFe6K,kBAAmB9F,EAElC/E,EAFkC+E,gBACpC+F,EACE9K,EADF8K,WAAYC,EACV/K,EADU+K,SAAUC,EACpBhL,EADoBgL,WAAYC,EAChCjL,EADgCiL,UAAWlF,EAC3C/F,EAD2C+F,WAgBjD,OAbyB,MAAnBf,GAA2B4F,EAAaxK,KAAI,oBAAqB4E,GAC5C,MAArB6F,GACFD,EAAaxK,KAAI,oBACKyK,EAAiB,8BAGlB,MAAnB9F,GAA2B6F,EAAaxK,KAAI,SAAU2E,GAExC,MAAd+F,GAAsBF,EAAaxK,KAAoB0K,eAAAA,GACzC,MAAdC,GAAsBH,EAAaxK,kBAAkB2K,EAAQ,MAC/C,MAAdC,GAAsBJ,EAAaxK,KAAI,eAAgB4K,GACzC,MAAdC,GAAsBL,EAAaxK,KAAmB6K,cAAAA,GACxC,MAAdlF,GAAsB6E,EAAaxK,KAAoB2F,eAAAA,EAAc,MACpE6E,EAAaM,KAAK,IAC3B,CAIA,SAASC,GAAc5H,GACrBA,EAAME,kBACNF,EAAMG,gBACR,CAxnDA/C,GAAiB,kBAAmB,cAAe,aAAc,CAC/D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,8OAUC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAyBsJ,GAC3BmG,EAAGzP,WAAOyH,EAAW8P,IAEjB3C,EAAWpN,GAA0BiI,EAAGmF,UACxC1B,EAAW5J,GAAiCmG,EAAGyD,aAASzL,EAAW8P,IACnEvD,EAAW5L,GAAgCqH,EAAGuE,cAASvM,EAAW,GAClE6L,EAAWhK,GAAiCmG,EAAG6D,aAAS7L,EAAW8P,IAEnEvC,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAW+P,IAGzB1Y,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIgN,KAAAA,GAAA9M,GAAgB8J,CAAAA,gBAAAA,gBAAAA,2BAAAA,EACjCD,EAAYT,IAAI,SAACvU,GAAiB,OAAAiL,EAAIiN,KAAAA,GAAA/M,qCAAiBnL,EAAK,KAI3DiL,EAAIkN,KAAAA,GAAAhN,8MACDnL,EAAakT,EAAeI,EAAgBU,EACzCY,EAnEI,gBAoEW,GAAfnF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAcC,4XAID1H,GAAiB,kBAAmB,aAAc,YAAa,CAC7D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,wMASX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoY,MAAMC,KAAKjI,EAAMK,OAAO6H,OAAO/D,IAAI,SAACgE,GAAQ,OAAKA,EAAK5Y,IAAI,GAAEoY,KAAK,MAEjD,mBAAhBtI,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EAAMA,EAAMK,OAAO6H,MAC1E,CAEA,SAASE,EAAapI,GAAoB,OAAOsC,GAAetC,EAAO,CACvE,SAASqI,EAAarI,GAAoB,OAAOsC,GAAetC,EAAO,CAEvE,SAASsI,EAAQtI,GACf4H,GAAa5H,GACM,GAAfX,EAAG2C,WAEP3C,EAAGzP,MAAQoY,MAAMC,KAAKjI,EAAMuI,aAAaL,OAAO/D,IAAI,SAACgE,GAAa,OAAAA,EAAK5Y,IAAI,GAAEoY,KAAK,MAExD,mBAAftI,EAAGmJ,SAA0BnJ,EAAGmJ,QAAQxI,EAAMA,EAAMuI,aAAaL,OAC9E,CAEA7I,EAAGM,SAAW,WACZ,IAAM/P,EAAkBwJ,GAAeiG,EAAGzP,MAAM,IAAIkJ,OAAOS,QAAQ,WAAW,KACxEgL,EAAkBjL,GAAmB+F,EAAGkF,YAAY,IAAIzL,OACxD2P,EAAkBjP,GAA2B6F,EAAGoJ,gBAAgB,KAChEC,EAAkBtR,GAA0BiI,EAAGqJ,UAErD,OAAO7N,EAAI8N,KAAAA,GAAA5N,GAAA,CAAA,qDAAA,eAAA,WAAA,sBAAA,yEAAA,WAAA,uBAAA,kCACKqN,EAA0BC,EAAqBC,EAEjD,KAAV1Y,EACkB,KAAhB2U,EAAqB,GAAK1J,EAAI+N,KAAAA,GAAA7N,GAAA,CAAA,0CAAA,mBAAA,qBAAA,aAChB4G,KAAKC,MAA0B,KAAnBvC,EAAGmI,UAAY,KAA4BnI,EAAGlL,OACpEoQ,GACJ1J,EAAIgO,KAAAA,GAAA9N,GAAA,CAAA,4BAAA,OAAA,aAA4BsE,EAAGlL,OAAavE,GAGvC8Y,EAAmBD,EACpBlF,EAGhB,CACF,EAAC,0eAmBDnG,GAAiB,kBAAmB,oBAAqB,kBAAmB,CAC1E+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,6MAQC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoY,MAAMC,KAAKjI,EAAMK,OAAO6H,OAAO/D,IAAI,SAACgE,GAAQ,OAAKA,EAAK5Y,IAAI,GAAEoY,KAAK,MAEjD,mBAAhBtI,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EAAMA,EAAMK,OAAO6H,MAC1E,CAEA7I,EAAGM,SAAW,WACZ,IAAMmJ,EAAkBpO,GAAc2E,EAAGyJ,KAAK,qCACxC5G,EAAkB9H,GAAgBiF,EAAG6C,MAAM,SAC3CuG,EAAkBjP,GAA2B6F,EAAGoJ,gBAAgB,KAChEC,EAAkBtR,GAA0BiI,EAAGqJ,UAErD,OAAO7N,EAAIkO,KAAAA,GAAAhO,GAAA,CAAA,+FAAA,qBAAA,kCAAA,4FAAA,WAAA,uBAAA,kCAEkB+N,EAAyBA,EAC/B5G,EAGRwG,EAAmBD,EACpBlF,EAGhB,CACF,EASC,qTAIDnG,GAAiB,kBAAmB,iBAAkB,eAAgB,CACpE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,0NASC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoY,MAAMC,KAAKjI,EAAMK,OAAO6H,OAAO/D,IAAI,SAACgE,GAAQ,OAAKA,EAAK5Y,IAAI,GAAEoY,KAAK,MAEjD,mBAAhBtI,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EAAMA,EAAMK,OAAO6H,MAC1E,CAEA,SAASE,EAAapI,GAAoB,OAAOsC,GAAetC,EAAO,CACvE,SAASqI,EAAarI,GAAoB,OAAOsC,GAAetC,EAAO,CAEvE,SAASsI,EAAQtI,GACf4H,GAAa5H,GACM,GAAfX,EAAG2C,WAEP3C,EAAGzP,MAAQoY,MAAMC,KAAKjI,EAAMuI,aAAaL,OAAO/D,IAAI,SAACgE,GAAQ,OAAKA,EAAK5Y,IAAI,GAAEoY,KAAK,MAExD,mBAAftI,EAAGmJ,SAA0BnJ,EAAGmJ,QAAQxI,EAAMA,EAAMuI,aAAaL,OAC9E,CAEA7I,EAAGM,SAAW,WACZ,IAAM4E,EAAkBjL,GAAmB+F,EAAGkF,YAAY,IAAIzL,OACxD2P,EAAkBjP,GAA2B6F,EAAGoJ,gBAAgB,KAChEC,EAAkBtR,GAA0BiI,EAAGqJ,UAErD,OAAO7N,EAAImO,KAAAA,GAAAjO,GACKqN,CAAAA,wDAAAA,eAAAA,WAAAA,oBAAAA,2DAAAA,WAAAA,uBAAAA,kCAAAA,EAA0BC,EAAqBC,EACrD/D,EAEKmE,EAAmBD,EACpBlF,EAGhB,CACF,EAAC,mgBAqBDnG,GAAiB,kBAAmB,eAAgB,cAAe,CACjE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,+SAYC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAgB0J,GAAmB+F,EAAGzP,MAAM,IAC5C2U,EAAgB/K,GAA2B6F,EAAGkF,aAC9CC,EAAgBpN,GAA0BiI,EAAGmF,UAC7CC,EAAgBhM,GAA0B4G,EAAGoF,WAC7CC,EAAgBjM,GAA0B4G,EAAGqF,WAC7CzL,EAAgBO,GAA2B6F,EAAGpG,SAC9C0L,EAAgBvN,GAA0BiI,EAAGsF,eAE7CC,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWjJ,EAAAA,iBAGzBM,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIoO,KAAAA,GAAAlO,GAAgB8J,CAAAA,gBAAAA,gBAAAA,2BAAAA,EACjCD,EAAYT,IAAI,SAACvU,GAAiB,OAAAiL,EAAIqO,KAAAA,GAAAnO,GAAiBnL,CAAAA,iBAAAA,gBAAAA,EAAiB,KAIvEiL,EAAIsO,KAAAA,GAAApO,GACDnL,CAAAA,+DAAAA,cAAAA,cAAAA,sBAAAA,gBAAAA,qBAAAA,eAAAA,sBAAAA,YAAAA,WAAAA,kBAAAA,aAAAA,MAAAA,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACzBtL,EAAsB0L,EACN,GAAftF,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAcC,+XAID1H,GAAiB,kBAAmB,cAAe,aAAc,CAC/D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,2HAMC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAQ0K,GAAwB+E,EAAGzP,OAEjCgV,EAAczK,GAClBkF,EAAGuF,iBAAavN,EAAWgD,EAAYA,cAGrC3L,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGnB,IAA6BiV,EAAzBC,EAAqB,GASzB,OARoB,MAAfF,GAAyBA,EAAYvO,OAAS,IACjDwO,EAAexF,EAAGtD,GAAK,eAEvB+I,EAAiBjK,EAAIuO,KAAAA,GAAArO,GAAgB8J,CAAAA,gBAAAA,gBAAAA,2BAAAA,EACjCD,EAAYT,IAAI,SAACvU,GAAiB,OAAAiL,EAAIwO,KAAAA,GAAAtO,qCAAiBnL,EAAK,KAI3DiL,EAAIyO,KAAAA,GAAAvO,GACDnL,CAAAA,6DAAAA,sBAAAA,YAAAA,WAAAA,kBAAAA,aAAAA,MAAAA,EACkB,GAAfyP,EAAG2C,SAA6BuB,EAAkBG,EACtDmB,EACLC,EACN,CACF,EAAC,4PAaD1H,GAAiB,kBAAmB,WAAY,WAAY,CAC1D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,oHAMC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoQ,EAAMK,OAAOC,MAEG,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAI/P,EAAQ0J,GAAmB+F,EAAGzP,MAAM,IAElC2Z,EAAUvP,GACdqF,EAAGkK,QAAS,GAAInb,EAAeA,iBASjC,OANIM,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGZiL,EAAI2O,KAAAA,GAAAzO,GAAA,CAAA,kDAAA,YAAA,WAAA,YAAA,eACiB,GAAfsE,EAAG2C,SAA6BuB,EAAkBG,EAC5D6F,EAAQpF,IAAI,SAACsF,GACZ,IAAMC,EAAcD,EAAOlQ,QAAQ,OAAO,IAAIT,OACxC6Q,EAAcF,EAAOlQ,QAAQ,UAAU,IAAIT,OAC3C8Q,EAAkC,MAAnBD,EAAY,GAIjC,MAHM,WAAWE,KAAKF,KAClBA,EAAcA,EAAYlJ,MAAM,IAE7B5F,EAAIiP,KAAAA,GAAA/O,GAAA,CAAA,iBAAA,aAAA,0BAAA,8BAAA,2BAAiB2O,EAAwBA,IAAgB9Z,EACvDga,EAETD,EAEN,GAEJ,CACF,EAAC,wPAaDvM,GAAiB,kBAAmB,kBAAmB,iBAAkB,CACvE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCvE,MAAM,KACNuO,aAAY,8IAOX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQoQ,EAAMK,OAAOC,MAEG,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAQ0J,GAAmB+F,EAAGzP,MAAM,IACpCkZ,EAAQpO,GAAc2E,EAAGyJ,KAAK,oBAC9B5G,EAAQ9H,GAAgBiF,EAAG6C,MAAM,SAEjCqH,EAAUvP,GACdqF,EAAGkK,QAAS,GAAInb,EAAeA,iBASjC,OANIM,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGZiL,EAAIkP,KAAAA,GAAAhP,GAAA,CAAA,4FAAA,qBAAA,kCAAA,iDAAA,YAAA,WAAA,gBAAA,uCAEkB+N,EAAyBA,EAC/B5G,EAEa,GAAf7C,EAAG2C,SAA6BuB,EAAkBG,EACjE6F,EAAQpF,IAAI,SAACsF,GACb,IAAMC,EAAcD,EAAOlQ,QAAQ,QAAQ,IAAIT,OACzC6Q,EAAcF,EAAOlQ,QAAQ,UAAU,IAAIT,OAC3C8Q,EAAkC,MAAnBD,EAAY,GAIjC,MAHM,WAAWE,KAAKF,KAClBA,EAAcA,EAAYlJ,MAAM,IAE7B5F,EAAImP,KAAAA,GAAAjP,GAAA,CAAA,iBAAA,aAAA,4BAAA,kCAAA,6BAAiB2O,EAAwBA,IAAgB9Z,EACvDga,EAETD,EAEN,GAGN,CACF,sdAmBAvM,GAAiB,kBAAmB,aAAc,YAAa,CAC7D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCvE,MAAM,KACNuO,aAAY,+PAWX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAIrC,SAASyE,EAASvD,GAChB,GAAmB,GAAfX,EAAG2C,SAAqB,OAAOM,GAAetC,GAElDX,EAAGzP,MAAQyP,EAAGmE,YAAcxD,EAAMK,OAAOC,MAEd,mBAAhBjB,EAAGoE,UAA2BpE,EAAGoE,SAASzD,EACvD,CAEA,SAAS0D,IAAYtE,EAAGuE,UAAW,CAVnCtE,EAAGmE,YAAc,GAYjBnE,EAAGM,SAAW,WACZ,IAAM/P,EAAgBwJ,GAAeiG,EAAGzP,MAAM,IACxC2U,EAAgB/K,GAA2B6F,EAAGkF,aAC9CC,EAAgBpN,GAA0BiI,EAAGmF,UAC7CC,EAAgBhM,GAA0B4G,EAAGoF,WAC7CC,EAAgBjM,GAA0B4G,EAAGqF,WAC7CuF,EAAgB7S,GAA0BiI,EAAG4K,cAC7CtF,EAAgBvN,GAA0BiI,EAAGsF,eAQnD,OANIjW,SAASoV,gBAAkBzE,EAAG0E,KAChCnU,EAAQyP,EAAGmE,YAEXnE,EAAGmE,YAAc5T,EAGZiL,EAAIqP,KAAAA,GAAAnP,GAAA,CAAA,kDAAA,cAAA,cAAA,sBAAA,gBAAA,wBAAA,wBAAA,uBAAA,YAAA,WAAA,mBAAA,gBACDnL,EAAmB6U,EAAuBC,EACvCF,EAAwBD,EACtBI,EACK,GAAhBsF,EACE,+DACA5S,EAEsB,GAAfgI,EAAG2C,SAA6BuB,EAAkBG,EACrD9T,EAEZ,CACF,EAcC,yXAIDwN,GAAiB,kBAAmB,KAAM,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAwK,EAAyB9K,EAAGF,SAApBjL,EAAKiW,EAALjW,MAAMC,EAAMgW,EAANhW,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,EAAkBC,aAAAA,EAOU+N,mOAAAA,EAI0BA,2HAAAA,EACtDhO,wBAAAA,EAAM,QAAKC,EAAO,GAAC,kDAKhC,OAAO0G,EAAIuP,KAAAA,GAAArP,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,EAAC,2FAUDhE,GAAiB,kBAAmB,IAAK,kBAAmB,CAC1D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAA0K,EAAyBhL,EAAGF,SAApBjL,EAAKmW,EAALnW,MAAMC,EAAMkW,EAANlW,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,EAAkBC,aAAAA,qOAOU+N,EAAK,2HAIqBA,EAAK,uBAC3DhO,EAAM,EAAKC,IAAAA,EAAaD,OAAAA,EAAM,+CAK3C,OAAO2G,EAAIyP,KAAAA,GAAAvP,kDAAsCqG,EACnD,CACF,EAMC,2FAIDhE,GAAiB,kBAAmB,KAAM,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAA4K,EAAyBlL,EAAGF,SAApBjL,EAAKqW,EAALrW,MAAMC,EAAMoW,EAANpW,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAK,aAAaC,EAAM,mOAOI+N,EAAK,2HAIqBA,EAAK,0BACzD/N,EAAO,GAAQD,QAAAA,EAAM,gDAKpC,OAAO2G,EAAI2P,KAAAA,GAAAzP,GAAsCqG,CAAAA,sCAAAA,QAAAA,EACnD,CACF,EAAC,2FAUDhE,GAAiB,kBAAmB,IAAK,kBAAmB,CAC1D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAA8K,EAAyBpL,EAAGF,SAApBjL,EAAKuW,EAALvW,MAAMC,EAAMsW,EAANtW,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAkBC,aAAAA,EAOU+N,mOAAAA,EAI0BA,2HAAAA,2BACpD/N,EAAO,EAAC,OAAOD,EAAK,IAAIC,EAAO,EAG7C,2CAED,OAAO0G,EAAI6P,KAAAA,GAAA3P,GAAsCqG,CAAAA,sCAAAA,QAAAA,EACnD,CACF,EAMC,2FAIDhE,GAAiB,kBAAmB,KAAM,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAgL,EAAyBtL,EAAGF,SAApBjL,EAAKyW,EAALzW,MAAMC,EAAMwW,EAANxW,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,EAAkBC,aAAAA,EAOU+N,mOAAAA,6HAI0BA,EAAK,+BACpDhO,EAAM,GAAC,KAAIC,EAAO,GAGrC,2CAED,OAAO0G,EAAI+P,KAAAA,GAAA7P,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,EAAC,2FAUDhE,GAAiB,kBAAmB,IAAK,kBAAmB,CAC1D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAkL,EAAyBxL,EAAGF,SAApBjL,EAAK2W,EAAL3W,MAAMC,EAAM0W,EAAN1W,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAK,aAAaC,EAAM,mOAOI+N,EAI0BA,2HAAAA,EACtDhO,uBAAAA,EAAM,WAAUA,EAAM,EAAC,IAAIC,EAAM,2CAK9C,OAAO0G,EAAIiQ,KAAAA,GAAA/P,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,EAAC,2FAUDhE,GAAiB,kBAAmB,KAAM,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAoL,EAAyB1L,EAAGF,SAApBjL,EAAK6W,EAAL7W,MAAMC,EAAM4W,EAAN5W,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,eAAkBC,EAAM,mOAOI+N,EAAK,2HAIqBA,EAAK,wBAC3DhO,EAAM,GAAYC,YAAAA,EAAO,8CAKtC,OAAO0G,EAAImQ,KAAAA,GAAAjQ,GAAsCqG,CAAAA,sCAAAA,QAAAA,EACnD,CACF,EAAC,2FAUDhE,GAAiB,kBAAmB,IAAK,kBAAmB,CAC1D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,IACtCsL,SAAS,GAAIC,UAAU,IACtB,SACDN,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAsL,EAAyB5L,EAAGF,SAApBjL,EAAK+W,EAAL/W,MAAMC,EAAM8W,EAAN9W,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAkBC,aAAAA,EAOU+N,mOAAAA,EAI0BA,2HAAAA,yBACtDhO,EAAK,IAAIC,EAAO,EAAC,SAASA,EAAO,EAG7C,2CAED,OAAO0G,EAAIqQ,KAAAA,GAAAnQ,GAAsCqG,CAAAA,sCAAAA,QAAAA,EACnD,CACF,EAMC,2FAIDhE,GAAiB,gBAAiB,OAAQ,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAwL,EAAyB9L,EAAGF,SAApBjL,EAAKiX,EAALjX,MAAMC,EAAMgX,EAANhX,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,EAAkBC,aAAAA,EAOU+N,mOAAAA,6HAI0BA,EAAK,mCAC3DhO,EAAK,KAAIC,EAAO,GAAQD,QAAAA,EAAM,GAAKC,KAAAA,EAAO,IAAE,sDAKzD,OAAO0G,EAAIuQ,KAAAA,GAAArQ,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,yFAUAhE,GAAiB,gBAAiB,OAAQ,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAA0L,EAAyBhM,EAAGF,SAApBjL,EAAKmX,EAALnX,MAAMC,EAAMkX,EAANlX,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,0FAhBlCnN,EAAK,aAAaC,EAAM,mOAOI+N,EAAK,2HAIqBA,EACpD/N,qCAAAA,EAAaD,QAAAA,EAAM,SAAMC,EAAO,GAAC,WAAUD,EAAM,IAG/D,6CAED,OAAO2G,EAAIyQ,KAAAA,GAAAvQ,GAAsCqG,CAAAA,sCAAAA,QAAAA,EACnD,CACF,EAAC,uFAUDhE,GAAiB,gBAAiB,OAAQ,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAA4L,EAAyBlM,EAAGF,SAApBjL,EAAKqX,EAALrX,MAAMC,EAAMoX,EAANpX,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAK,aAAaC,EAAM,mOAOI+N,EAAK,2HAIqBA,EAAK,2CACpDhO,EAAM,GAAKC,KAAAA,EAAO,eAAYD,EAAM,GAAC,KAAIC,EAAO,IAGnE,2CAED,OAAO0G,EAAI2Q,KAAAA,GAAAzQ,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,yFAUAhE,GAAiB,gBAAiB,OAAQ,mBAAoB,CAC5D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAA8L,EAAyBpM,EAAGF,SAApBjL,EAAKuX,EAALvX,MAAMC,EAAMsX,EAANtX,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,0FAhBlCnN,EAAK,aAAaC,EAAM,mOAOI+N,EAAK,2HAIqBA,EACtDhO,oCAAAA,EAAM,GAAUA,UAAAA,EAAM,IAAE,KAAIC,EAAO,GAAC,cAAaA,EAAO,GAGpE,2CAED,OAAO0G,EAAI6Q,KAAAA,GAAA3Q,GAAsCqG,CAAAA,sCAAAA,QAAAA,EACnD,CACF,EAMC,uFAIDhE,GAAiB,gBAAiB,QAAS,oBAAqB,CAC9D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAgM,EAAyBtM,EAAGF,SAApBjL,EAAKyX,EAALzX,MAAMC,EAAMwX,EAANxX,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAK,aAAaC,EAAM,mOAOI+N,EAAK,2HAIqBA,EACpD/N,sCAAAA,EAAO,GAAQD,QAAAA,EAAM,GAAC,KAAIC,EAAO,IAAE,WAAUD,EAAM,GAGjE,8CAED,OAAO2G,EAAI+Q,KAAAA,GAAA7Q,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,EAAC,uFAUDhE,GAAiB,gBAAiB,QAAS,oBAAqB,CAC9D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAkM,EAAyBxM,EAAGF,SAApBjL,EAAK2X,EAAL3X,MAAMC,EAAM0X,EAAN1X,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,EAAkBC,aAAAA,EAOU+N,mOAAAA,6HAI0BA,EAAK,2CACpDhO,EAAM,IAAE,KAAIC,EAAO,GAAWD,WAAAA,EAAM,SAAMC,EAAO,GAAC,2CAKtE,OAAO0G,EAAIiR,KAAAA,GAAA/Q,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,EAAC,uFAUDhE,GAAiB,gBAAiB,QAAS,oBAAqB,CAC9D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAoM,EAAyB1M,EAAGF,SAApBjL,EAAK6X,EAAL7X,MAAMC,EAAM4X,EAAN5X,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAlBhC,qFAEFnN,EAAK,aAAaC,EAAM,mOAOI+N,EAI0BA,2HAAAA,EACtDhO,mCAAAA,EAAcA,UAAAA,EAAM,GAAC,KAAIC,EAAO,IAAE,aAAYA,EAAO,IAGjE,2CAED,OAAO0G,EAAImR,KAAAA,GAAAjR,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,EAAC,uFAUDhE,GAAiB,gBAAiB,QAAS,oBAAqB,CAC9D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACrC,SACDiL,EAAgBC,EAAgBN,EAAeC,EAAeC,EAC9DpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCO,EAAGM,SAAW,WACZ,IAAAsM,EAAyB5M,EAAGF,SAApBjL,EAAK+X,EAAL/X,MAAMC,EAAM8X,EAAN9X,OACR+N,EAAQ7C,EAAGmC,iBAAmB,QAoB9BJ,EAAU,6BAA+BC,KAhBlCnN,qFAAAA,EAAkBC,aAAAA,EAOU+N,mOAAAA,6HAI0BA,EAAK,oCAC3DhO,EAAM,GAAC,IAAIC,EAAaD,QAAAA,EAAM,IAAMC,KAAAA,EAAO,GAAC,sDAKzD,OAAO0G,EAAIqR,KAAAA,GAAAnR,GAAA,CAAA,sCAAA,QAAsCqG,EACnD,CACF,yFAUAhE,GAAiB,eAAgB,OAAQ,QAIzCA,GAAiB,eAAgB,WAAY,YAI7CA,GAAiB,eAAgB,MAAO,OAIxCA,GAAiB,eAAgB,mBAAoB,mBAIrDA,GAAiB,eAAgB,eAAgB,eAIjDA,GAAiB,eAAgB,MAAO,OAIxCA,GAAiB,eAAgB,cAAe,cAIhDA,GAAiB,eAAgB,OAAQ,QAIzCA,GAAiB,eAAgB,QAAS,SAI1CA,GAAiB,eAAgB,MAAO,OAIxCA,GAAiB,eAAgB,UAAW,WAI5CA,GAAiB,eAAgB,kBAAmB,kBAIpDA,GAAiB,iBAAkB,mBAAoB,kBAAmB,CACxE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,IACvCgK,aAAY,4EAIX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,IAAIqN,EAAS9M,EAAG+M,WAAWD,OAASzd,SAASC,cAAc,UAE3DgQ,EAAS,WACP,IAAM0N,EAAYhN,EAAGgN,UAEN,MAAXhN,EAAG0E,KACL3E,EAAGuE,YAEHtE,EAAG0E,KAAKnV,UAAY,GACpByQ,EAAG0E,KAAKjV,YAAYqd,IAGtB,IAAQjY,EAAiBkL,EAAjBlL,MAAMC,EAAWiL,EAAXjL,OAKd,SAASmY,EAAUC,EAAUC,EAAWC,EAAUC,EAAWC,GAC3DC,EAAQC,YACND,EAAQE,OAAOP,EAAGC,GAClBI,EAAQG,OAAON,EAAGC,GACpBE,EAAQI,SAEI,MAARL,GAEAC,EAAQK,SAASN,EAAMJ,EADP,UAAdF,EACwBK,EAAG,EAEHA,EAAG,EAGnC,CAhBAP,EAAOe,MAAShZ,EAChBiY,EAAOgB,OAAShZ,EAiBhB,IAAMyY,EAAUT,EAAOiB,WAAW,MAMhC,GALAR,EAAQS,UAAU,EAAE,EAAGnZ,EAAMC,GAE7ByY,EAAQU,YAAcjO,EAAG6C,OAAS,QAClC0K,EAAQW,UAAc,EAEJ,UAAdlB,EAAuB,CACzBO,EAAQY,UAAe,SACvBZ,EAAQa,aAAe,SAEvBnB,EAAS,EAAEnY,EAAQD,EAAMC,GACzB,IAAK,IAAIR,EAAI,EAAGA,GAAKO,EAAOP,GAAK,GAC/B,QAAQ,GACN,KAAMA,EAAI,KAAQ,EAAI2Y,EAAS3Y,EAAEQ,EAAQR,EAAEQ,EAAO,GAAIR,GAAI,MAC1D,KAAMA,EAAI,IAAQ,EAAI2Y,EAAS3Y,EAAEQ,EAAQR,EAAEQ,EAAO,IAAK,MACvD,QAAsBmY,EAAS3Y,EAAEQ,EAAQR,EAAEQ,EAAO,GAGxD,KAAO,CACLyY,EAAQY,UAAe,SACvBZ,EAAQa,aAAe,MAEvBnB,EAAS,EAAE,EAAGpY,EAAM,GACpB,IAAK,IAAIP,EAAI,EAAGA,GAAKO,EAAOP,GAAK,GAC/B,QAAQ,GACN,KAAMA,EAAI,KAAQ,EAAI2Y,EAAS3Y,EAAE,EAAGA,EAAE,GAAIA,GAAI,MAC9C,KAAMA,EAAI,IAAQ,EAAI2Y,EAAS3Y,EAAE,EAAGA,EAAE,IAAK,MAC3C,QAAsB2Y,EAAS3Y,EAAE,EAAGA,EAAE,GAG5C,CACF,MAAO,EACT,EACF,EAOC,qKAIDyJ,GAAiB,iBAAkB,iBAAkB,gBAAiB,CACpE+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,GAAGC,OAAO,KACtCgK,sFAIC,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErC,IAAIqN,EAAS9M,EAAG+M,WAAWD,OAASzd,SAASC,cAAc,UAE3DgQ,EAAS,WACP,IAAM0N,EAAYhN,EAAGgN,UAEN,MAAXhN,EAAG0E,KACL3E,EAAGuE,YAEHtE,EAAG0E,KAAKnV,UAAY,GACpByQ,EAAG0E,KAAKjV,YAAYqd,IAGtB,IAAQjY,EAAiBkL,EAAjBlL,MAAMC,EAAWiL,EAAXjL,OAKd,SAASmY,EAAUC,EAAUC,EAAWC,EAAUC,EAAWC,GAC3DC,EAAQC,YACND,EAAQE,OAAOP,EAAGC,GAClBI,EAAQG,OAAON,EAAGC,GACpBE,EAAQI,SAEI,MAARL,GAEAC,EAAQK,SAASN,EADD,SAAdN,EACqBI,EAAG,EAEHA,EAAG,EAFEC,EAKlC,CAhBAP,EAAOe,MAAShZ,EAChBiY,EAAOgB,OAAShZ,EAiBhB,IAAMyY,EAAUT,EAAOiB,WAAW,MAMhC,GALAR,EAAQS,UAAU,EAAE,EAAGnZ,EAAMC,GAE7ByY,EAAQU,YAAcjO,EAAG6C,OAAS,QAClC0K,EAAQW,UAAc,EAEJ,SAAdlB,EAAsB,CACxBO,EAAQY,UAAe,QACvBZ,EAAQa,aAAe,SAEvBnB,EAASpY,EAAM,EAAGA,EAAMC,GACxB,IAAK,IAAIP,EAAI,EAAGA,GAAKO,EAAQP,GAAK,GAChC,QAAQ,GACN,KAAMA,EAAI,KAAQ,EAAI0Y,EAASpY,EAAMN,EAAGM,EAAM,GAAGN,EAAGA,GAAI,MACxD,KAAMA,EAAI,IAAQ,EAAI0Y,EAASpY,EAAMN,EAAGM,EAAM,GAAGN,GAAI,MACrD,QAAsB0Y,EAASpY,EAAMN,EAAGM,EAAM,EAAEN,GAGtD,KAAO,CACLgZ,EAAQY,UAAe,OACvBZ,EAAQa,aAAe,SAEvBnB,EAAS,EAAE,EAAG,EAAEnY,GAChB,IAAK,IAAIP,EAAI,EAAGA,GAAKO,EAAQP,GAAK,GAChC,QAAQ,GACN,KAAMA,EAAI,KAAQ,EAAI0Y,EAAS,EAAE1Y,EAAG,GAAGA,EAAGA,GAAI,MAC9C,KAAMA,EAAI,IAAQ,EAAI0Y,EAAS,EAAE1Y,EAAG,GAAGA,GAAI,MAC3C,QAAsB0Y,EAAS,EAAE1Y,EAAG,EAAEA,GAG5C,CACF,MAAO,EACT,EACF,EAOC,iKAIDwJ,GAAiB,iBAAkB,iBAAkB,gBAIrDA,GAAiB,iBAAkB,mBAAoB,kBAIvDA,GAAiB,iBAAkB,eAAgB,aAAc,CAC/D+B,SAAS,CAAExL,EAAE,GAAGC,EAAE,GAAIM,MAAM,IAAIC,OAAO,KACvCgK,aAAY,4LAOX,SACDiB,EAAqBC,EAAqBN,EAAeC,EAAeC,EACxEpE,EAAeyE,EACfX,EAAmBE,EAAkBC,GAErCD,EAAQ,WAAM,OAAAO,EAAGuE,UAAU,GAE3B,IAAM+J,EAA+B,CACnCC,IAAUC,OAAqBC,aAAaC,EAC5CC,OAAUH,OAAqBC,aAAaG,EAC5CC,SAAUL,OAAqBC,aAAaK,EAC5CC,KAAUP,OAAqBC,aAAaO,GAG9CzP,EAAS,WACP,GAAe,MAAXU,EAAG0E,KAAc,CACnB1E,EAAG0E,KAAKnV,UAAY,GAEpB,IAAMyf,EAEJX,EAAmB,GAAGrO,EAAGgP,kBAAoBT,OAAOC,aAAaC,EAE7Dle,EAAQ0e,OAAOjP,EAAGzP,OAAS,oDAC3B2e,EAAQ5M,KAAKE,IAAIxC,EAAGnL,MAAMmL,EAAGlL,QAGnC,IAAIyZ,OAAOvO,EAAG0E,KAAK,CACjByK,KAAK5e,EACLsd,MAAMqB,EAAMpB,OAAOoB,EACnBE,UAAWpP,EAAGmC,iBAAmB,QACjCkN,WAAWrP,EAAGoC,iBAAmB,QACjCkN,aAAaN,GAEjB,CACA,MAAO,EACT,EACF,GAmCA,IAAM/L,GAAiBsF,GAIvB,SAASgH,GAAgB5O,GAMZ,CAAA,IAAAnQ,gBACX,WAAA,SAAAA,EAAuB+F,EAAqBmG,GAOpC8S,KAAAA,SAOEC,EAAAA,KAAAA,kBAmBAC,cAAQ,EAAA9T,KAOR+T,aAAO,EAAA/T,KAmBPgU,sBAAgB,EAAAhU,KAsBhBiU,wBAsBAC,EAAAA,KAAAA,iBAsBAC,EAAAA,KAAAA,eAsBAC,EAAAA,KAAAA,wBAsBAC,gBAAU,EAAArU,KAsBVsU,iBAAW,EAAAtU,KAsBXuU,sBAAgB,EAAAvU,KA2BhBwU,OAA2B,KAAIxU,KAyB/ByU,eAAS,EAAAzU,KAaT0U,iBAAW,EAAA1U,KAaX2U,eAmBAC,EAAAA,KAAAA,mBAqBAC,EAAAA,KAAAA,oBAiFAC,EAAAA,KAAAA,yBAsBAC,eAAS,EAAA/U,KAgDXgV,WAAK,EAAAhV,KAYHiV,cAAQ,EAAAjV,KAuBRkV,gBAsBAC,EAAAA,KAAAA,YA1hBR,EAAAnV,KAAK8T,SAAWnZ,EAChBqF,KAAK4T,IAAM9S,GAAMR,IACnB,CAAC,IAAA8U,EAAAxgB,EAAAygB,UA4mBA,OA5mBAD,EA0VME,eAAA,WAAc,IAAAC,EAAAvV,KACfkD,GAAiClD,KAAK4U,eAAiB,IAAI/W,OAQ/D,GALAmC,KAAK5L,WAAQgI,EAEb4D,KAAK+U,eAAY3Y,EACjByF,GAAmC7B,MAEf,MAAhBkD,EAAsB,CACxB,IAAIsS,EACJ,IACEA,EAAiB,IAAIC,SACnB,gHAEevS,EAEnB,CAAE,MAAOwS,GAMP,OALAC,QAAQC,MAAM,oCAAoCF,QAClD1V,KAAK5L,MAAQ,CACX2F,KAAK,6BACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,GAG7B,CAEA,IAMMhS,EAAY1D,KAAK0D,SAASC,KAAK3D,MAC/B4D,EAAY5D,KAAK4D,QAAQD,KAAK3D,MAC9B6D,EAAY7D,KAAK6D,UAAUF,KAAK3D,MAGhC8G,GAAW9G,KAAc,SAAK2T,IAAgBhQ,KAAK3D,MAEnDsI,GAAWtI,KAAc,SAAK2T,IAAgBhQ,KAAK3D,MAEnDqN,GAAWrN,KAAa,QAAM2T,IAAgBhQ,KAAK3D,MAEzD,IACEwV,EAAerV,KACbH,KAAMA,KAAKA,KAAM8D,GAAIC,GAAK/D,KAAKrF,QAAQqJ,YAAapE,EAAIA,KAnBzC,SAAC6B,GAClBwC,EAAcA,eAAC,oBAAoBxC,GAEnCF,GAA2BgU,EAAKjiB,GAASmO,GAC3C,EAgBIiC,EAASE,EAAQC,EAAWiD,EAAQwB,EAAQ+E,EAC5C7J,GAAYG,KAAK3D,MAErB,CAAE,MAAO0V,GAMP,OALAC,QAAQC,MAAM,kCAAkCF,QAChD1V,KAAK5L,MAAQ,CACX2F,KAAK,2BACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,GAG7B,CACF,CACA1V,KAAK0I,UACP,EAAC0M,EAuCM1R,SAAA,SAAUoS,GACf7R,EAAcA,eAAC,oBAAoB6R,GACnC9V,KAAK0E,SAAWoR,CAClB,EAACV,EAIMW,UAAA,SAAWpR,GAChB,GAAI3E,KAAKgW,SACP,OAAO/V,GAAcE,KAAKH,MAG5B,IAAI0E,EAAW1E,KAAK+U,UACpB,GAAgB,MAAZrQ,EAAoB,MAAO,GAE/B,IACE,OAAOA,EAASvE,KAAKH,KAAK2E,EAC5B,CAAE,MAAO+Q,GAKP,OAJA1V,KAAK5L,MAAQ,CACX2F,KAAK,oBACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,GAEpBzV,GAAcE,KAAKH,KAC5B,CACF,EAACoV,EAKM1M,SAAA,SAAU7N,EAAkBa,GAElC,EAAA0Z,EAkBMxR,QAAA,SAASqS,GAA8B,IAAAC,EAC5CtT,KAAAA,EAAaA,cAAC,qBAAqBqT,GAEjCjW,KAAKiV,SADY,MAAfgB,OACc7Z,EAEA,WACd,IACE6Z,EAAY9V,KAAK+V,EACnB,CAAE,MAAOR,GACPQ,EAAK9hB,MAAQ,CACX2F,KAAK,6BACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,GAE3BQ,EAAKxN,UACP,CACF,CAEJ,EAAC0M,EAMMvR,UAAA,SAAWoS,GAA8BE,IAAAA,EAC9CvT,KAAAA,EAAaA,cAAC,uBAAuBqT,GAEnCjW,KAAKkV,WADY,MAAfe,OACgB7Z,EAEA,WAChB,IACE6Z,EAAY9V,KAAKgW,EACnB,CAAE,MAAOT,GACPS,EAAK/hB,MAAQ,CACX2F,KAAK,+BACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,EAE7B,CACF,CAEJ,EAACN,EA0BegB,cAAA,SACdC,GAA+C,IAAAC,GAG/CA,EAAAtW,KAAK8T,UAASsC,cAAaG,MAAAD,EAAA,CAACD,GAAMG,OAAAhR,GAAAA,MAAArF,KAAAsW,cACpC,EAACrB,EAISsB,4BAAA,SAA6BtV,GAA0BuV,IAAAA,EAC/DvV,KAAAA,EAAcN,GAAKd,KAAKc,GAUvB,CACC,OAAO,kBAAkB,oBACzB,aAAa,WAAW,aAAa,YAAY,aACjD,kBACA,WAAW,QAAQ,eAAe,iBAClCO,QAAQ,SAAC7M,GAAgB,OAbD,SAACA,GAEH,MAAlBmiB,EAAK,IAAIniB,KAEX4M,EAAc5M,GAAQmiB,EAAKniB,GAE/B,CAO2BoiB,CAAkBpiB,EAAK,EACpD,EAAC4gB,EAISyB,8BAAA,SAA+BzV,GAA0B,IAAA0V,EACjE9W,KAAM+W,EAAsB,SAACviB,GAC3B,GAA2B,MAAvB4M,EAAc5M,GAChB,IAEEsiB,EAAKtiB,GAAQ4M,EAAc5M,EAC7B,CAAE,MAAOkhB,GACPC,QAAQqB,KACN,mDAAqDviB,SAAOD,GAEhE,CAEJ,EAWA,GATAuiB,EAAoB,gBAEnB,CACC,OAAO,kBAAkB,oBACzB,aAAa,WAAW,aAAa,YAAY,aACjD,kBACe,QAAQ,eAAe,iBACtC1V,QAAQ,SAAC7M,GAAgB,OAAAuiB,EAAoBviB,EAAK,GAEhDqF,EAAAA,mBAAmBuH,EAAc6V,UACnC,IACElV,OAAOmV,OAAOlX,KAAKiX,SAAS7V,EAAc6V,SAC5C,CAAE,MAAOvB,GACPC,QAAQqB,KACN,6DAEJ,CAEJ,EAACG,GAAAviB,EAAA,CAAA,CAAAoQ,IAAA,KAAAnE,IAtmBD,WAA2B,OAAWb,KAAC4T,GAAI,EAACjS,IAC5C,SAAeyV,GAAY7iB,GAAmB,KAAM,GAAC,CAAAyQ,IAAAnE,OAAAA,IAMrD,WAAwC,OAAOb,KAAK6T,KAAM,EAAClS,IAC3D,SAAiB0V,GACf5f,GAAU,cAAc4f,GACT,MAAXA,GAEc,MADhBA,EAAUA,EAAQxZ,UACIwZ,OAAUjb,GAG9B4D,KAAK6T,QAAUwD,IACjBrX,KAAK6T,MAAQwD,EACbrX,KAAKoW,cAAc,YAAYpW,KAAK,OAAOqX,GAC3CrX,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,UAAAA,IAMD,WAAqC,OAAOb,KAAK8T,QAAS,EAACnS,IAC3D,SAAoByV,GAAiB7iB,GAAmB,UAAW,GAACyQ,CAAAA,IAAAnE,SAAAA,IAMpE,WAA6C,OAAOb,KAAK+T,OAAQ,EAACpS,IAClE,SAAmByV,GAA0B7iB,GAAmB,SAAU,GAACyQ,CAAAA,IAAAnE,aAAAA,IAI3E,WACE,OAAwB,WAAXkT,QAAkBre,GAAesK,MAAQA,KAAK+T,QAAQuD,UACrE,EAAC3V,IACD,SAAuByV,GAAa7iB,GAAmB,aAAc,GAAC,CAAAyQ,IAAA,cAAAnE,IAItE,WAAuC,OAAWb,KAAC8T,SAAS9P,WAAY,EAACrC,IACzE,SAAwByV,GAAe7iB,GAAmB,cAAe,GAAC,CAAAyQ,IAAA,kBAAAnE,IAM1E,WACE,OAC2B,MAArBb,KAACgU,iBACa,MAAhBhU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQvN,gBAChDxG,KAAKgU,gBAEX,EAACrS,IAED,SAA4B4V,GAC1BC,EAAAA,WAAW,0BAA0BD,GACjCvX,KAAKgU,mBAAqBuD,IAC5BvX,KAAKgU,iBAAmBuD,EAExBvX,KAAKoW,cAAc,YAAYpW,KAAK,kBAAkBuX,GACtDvX,KAAK0I,WAET,GAAC,CAAA1D,IAAAnE,oBAAAA,IAMD,WACE,OAC6B,MAA3Bb,KAAKiU,mBACa,MAAhBjU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQ1H,kBAChDrM,KAAKiU,kBAEX,EAACtS,IAED,SAA8B8V,GAC5BC,WAAS,4BAA4BD,GACjCzX,KAAKiU,qBAAuBwD,IAC9BzX,KAAKiU,mBAAqBwD,EAE1BzX,KAAKoW,cAAc,YAAYpW,KAAK,oBAAoByX,GACxDzX,KAAK0I,WAET,GAAC,CAAA1D,IAAA,aAAAnE,IAMD,WACE,OACsB,MAAhBb,KAACkU,YACa,MAAhBlU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQzH,WAChDtM,KAAKkU,WAEX,EAACvS,IAED,SAAuBgW,GACrBC,EAAAA,cAAc,qBAAqBD,GAC/B3X,KAAKkU,cAAgByD,IACvB3X,KAAKkU,YAAcyD,EAEnB3X,KAAKoW,cAAc,YAAYpW,KAAK,aAAa2X,GACjD3X,KAAK0I,WAET,IAAC1D,IAAA,WAAAnE,IAMD,WACE,OACoB,MAAdb,KAACmU,UACa,MAAhBnU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQxH,SAChDvM,KAAKmU,SAEX,EAACxS,IAED,SAAqBkW,GACnB9c,EAAYA,aAAC,mBAAmB8c,GAC5B7X,KAAKmU,YAAc0D,IACrB7X,KAAKmU,UAAY0D,EAEjB7X,KAAKoW,cAAc,YAAYpW,KAAK,WAAW6X,GAC/C7X,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,aAAAA,IAMD,WACE,OACsB,WAAfuT,YACa,MAAhBpU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQvH,WAChDxM,KAAKoU,WAEX,EAACzS,IAED,SAAuBmW,GACrBC,EAAAA,oBAAoB,qBAAqBD,EAAe,EAAE,KACtD9X,KAAKoU,cAAgB0D,IACvB9X,KAAKoU,YAAc0D,EAEnB9X,KAAKoW,cAAc,YAAYpW,KAAK,aAAa8X,GACjD9X,KAAK0I,WAET,GAAC1D,CAAAA,gBAAAnE,IAMD,WACE,OACqB,MAAfb,KAACqU,WACa,MAAhBrU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQtH,UAChDzM,KAAKqU,UAEX,EAAC1S,IAED,SAAsBqW,GACpBC,EAAUA,WAAC,oBAAoBD,EAAclkB,IACzCkM,KAAKqU,aAAe2D,IACtBhY,KAAKqU,WAAa2D,EAElBhY,KAAKoW,cAAc,YAAYpW,KAAK,YAAYgY,GAChDhY,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,aAAAA,IAMD,WACE,OACsB,WAAfyT,YACa,MAAhBtU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQxM,WAChDvH,KAAKsU,WAEX,EAAC3S,IAED,SAAuBuW,GACrBnd,EAAAA,aAAa,qBAAqBmd,GAC9BlY,KAAKsU,cAAgB4D,IACvBlY,KAAKsU,YAAc4D,EAEnBlY,KAAKoW,cAAc,YAAYpW,KAAK,aAAakY,GACjDlY,KAAK0I,WAET,GAAC,CAAA1D,IAAA,kBAAAnE,IAMD,WACE,OAC2B,MAAzBb,KAAKuU,iBACa,MAAhBvU,KAAK+T,aAAkB3X,EAAY4D,KAAK+T,QAAQxN,gBAChDvG,KAAKuU,gBAEX,EAAC5S,IAED,SAA4BwW,GAC1BX,EAAUA,WAAC,0BAA0BW,GACjCnY,KAAKuU,mBAAqB4D,IAC5BnY,KAAKuU,iBAAmB4D,EAExBnY,KAAKoW,cAAc,YAAYpW,KAAK,kBAAkBmY,GACtDnY,KAAK0I,WAET,GAAC,CAAA1D,IAAAnE,QAAAA,IAID,WAA0C,OAAWb,KAACuG,eAAgB,EAAC5E,IACvE,SAAkB4V,GAAgCvX,KAAKuG,gBAAkBgR,CAAS,GAACvS,CAAAA,YAAAnE,IAMnF,WAAyC,OAAWb,KAACwU,MAAO,EAAC7S,IAC7D,SAAkByW,GACZC,EAAAA,aAAarY,KAAKwU,OAAO4D,KAC3BpY,KAAKwU,OAAS4D,EAEdpY,KAAKoW,cAAc,YAAYpW,KAAK,QAAQoY,GAC5CpY,KAAK0I,WAET,IAAC1D,IAAA,gBAAAnE,IAID,WACE,OAAuB,MAAXb,KAACwU,OAAiB,GAAK,GAAGxU,KAAKwU,MAC7C,EAAC7S,IAED,SAA0ByW,GACxBpY,KAAKrL,MAAQyjB,CACf,GAAC,CAAApT,IAAA,WAAAnE,IAOD,WAIE,OAHsB,MAAlBb,KAAKyU,YACPzU,KAAKyU,UAAYrhB,GAAQ,CAAA,EAAG,CAAEklB,MAAK,UAEzB7D,SACd,EAAC9S,IACD,SAAqByV,GAAe7iB,GAAmB,WAAY,GAACyQ,CAAAA,IAAAnE,aAAAA,IAOpE,WAIE,OAHwB,MAApBb,KAAK0U,cACP1U,KAAK0U,YAAc,CACrB,GACO1U,KAAK0U,WACd,EAAC/S,IACD,SAAuByV,GAAe7iB,GAAmB,aAAc,GAAC,CAAAyQ,IAAA,WAAAnE,IAOxE,WAIE,OAHsB,MAAlBb,KAAK2U,YACP3U,KAAK2U,UAAY,CAAA,GAER3U,KAAC2U,SACd,EAAChT,IACD,SAAqByV,GAAe7iB,GAAmB,WAAY,GAACyQ,CAAAA,IAAAnE,SAAAA,IAIpE,WACE,OAA+B,MAAnBb,KAAC6U,eAAyB7U,KAAK4U,cAAgB5U,KAAK6U,cAClE,EAAClT,IACD,SAAmByV,GAAwB7iB,GAAmB,SAAU,GAACyQ,CAAAA,IAAAnE,eAAAA,IAMzE,WACE,OAAOb,KAAK4U,aACd,EAACjT,IAED,SAAyB4W,GACvBC,EAASA,UAAC,gBAAgBD,GACR,KAAdA,IAAoBA,OAAYnc,GAEhC4D,KAAK4U,gBAAkB2D,IACzBvY,KAAK4U,cAAgB2D,EAGrBvY,KAAKoW,cAAc,YAAYpW,KAAK,eAAeuY,GACnDvY,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,gBAAAA,IAMD,WACE,OAAOb,KAAK6U,cACd,EAAClT,IAED,SAA0B4W,GACxBC,EAASA,UAAC,gBAAgBD,GACtBvY,KAAK6U,iBAAmB0D,IAC1BvY,KAAK6U,eAAiB0D,EAEtBvY,KAAKoW,cAAc,YAAYpW,KAAK,gBAAgBuY,GACpDvY,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,cAAAA,IAqED,WACE,OAA6B,MAArBb,KAAK8U,kBAAuB1Y,EAAS6G,GAAA,CAAA,EAAQjD,KAAK8U,aAC5D,EAACnT,IACD,SAAwB8W,GACtBxe,GAAW,uBAAuBwe,GAC9BJ,EAAYA,aAACrY,KAAK8U,aAAa2D,KACjCzY,KAAK8U,aAAe2D,EAEpBzY,KAAKoW,cAAc,YAAYpW,KAAK,cAAcyY,GAClDzY,KAAK0I,WAET,IAAC1D,IAAA,WAAAnE,IAID,WAAiC,OAAOd,GAAiBC,KAAM,EAAC2B,IAChE,SAAqByV,GAAY7iB,GAAmB,WAAY,IAACyQ,IAAA,WAAAnE,IAMjE,WAA4C,OAAWb,KAAC+U,SAAU,EAACpT,IACnE,SAAqBmU,GACnBlT,EAAAA,cAAc,kBAAkBkT,GAC5B9V,KAAK+U,YAAce,IACrB9V,KAAK+U,UAAYe,EACjB9V,KAAK0I,WAET,IAAC1D,IAAA,OAAAnE,IAyCD,WAA2C,OAAWb,KAACgV,KAAM,EAACrT,IAC9D,SAAiByV,GAA0B7iB,GAAmB,OAAQ,GAACyQ,CAAAA,gBAAAnE,IAIvE,WAAmC,OAAsB,MAAVb,KAACgV,KAAe,EAACrT,IAChE,SAAsByV,GAAa7iB,GAAmB,YAAa,GAACyQ,CAAAA,YAAAnE,IAmDpE,WACE,OAAuB,MAAXb,KAACmV,YAAiB/Y,EAAS6G,GAAO,CAAA,EAAAjD,KAAKmV,OACrD,EAACxT,IACD,SAAkB+W,GAChBze,GAAW,gBAAgBye,GACvBL,EAAYA,aAACrY,KAAKmV,OAAOuD,KAC3B1Y,KAAKmV,OAASuD,EAEd1Y,KAAKoW,cAAc,YAAYpW,KAAK,QAAQ0Y,GAC5C1Y,KAAK0I,WAET,GAAC,CAAA1D,IAAA,WAAAnE,IAID,WAAkC,OAAuB,WAAVsU,MAAgB,EAACxT,IAChE,SAAqByV,GAAa7iB,GAAmB,WAAY,IAyEnE,CAtnBE,GAsnBWc,gBAAWsjB,SAAAA,GACtB,SAAAtjB,EAAuBsF,EAAqBmG,GAAmB8X,IAAAA,EA8L1B,OA7LnCA,EAAAD,EAAAxY,KAAAH,KAAMrF,EAASmG,IAAGd,MAsEV6Y,iBAAW,EAAAD,EAsBXE,gBAAUF,EAAAA,EAsBVG,mBAAWH,EA2EXI,WAAyB,GAAEJ,CA5LrC,CAACK,GAAA5jB,EAAAsjB,OAAAO,EAAA7jB,EAAAggB,UA0nBA8B,OA1nBA+B,EAkBMC,YAAA,SAAaC,GAIlB,GAHA1W,EAAAA,eAAe,aAAa0W,GAGf,MADbA,EAAOA,EAAKvb,QAGV,OAAwB,MAAZmC,KAAC+T,aAAkB3X,EAAY4D,KAG7C,GAAIoZ,EAAKC,WAAW,KAClB,YAAYvF,SAASqF,YAAYC,EAAK9a,QAAQ,YAAY,KAe1D,IAVF,IASIE,EATE8a,GAFNF,EAAOA,EAAK9a,QAAQ,OAAO,MAEcib,MAAM,KAAKrQ,IAClD,SAACsQ,GAAc,OAAKA,EAAQ3b,MAAM,GAClCqL,IACA,SAACsQ,GAAc,eAAe5K,KAAK4K,GAC/BC,SAASD,EAAQhU,MAAM,GAAG,IAC1BgU,CAAO,GAKFre,EAAI,EAAGue,EAAIJ,EAAUle,OAAQD,EAAIue,EAAGve,IAAK,CAChD,IAAMqe,EAAwBF,EAAUne,GAMxC,GAAc,OAJZqD,EADqB,iBAAZgb,GACChb,GAAUwB,MAAM2Z,QAAQH,IAExBhb,GAAUwB,MAAM4Z,WAAWJ,IAEjB,MACxB,CACF,OAAOhb,CACT,EAAC0a,EA0HMW,eAAA,SAAgBjf,GAInB,IAHFpF,GAAa,SAASoF,GAEtBA,EAASA,EAAOA,OACG,MAAVA,GAAgB,CACrB,GAAIA,IAAWoF,KAAQ,OAAO,EAC9BpF,EAASA,EAAOA,MAClB,CACF,OAAO,CACT,EAACse,EAgBMY,aAAA,SAAcC,GACnB,IAAMlf,EAAQmF,KAAKnF,MAAMkf,GACzB,OAAa,MAATlf,GAAyB,EAElBmF,KAACgZ,WAAWzV,QAAQ1I,EACjC,EAACqe,EAIMre,MAAA,SAAOkf,GAGZ,OAFAC,EAAWA,YAAC,uBAAuBD,IAE3B,GACN,KAAK/jB,GAAa+jB,GAEhB,OADcA,EACAhG,UAAY/T,KADZ+Z,OAC2B3d,EAC3C,KAAKa,EAAcA,eAAC8c,GAClB,IAAIjf,EAAQif,EAEZ,OADIjf,EAAQ,IAAKA,GAASkF,KAAKgZ,WAAW5d,QAC/B4E,KAACgZ,WAAWle,GACzB,KAAKtD,GAAYuiB,GACf,OAAO/Z,KAAK4Z,WAAWG,GAG3B/lB,GACE,mEAEJ,EAACklB,EAIMe,cAAA,SAAeF,GACpB,IAAIlf,EAAQmF,KAAKnF,MAAMkf,GAIvB,OAHe,MAATlf,GAAe7G,GACjB,uDAEG6G,CACT,EAACqe,EAIMU,WAAA,SAAYplB,GACjBmD,GAAW,iBAAiBnD,GAC5BA,EAAOA,EAAKqJ,OAAOiF,cAEnB,IAAItE,OAA6BpC,EASjC,OARE4D,KAAKgZ,WAAW3X,QAAQ,SAACxG,GAEV,MAAV2D,GACc,MAAd3D,EAAMrG,MAAkBqG,EAAMrG,KAAKsO,gBAAkBtO,IAEtDgK,EAAS3D,EAEb,GACK2D,CACT,EAAC0a,EAIMS,QAAA,SAAS7e,GAGd,OAFAof,EAAaA,cAAC,kBAAkBpf,GAC5BA,EAAQ,IAAKA,GAASkF,KAAKgZ,WAAW5d,QAC/B4E,KAACgZ,WAAWle,EACzB,EAACoe,EAIMiB,SAAA,SAAUJ,GACf,OAA0C,MAA9B/Z,KAACnF,MAAMkf,EACrB,EAACb,EAIMkB,WAAA,SAAYtf,EAAegG,GAChC,OAEId,KAAKqa,oBADD,MAANvZ,EAC2B,CAAA,EACA,CAAEA,GAAAA,GADChG,EAGlC,EAACoe,EAIMmB,oBAAA,SAAqBjZ,EAA4BtG,GACtDN,GAAmB,sBAAsB4G,GACzCkZ,EAAAA,aAAkB,uBAAuBxf,GAE5B,MAATA,EACFA,EAAQkF,KAAKgZ,WAAW5d,QAEpBN,EAAQ,IAAKA,GAASkF,KAAKgZ,WAAW5d,QAC1CN,EAAQ4L,KAAK6T,IAAI,EAAE7T,KAAKE,IAAI9L,EAAMkF,KAAKgZ,WAAW5d,UAGpD,IAAM0F,EAAKhK,GAAU,WAAWsK,EAAcN,IAE1C0Z,EAAW,IAAIvkB,GAAU+J,KAAK8T,SAAUhT,GAU5C,OATEd,KAAKya,eAAeD,EAAS1f,GAE7B0f,EAAS3D,8BAA8BzV,GAEvCoZ,EAASE,yBAAyBtZ,GAElCoZ,EAASG,uBAAuBvZ,GAEhCpB,KAAK0I,WACA8R,CACT,EAACtB,EAIM0B,mBAAA,SAAoB9f,GACzBof,EAAAA,cAAc,cAAcpf,GAC5B,IACMsG,EADQpB,KAAKia,cAAcnf,GACLsG,cAE5B,OADED,GAAcC,GACLpB,KAACqa,oBAAoBjZ,EAActG,EAAM,EACtD,EAACoe,EAIM2B,gBAAA,SAAiBd,GACtB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,OAAQ/Z,KAAKgZ,WAAWzV,QAAQ1I,GAAS,CAC3C,EAACqe,EAEM4B,kBAAA,SAAmBf,GACxB,IAAMlf,EAAQmF,KAAKia,cAAcF,GAE3B7e,EAAa8E,KAAKgZ,WAClB+B,EAAa7f,EAAUqI,QAAQ1I,GACrC,OAAQkgB,GAAc,GAAOA,EAAa7f,EAAUE,OAAO,CAC7D,EAAC8d,EAIM8B,gBAAA,SAAiBjB,GACtB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,GAAI/Z,KAAK6a,gBAAgBhgB,GAAQ,CAC/B,IAAMogB,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GACzCmF,KAAKzE,eAAe0f,GACpBjb,KAAKya,eAAe5f,EAAM,GAC1BmF,KAAK0I,UACP,CACF,EAACwQ,EAIMgC,aAAA,SAAcnB,GACnB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,GAAI/Z,KAAK6a,gBAAgBhgB,GAAQ,CAC/B,IAAMogB,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GACzCmF,KAAKzE,eAAe0f,GACpBjb,KAAKya,eAAe5f,EAAMogB,EAAS,GACnCjb,KAAK0I,UACP,CACF,EAACwQ,EAIMiC,eAAA,SAAgBpB,GACrB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,GAAI/Z,KAAK8a,kBAAkBjgB,GAAQ,CACjC,IAAMogB,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GACzCmF,KAAKzE,eAAe0f,GACpBjb,KAAKya,eAAe5f,EAAMogB,EAAS,GACnCjb,KAAK0I,UACP,CACF,EAACwQ,EAIMkC,mBAAA,SAAoBrB,GACzB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,GAAI/Z,KAAK8a,kBAAkBjgB,GAAQ,CACjC,IAAMogB,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GACzCmF,KAAKzE,eAAe0f,GACpBjb,KAAKya,eAAe5f,EAAMmF,KAAKgZ,WAAW5d,QAC1C4E,KAAK0I,UACP,CACF,EAACwQ,EAIMmC,aAAA,SACLtB,EAA8CuB,GAE9C,IAAMzgB,EAAQmF,KAAKia,cAAcF,GAEjCG,gBAAc,kBAAkBoB,GAC5BA,EAAW,IAAKA,GAAYtb,KAAKgZ,WAAW5d,QAChDkgB,EAAW5U,KAAK6T,IAAI,EAAE7T,KAAKE,IAAI0U,EAAStb,KAAKgZ,WAAW5d,SAExD,IAAM6f,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GACrCogB,IAAaK,IAEjBtb,KAAKzE,eAAe0f,GACpBjb,KAAKya,eAAe5f,EAAMygB,GAE1Btb,KAAK0I,WACP,EAACwQ,EAIMqC,mBAAA,SACLN,EAAiBK,EAAiBE,GAAY,IAAAC,EAAAzb,KAExC0b,EAAa1b,KAAKgZ,WAAW5d,OAEnCugB,EAAAA,qBAAqB,YAAYV,EAAS,EAAES,GAC5CC,EAAAA,qBAAqB,YAAYL,EAAS,EAAEI,GAE5C,IAAME,EAAgB5b,KAAKgZ,WAAWxT,MAAMyV,EAASA,EAASO,GAC9DI,EAAcva,QAAQ,SAAC+V,GAAU,OAAAqE,EAAKlgB,eAAe0f,EAAS,GAE1DK,EAAWL,IAAYK,GAAYE,GACvCI,EAAcva,QACZ,SAACxG,EAAgBM,GAAQ,OAAKsgB,EAAKhB,eAAe5f,EAAMygB,EAASngB,EAAE,GAGrE6E,KAAK0I,UACP,EAACwQ,EAIM2C,gBAAA,SAAiB9B,GACtB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,OAAW/Z,KAAC8a,kBAAkBjgB,EAChC,EAACqe,EAEM4C,iBAAA,SAAkB/B,GACvB,OAAwB,MAAhB/Z,KAAK+T,OACf,EAACmF,EAIM6C,aAAA,SAAchC,GACnB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,GAAI/Z,KAAK6b,gBAAgBhhB,GAAQ,CAC/B,IAAMogB,EAAYjb,KAAKgZ,WAAWzV,QAAQ1I,GACpCmhB,EAAYhc,KAAKgZ,WAAWiC,EAAS,GAE3Cjb,KAAKzE,eAAe0f,GACpBe,EAAUvB,eAAe5f,EAAM,GAE/BmF,KAAK0I,WACLsT,EAAUtT,UACZ,CACF,EAACwQ,EAIM+C,cAAA,SAAelC,GACpB,IAAMlf,EAAQmF,KAAKia,cAAcF,GACjC,GAAI/Z,KAAK8b,iBAAiBjhB,GAAQ,CAChC,IAAMogB,EAAYjb,KAAKgZ,WAAWzV,QAAQ1I,GACpCmhB,EAAYhc,KAAK+T,QAEvB/T,KAAKzE,eAAe0f,GACpBe,EAAUvB,eAAe5f,EAAMmhB,EAAUlhB,OAEzCkF,KAAK0I,WACLsT,EAAUtT,UACZ,CACF,EAACwQ,EAIMgD,eAAA,SACLnC,EACAoC,EAAgDrhB,GAEhD,IAAMD,EAAQmF,KAAKia,cAAcF,GAC3Bnf,EACJxF,GAAc+mB,GACZA,EACAnc,KAAKia,cAAckC,GAIvB,OAFA7B,EAAYA,aAAC,kBAAkBxf,GAG7BF,EAAO0c,YAAe1c,IAAWC,IAAYA,EAAMgf,eAAejf,EAEtE,EAACse,EAIMkD,YAAA,SACLrC,EACAoC,EAAgDrhB,GAEhD,IAAMD,EAAQmF,KAAKia,cAAcF,GAC3BiC,EACJ5mB,GAAc+mB,GACZA,EACAnc,KAAKia,cAAckC,GAIvB,GAFA7B,EAAYA,aAAC,kBAAkBxf,GAG7BkhB,EAAU1E,YAAe0E,IAAcnhB,IACrCA,EAAMgf,eAAemC,GACvB,CACA,IAAMf,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GAErCygB,EAAqB,MAATxgB,EAAgBkhB,EAAUN,WAAa5gB,EACnDwgB,EAAW,IAAKA,GAAYU,EAAUN,YAC1CJ,EAAW5U,KAAK6T,IAAI,EAAG7T,KAAKE,IAAI0U,EAASU,EAAUN,aAEnD1b,KAAKzE,eAAe0f,GACpBe,EAAUvB,eAAe5f,EAAMygB,GAE/Btb,KAAK0I,WACLsT,EAAUtT,UACZ,CACF,EAACwQ,EAIMmD,aAAA,SAActC,GACnB,IAAMlf,EAAQmF,KAAKnF,MAAMkf,GACzB,GAAa,MAATlf,EAAJ,CAOEA,EAAoByhB,QACtBza,GAAmChH,GAEnC,IAAMogB,EAAWjb,KAAKgZ,WAAWzV,QAAQ1I,GACzCmF,KAAKzE,eAAe0f,GAEpBta,GAAiB9F,GAEjBA,EAAMiZ,cAAW1X,EAEjB4D,KAAKoW,cAAc,eAAevb,GAClCmF,KAAK0I,UAbL,MAJM1S,GAAa+jB,IAAqB/lB,GACpC,kDAiBN,EAACklB,EAIMoD,MAAA,WACL,IAAK,IAAInhB,EAAI,EAAGue,EAAI1Z,KAAKgZ,WAAW5d,OAAQD,EAAIue,EAAGve,IACjD6E,KAAKqc,aAAarc,KAAKgZ,WAAW,GAEtC,EAACE,EAIeuB,eAAA,SAAgB5f,EAAiBC,GAC/CD,EAAMkZ,QAAU/T,KAChBA,KAAKgZ,WAAWuD,OAAOzhB,EAAM,EAAGD,GAChCmF,KAAKoW,cAAc,cAAevb,EAAOmF,KAAMlF,EACjD,EAACoe,EAIe3d,eAAA,SAAgBT,GAC9B,IAAMD,EAAQmF,KAAKgZ,WAAWuD,OAAOzhB,EAAM,GAAG,GAC9CD,EAAMkZ,aAAU3X,EAChB4D,KAAKoW,cAAc,cAAevb,EAAOmF,KAAMlF,EACjD,EAACoe,EAISxC,4BAAA,SAA6BtV,GAA0Bob,IAAAA,EAC/D7D,KAAAA,EAAAtD,UAAMqB,4BAA2BvW,KAAAH,KAACoB,GAUjC,CACC,aAAa,YAAY,cACzBC,QAAQ,SAAC7M,GAAW,OAVI,SAACA,GAEH,MAAlBgoB,EAAK,IAAIhoB,KAEX4M,EAAc5M,GAAQgoB,EAAKhoB,GAE/B,CAI2BoiB,CAAkBpiB,EAAK,EACpD,EAAC0kB,EAISrC,8BAAA,SAA+BzV,OAA0Bqb,EAAAzc,KACjE2Y,EAAAtD,UAAMwB,8BAA6B1W,KAACiB,KAAAA,GAenC,CACC,aAAa,YAAY,cACzBC,QAAQ,SAAC7M,GAAgB,OAfC,SAACA,GAC3B,GAA2B,MAAvB4M,EAAc5M,GAChB,IAEEioB,EAAKjoB,GAAQ4M,EAAc5M,EAC7B,CAAE,MAAOkhB,GACPC,QAAQqB,KACN,mDAAqDviB,EAAMA,OAACD,GAEhE,CAEJ,CAI2BuiB,CAAoBviB,EAAK,EACtD,EAAC0kB,EAISwD,qBAAA,SAAsBtb,GAC9B,IAAMlG,EAAY8E,KAAKgZ,WAAWxT,QAC9BtK,EAAUE,OAAS,IACrBgG,EAAclG,UAAYA,EAAUgO,IAClC,SAACrO,GAAoB,OAAAA,EAAMuG,aAAa,GAG9C,EAAC8X,EAISyB,uBAAA,SAAwBvZ,GAA0Bub,IAAAA,OACxC3c,KAAKgZ,WACT5d,OAAS,GAAK4E,KAAKsc,QAG/Brd,EAAAA,sBAAsBmC,EAAclG,UAAUrB,EAAAA,qBAC5CuH,EAAclG,UAAoBE,OAAS,GAE5CgG,EAAclG,UAA6BmG,QAC1C,SAACub,EAAiC9hB,GAChC6hB,EAAKtC,oBAAoBuC,EAAmB9hB,EAC9C,EAGN,EAACqc,GAAA9hB,EAAA2P,CAAAA,CAAAA,WAAAnE,IAtnBD,WACE,IAAMgc,EAAc7c,KAAK+T,QACzB,GAAmB,MAAf8I,EACF,MAAO,IAEP,IACMC,EAAYD,EAAYzD,KAC9B,OAAsB,MAAd0D,EAAoB,GAAKA,GAAa,KAF5B9c,KAAKxL,MAAS,IAAMwL,KAAKlF,MAI/C,EAAC6G,IACD,SAAiByV,GAAkB7iB,GAAmB,OAAQ,GAACyQ,CAAAA,gBAAAnE,IA2C/D,WACE,IAAMgc,EAAc7c,KAAK+T,QACzB,OAAmB,MAAf8I,EACK,GAEAA,EAAYE,UAAUvG,OAAOxW,KAAKlF,MAE7C,EAAC6G,IACD,SAAsByV,GAAmB7iB,GAAmB,YAAa,GAACyQ,CAAAA,IAAAnE,aAAAA,IAM1E,WACE,OACIb,KAAK6Y,YAEe,GAApB7Y,KAAK6Y,YADW,MAAhB7Y,KAAK+T,SAA0B/T,KAAK+T,QAAQiJ,UAGlD,EAACrb,IAED,SAAuBsb,GACrBC,EAAAA,aAAa,uBAAuBD,GAChCjd,KAAK6Y,cAAgBoE,IACvBjd,KAAK6Y,YAAcoE,EAEnBjd,KAAKoW,cAAc,YAAYpW,KAAK,aAAaid,GACjDjd,KAAK0I,WAET,IAAC1D,IAAA,YAAAnE,IAMD,WACE,OACqB,MAAfb,KAAC8Y,WACa,MAAhB9Y,KAAK+T,QAv7Ia,GAu7IwB/T,KAAK+T,QAAQoJ,UACvDnd,KAAK8Y,UAEX,EAACnX,IAED,SAAsByb,GACpBC,EAAaA,cAAC,qBAAqBD,GAC/Bpd,KAAK8Y,aAAesE,IACtBpd,KAAK8Y,WAAasE,EAElBpd,KAAKoW,cAAc,YAAYpW,KAAK,YAAYod,GAChDpd,KAAK0I,WAET,GAAC1D,CAAAA,iBAAAnE,IAMD,WACE,OACsB,MAAhBb,KAAC+Y,YACa,MAAhB/Y,KAAK+T,QA58Ia,GA48IyB/T,KAAK+T,QAAQuJ,WACxDtd,KAAK+Y,WAEX,EAACpX,IAED,SAAuB4b,GACrBF,EAAAA,cAAc,sBAAsBE,GAChCvd,KAAK+Y,cAAgBwE,IACvBvd,KAAK+Y,YAAcwE,EAEnBvd,KAAKoW,cAAc,YAAYpW,KAAK,aAAaud,GACjDvd,KAAK0I,WAET,GAAC,CAAA1D,IAAA,QAAAnE,IAID,WAEE,OAAwB,MAAZb,KAAC+T,SAAmB,EAAI/T,KAAK+T,QAAQ+F,aAAa9Z,KAChE,EAAC2B,IACD,SAAkByV,GAAY7iB,GAAmB,QAAS,IAACyQ,IAAA,iBAAAnE,IAI3D,WAEE,OAAwB,MAAZb,KAAC+T,SAA0B/T,KAAK+T,QAAQ8G,gBAAgB7a,KACtE,EAAC2B,IACD,SAA2ByV,GAAa7iB,GAAmB,iBAAkB,GAAC,CAAAyQ,IAAA,mBAAAnE,IAI9E,WAEE,OAAwB,WAAXkT,SAA0B/T,KAAK+T,QAAQ+G,kBAAkB9a,KACxE,EAAC2B,IACD,SAA6ByV,GAAa7iB,GAAmB,mBAAoB,GAACyQ,CAAAA,IAAAnE,iBAAAA,IAIlF,WAEE,OAAwB,MAAhBb,KAAK+T,SAA0B/T,KAAK+T,QAAQ8H,gBAAgB7b,KACtE,EAAC2B,IACD,SAA2ByV,GAAa7iB,GAAmB,iBAAkB,GAAC,CAAAyQ,IAAAnE,kBAAAA,IAI9E,WAEE,OAAwB,MAAZb,KAAC+T,SAA0B/T,KAAK+T,QAAQ+H,iBAAiB9b,KACvE,EAAC2B,IACD,SAA4ByV,GAAa7iB,GAAmB,kBAAmB,GAACyQ,CAAAA,IAAAnE,YAAAA,IAmBhF,WAAuC,OAAOb,KAAKgZ,WAAWxT,OAAQ,EAAC7D,IACvE,SAAsByV,GAAiB7iB,GAAmB,YAAa,GAACyQ,CAAAA,iBAAAnE,IAIxE,WAAmC,OAAWb,KAACgZ,WAAW5d,MAAO,EAACuG,IAClE,SAAuByV,GAAY7iB,GAAmB,aAAc,IAvMtCK,CAAR+jB,CAAQ/jB,IAooB1B4oB,GAAmCzb,OAAOC,OAAO,MACpD,CACC,OAAO,kBAAkB,oBACzB,aAAa,WAAW,aAAa,YAAY,aACjD,kBACA,WAAW,QAAQ,eAAe,gBAClC,aAAa,YAAY,cACzBX,QAAQ,SAACoc,UAAoBD,GAAuBC,IAAY,CAAI,GAE3D,IAAA9nB,gBAAY,SAAA+nB,GACvB,SAAA/nB,EAAuBnB,GAAa,IAAAmpB,EAMjB,OAJjBA,EAAAD,EAAAvd,KAAM/D,UAAAA,OAAUA,IAAU4D,MAuElB4d,UAAmC,GAAED,EAyBrCE,aAAyC,GAAEF,EAiB3CG,SAAiC,GAAEH,EAiBrCI,aAAyB,CAAE,EAjIjCJ,EAAK7J,SAAQ6J,EAEbhmB,GAAW,eAAenD,GAC1BmpB,EAAK9J,MAAQrf,EAAImpB,CACnB,CAAC1E,GAAAtjB,EAAA+nB,GAAAM,IAAAA,EAAAroB,EAAA0f,UAuKA8B,OAvKA6G,EAcMC,iBAAA,SAAkBlB,GAGvB,GAFAmB,EAAAA,qBAAqB,mBAAmBnB,EAAUxf,EAAcA,gBAEvC,IAArBwf,EAAU3hB,OAAd,CAII,IADF,IAAIoD,EACOrD,EAAI,EAAGue,EAAIqD,EAAU3hB,OAAQD,EAAIue,EAAGve,IAE3C,GAAc,OADdqD,GAAUA,GAAUwB,MAAM2Z,QAAQoD,EAAU5hB,KACtB,OAE1B,OAAOqD,CACT,CACF,EAACwf,EAIMjd,aAAA,SAAcD,GAEnB,OADA/J,GAAS,YAAY+J,GACdC,GAAaf,KAAKc,EAC3B,EAACkd,EAIMG,YAAA,SAAard,GAClB,IAAMlG,EAASmG,GAAaf,KAAKc,GAKjC,OAJIpL,GAAekF,IAAS5G,GAC1B,2EAGK4G,CACT,EAACojB,EAIMI,cAAA,SAAetd,GAEpB,OADA/J,GAAS,aAAa+J,GAtqJ1B,SAAwBnG,EAAqBmG,GAC3C,IAAII,EAAkBF,GAA0BH,IAAIlG,GACpD,GAAuB,MAAnBuG,EAEJ,OAAOA,EAAgBJ,EACzB,CAkqJWsd,CAAcpe,KAAKc,EAC5B,EAACkd,EAIMK,8BAAA,WACLre,KAAKsV,iBAELtV,KAAKgZ,WAAW3X,QACd,SAACxG,GAAoB,OAAAA,EAAMwjB,+BAA+B,EAE9D,EAACL,EAMMM,SAAA,SAAUC,GACfta,EAAcA,eAAC,sBAAsBsa,GACrCve,KAAK4d,UAAUhc,KAAK2c,EACtB,EAACP,EAIe5H,cAAA,SACdC,EAA+B7U,GAAmCgd,IAAAA,EAAbxe,KAAAye,EAAa,GAAAjZ,MAAArF,KAAAsW,UAElE,GAAe,cAAXJ,IACFA,EAASjhB,GAAcoM,GAAU,kBAAoB,oBAGvDid,EAAQC,QAAQ1e,KAAMqW,EAAQ7U,GAC9BxB,KAAK4d,UAAUvc,QAEb,SAACkd,GAA6B,OAAKA,EAAShI,MAAMiI,EAAKC,EAAQ,EAEnE,EAACT,EAMMW,YAAA,SAAaJ,GAClBta,EAAcA,eAAC,yBAAyBsa,GACxCve,KAAK6d,aAAajc,KAAK2c,EACzB,EAACP,EAIMtV,SAAA,SAAU7N,EAAkBa,GAAoB,IAAAkjB,EAAA5e,KACrDA,KAAK6d,aAAaxc,QAChB,SAACkd,GAAqC,OAAAA,EAASK,EAAM/jB,EAAOa,EAAQ,EAExE,EAACsiB,EAMMa,QAAA,SAASN,GACdta,EAAcA,eAAC,qBAAqBsa,GACpCve,KAAK8d,SAASlc,KAAK2c,EACrB,EAACP,EAIM3d,UAAA,SAAWmB,EAAmBpN,OAAe0qB,EAAA9e,KAClDA,KAAK8d,SAASzc,QACZ,SAACkd,GAA4B,OAAKA,EAASO,EAAMtd,EAAQpN,EAAM,EAEnE,EAACuB,EAkCaopB,iBAAP,SACLvqB,EAAe4M,GAEfzJ,GAAW,eAAenD,GAE1B,IAAMgK,EAAS,IAAI7I,EAAYnB,GAM/B,cALS4M,EAAc5M,KACrBgK,EAAOqV,MAAQrf,EAEfgK,EAAOqY,8BAA8BzV,GACrC5C,EAAOmc,uBAAuBvZ,GACzB5C,CACT,EAAC2Y,GAAAxhB,EAAA,CAAA,CAAAqP,IAAA,OAAAnE,IAnKD,WAAyC,OAAWb,KAAC6T,KAAM,EAAClS,IAC5D,SAAiByV,GAAwB7iB,GAAmB,OAAQ,IAACyQ,IAAA,YAAAnE,IAIrE,WAAyC,MAAO,EAAG,EAACc,IACpD,SAAsByV,GAAmB7iB,GAAmB,YAAa,GAACyQ,CAAAA,IAAAnE,cAAAA,IAqH1E,WAAuC,OAAAoC,MAAYjD,KAAK+d,aAAe,EAACpc,IACxE,SAAwBqd,GAChBC,EAAaA,cAACjf,KAAK+d,eAAe/pB,GACtC,gEAGFwG,GAAmB,wBAAwBwkB,GACvCC,EAAAA,cAAcD,IAAehrB,GAC/B,6DAGFgM,KAAK+d,aAAY9a,GAAQ+b,CAAAA,EAAAA,EAC3B,GAACha,CAAAA,oBAAAnE,IAID,WACE,IAAMrC,EAAsB,CAAA,EAK5B,OAJEwB,KAAK0W,4BAA4BlY,GACjCwB,KAAK0c,qBAAqBle,UAEnBA,EAAOsC,GACTtC,CACT,EAACmD,IACD,SAA0ByV,GAAkB7iB,GAAmB,gBAAiB,IA/JjDc,CAAR,CAAQA,IAsL3B6pB,GAAiCnd,OAAOC,OAAO,MAClD,CACC,OAAO,kBAAkB,oBACzB,aAAa,WAAW,aAAa,YAAY,aACjD,kBACA,WAAW,QAAQ,eAAe,gBAClC,aAAa,YAAY,cACzBX,QAAQ,SAACoc,GAAoB,OAAAyB,GAAqBzB,IAAY,CAAI,GAEzD,IAAAxnB,gBAAU,SAAAkpB,GACL,SAAAlpB,EAAa0E,EAAqBmG,GAAmB,IAAAse,EAIzB,OAH1CA,EAAAD,EAAAhf,KAAAH,KAAMrF,EAASmG,IAAGd,MAQVqf,aAA6B,GAAED,EAkT/BpY,cAAQoY,EAAAA,EASR7R,aAAO,EAvrKnB,SAAyB5S,EAAqBC,GAC5C,IAAIgG,EAAiBH,GAAyBI,IAAIlG,GAC5B,MAAlBiG,GACFH,GAAyBkB,IAAIhH,EAAQiG,EAAiBmB,OAAOC,OAAO,OAGtE,IAAMlB,EAAKlG,EAAOkG,GAEdA,KAAMF,GAAgB5M,GACxB,4CAA8CS,EAAMA,OAACqM,GACrD,iCAIFF,EAAeE,GAAMlG,CACvB,CAs2JI0kB,CAAe3kB,EAAOykB,GAEtBzkB,EAAQyb,cAAc,cAAagJ,GAAOA,CAC5C,CAACnG,GAAAhjB,EAAAkpB,GAAAI,IAAAA,EAAAtpB,EAAAof,UA8XA,OA9XAkK,EAgBMC,eAAA,SAAgB9jB,GAErB,OADAhF,GAAc,4BAA4BgF,QAC9B2jB,aAAa9b,QAAQ7H,EACnC,EAAC6jB,EAIM7jB,QAAA,SAAS+jB,GAGd,OAFAzF,EAAAA,YAAY,yBAAyByF,IAE7B,GACN,KAAKnpB,GAAempB,GAElB,OADgBA,EACA5kB,QAAUmF,KADVyf,OAC2BrjB,EAC7C,KAAKa,EAAcA,eAACwiB,GAElB,OAAOzf,KAAKqf,aADEI,GAEhB,KAAKjoB,GAAYioB,GACf,OAAOzf,KAAK0f,aAAaD,GAG7BzrB,GACE,yEAEJ,EAACurB,EAIMI,gBAAA,SAAiBF,GACtB,IAAI/jB,EAAUsE,KAAKtE,QAAQ+jB,GAI3B,OAHiB,MAAX/jB,GAAiB1H,GACnB,2DAEG0H,CACT,EAAC6jB,EAIMG,aAAA,SAAclrB,GACnBmD,GAAW,mBAAmBnD,GAC9BA,EAAOA,EAAKqJ,OAAOiF,cAEnB,IAAItE,OAA+BpC,EASnC,OARE4D,KAAKqf,aAAahe,QAAQ,SAAC3F,GAEZ,MAAV8C,GACgB,MAAhB9C,EAAQlH,MAAkBkH,EAAQlH,KAAKsO,gBAAkBtO,IAE1DgK,EAAS9C,EAEb,GACK8C,CACT,EAAC+gB,EAIMK,UAAA,SAAW9kB,GAGhB,OAFAof,EAAaA,cAAC,oBAAoBpf,GAC9BA,EAAQ,IAAKA,GAASkF,KAAKqf,aAAajkB,QACjC4E,KAACqf,aAAavkB,EAC3B,EAACykB,EAIMM,WAAA,SAAYJ,GACjB,OAA8C,WAAjC/jB,QAAQ+jB,EACvB,EAACF,EAIMO,aAAA,SAAchlB,EAAegG,GAClC,OAEId,KAAK+f,sBADD,MAANjf,EAC6B,CAAE,EACF,CAAEA,GAAAA,GADChG,EAGpC,EAACykB,EAIMQ,sBAAA,SAAuB3e,EAA4BtG,GACxDN,GAAmB,wBAAwB4G,GAC3CkZ,EAAAA,aAAuB,oBAAoBxf,GAE9B,MAATA,EACFA,EAAQkF,KAAKqf,aAAajkB,QAEtBN,EAAQ,IAAKA,GAASkF,KAAKqf,aAAajkB,QAC5CN,EAAQ4L,KAAK6T,IAAI,EAAE7T,KAAKE,IAAI9L,EAAMkF,KAAKqf,aAAajkB,UAGtD,IAAM0F,EAAKhK,GAAU,aAAasK,EAAcN,IAE5Ckf,EAAa,IAAIzpB,GAAYyJ,KAAKrF,QAASmG,GAO/C,OANEd,KAAKigB,iBAAiBD,EAAWllB,GAGjCklB,EAAWnJ,8BAA8BzV,GAEzCpB,KAAK0I,WACAsX,CACT,EAACT,EAIMW,qBAAA,SAAsBplB,GAC3Bof,EAAaA,cAAC,oBAAoBpf,GAClC,IACMsG,EADUpB,KAAK2f,gBAAgB7kB,GACPsG,cAE9B,OADED,GAAcC,GACTpB,KAAK+f,sBAAsB3e,EAActG,EAAM,EACxD,EAACykB,EAIMY,kBAAA,SAAmBV,GACxB,IAAM/jB,EAAUsE,KAAK2f,gBAAgBF,GACrC,OAAQzf,KAAKqf,aAAa9b,QAAQ7H,GAAW,CAC/C,EAAC6jB,EAEMa,oBAAA,SAAqBX,GAC1B,IAAM/jB,EAAUsE,KAAK2f,gBAAgBF,GAE/B7jB,EAAeoE,KAAKqf,aACpBgB,EAAezkB,EAAY2H,QAAQ7H,GACzC,OAAQ2kB,GAAgB,GAAOA,EAAezkB,EAAYR,OAAO,CACnE,EAACmkB,EAIMe,kBAAA,SAAmBb,GACxB,IAAM/jB,EAAUsE,KAAK2f,gBAAgBF,GACrC,GAAIzf,KAAKmgB,kBAAkBzkB,GAAU,CACnC,IAAMuf,EAAWjb,KAAKqf,aAAa9b,QAAQ7H,GAC3CsE,KAAKlE,iBAAiBmf,GACtBjb,KAAKigB,iBAAiBvkB,EAAQ,GAC9BsE,KAAK0I,UACP,CACF,EAAC6W,EAIMgB,eAAA,SAAgBd,GACrB,IAAM/jB,EAAUsE,KAAK2f,gBAAgBF,GACrC,GAAIzf,KAAKmgB,kBAAkBzkB,GAAU,CACnC,IAAMuf,EAAWjb,KAAKqf,aAAa9b,QAAQ7H,GAC3CsE,KAAKlE,iBAAiBmf,GACtBjb,KAAKigB,iBAAiBvkB,EAAQuf,EAAS,GACvCjb,KAAK0I,UACP,CACF,EAAC6W,EAIMiB,iBAAA,SAAkBf,GACvB,IAAM/jB,EAAUsE,KAAK2f,gBAAgBF,GACrC,GAAIzf,KAAKogB,oBAAoB1kB,GAAU,CACrC,IAAMuf,EAAWjb,KAAKqf,aAAa9b,QAAQ7H,GAC3CsE,KAAKlE,iBAAiBmf,GACtBjb,KAAKigB,iBAAiBvkB,EAAQuf,EAAS,GACvCjb,KAAK0I,UACP,CACF,EAAC6W,EAIMkB,qBAAA,SAAsBhB,GAC3B,IAAM/jB,EAAUsE,KAAK2f,gBAAgBF,GACrC,GAAIzf,KAAKogB,oBAAoB1kB,GAAU,CACrC,IAAMuf,EAAWjb,KAAKqf,aAAa9b,QAAQ7H,GAC3CsE,KAAKlE,iBAAiBmf,GACtBjb,KAAKigB,iBAAiBvkB,EAAQsE,KAAKqf,aAAajkB,QAChD4E,KAAK0I,UACP,CACF,EAAC6W,EAIMmB,eAAA,SACLjB,EAAkDnE,GAElD,IAAM5f,EAAUsE,KAAK2f,gBAAgBF,GAErCvF,EAAAA,cAAc,oBAAoBoB,GAC9BA,EAAW,IAAKA,GAAYtb,KAAKqf,aAAajkB,QAClDkgB,EAAW5U,KAAK6T,IAAI,EAAE7T,KAAKE,IAAI0U,EAAStb,KAAKqf,aAAajkB,OAAO,IAEjE,IAAM6f,EAAWjb,KAAKqf,aAAa9b,QAAQ7H,GACvCuf,IAAaK,IAEjBtb,KAAKlE,iBAAiBmf,GACtBjb,KAAKigB,iBAAiBvkB,EAAQ4f,GAE9Btb,KAAK0I,WACP,EAAC6W,EAIMoB,qBAAA,SACL1F,EAAiBK,EAAiBE,GAAY,IAAAoF,EAAA5gB,KAExC6gB,EAAe7gB,KAAKqf,aAAajkB,OAEvCugB,EAAoBA,qBAAC,YAAYV,EAAS,EAAE4F,GAC5ClF,EAAoBA,qBAAC,YAAYL,EAAS,EAAEuF,GAE5C,IAAMC,EAAkB9gB,KAAKqf,aAAa7Z,MAAMyV,EAASA,EAASO,GAClEsF,EAAgBzf,QAAQ,SAAC+V,GAAK,OAAKwJ,EAAK9kB,iBAAiBmf,EAAS,GAE9DK,EAAWL,IAAYK,GAAYE,GACvCsF,EAAgBzf,QACd,SAAC3F,EAAoBP,GAAQ,OAAKylB,EAAKX,iBAAiBvkB,EAAQ4f,EAASngB,EAAE,GAG7E6E,KAAK0I,UACP,EAAC6W,EAIMwB,eAAA,SAAgBtB,GACrB,IAAM/jB,EAAUsE,KAAKtE,QAAQ+jB,GAC7B,GAAe,MAAX/jB,EAAJ,CAOAmG,GAAmCnG,GAEnC,IAAMuf,EAAWjb,KAAKqf,aAAa9b,QAAQ7H,GAC3CsE,KAAKlE,iBAAiBmf,GAEtBha,GAAkBvF,GAElBA,EAAQoY,cAAW1X,EAEnB4D,KAAKoW,cAAc,iBAAiB1a,GACpCsE,KAAK0I,UAZL,MAJMpS,GAAempB,IAAuBzrB,GACxC,sDAgBN,EAACurB,EAIMjD,MAAA,WACL6C,EAAA9J,UAAMiH,MAAKnc,KAEXH,MAAA,IAAK,IAAI7E,EAAI,EAAGue,EAAI1Z,KAAKqf,aAAajkB,OAAQD,EAAIue,EAAGve,IACnD6E,KAAK+gB,eAAe/gB,KAAKqf,aAAa,GAE1C,EAACE,EAIMlB,8BAAA,WACLre,KAAKsV,iBAELtV,KAAKgZ,WAAW3X,QACd,SAACxG,GAAe,OAAKA,EAAMwjB,+BAA+B,GAG5Dre,KAAKqf,aAAahe,QAChB,SAAC3F,GAAwB,OAAAA,EAAQ4Z,gBAAgB,EAErD,EAACiK,EAIMxJ,UAAA,SAAWpR,GAChB,GAAI3E,KAAKgW,SACP,OAAO/V,GAAcE,KAAKH,MAG5B,IAAI0E,EAAW1E,KAAK+U,UACpB,GAAgB,MAAZrQ,EAAoB,MAAO,GAE/B,IACE,OAAOA,EAASvE,KAAKH,KAAK2E,EAC5B,CAAE,MAAO+Q,GAKP,OAJA1V,KAAK5L,MAAQ,CACX2F,KAAK,oBACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,GAEpBzV,GAAcE,KAAKH,KAC5B,CACF,EAACuf,EAIM7W,SAAA,WACL1I,KAAKrF,QAAQ+N,SAAS1I,KACxB,EAACuf,EAMMzY,QAAA,SAASka,GACd/c,EAAcA,eAAC,wBAAwB+c,GACvChhB,KAAKgH,SAAWga,CAClB,EAACzB,EAMMlS,OAAA,SAAQ2T,GACb/c,EAAAA,eAAe,uBAAuB+c,GACtChhB,KAAKuN,QAAUyT,CACjB,EAACzB,EAIeU,iBAAA,SAAkBvkB,EAAqBZ,GAErDY,EAAQqY,QAAU/T,KAClBA,KAAKqf,aAAa9C,OAAOzhB,EAAM,EAAGY,GAClCsE,KAAKoW,cAAc,gBAAiB1a,EAASsE,KAAMlF,EACrD,EAACykB,EAIezjB,iBAAA,SAAkBhB,GAChC,IAAMY,EAAUsE,KAAKqf,aAAa9C,OAAOzhB,EAAM,GAAG,GAElDY,EAAQqY,aAAU3X,EAClB4D,KAAKoW,cAAc,gBAAiB1a,EAASsE,KAAMlF,EACrD,EAACykB,EAeS0B,uBAAA,SAAwB7f,GAChC,IAAMxF,EAAcoE,KAAKqf,aAAa7Z,QAClC5J,EAAYR,OAAS,IACvBgG,EAAcxF,YAAcA,EAAYsN,IACtC,SAACxN,GAAwB,OAAAA,EAAQ0F,aAAa,GAGpD,EAACme,EAIS7E,yBAAA,SAA0BtZ,OAA0B8f,EAAAlhB,KACxCA,KAAKqf,aACTjkB,OAAS,GAAK4E,KAAKsc,QAGjCrd,EAAAA,sBAAsBmC,EAAcxF,YAAY/B,EAAkBA,qBAChEuH,EAAcxF,YAA+BR,OAAS,GAEvDgG,EAAcxF,YAA+ByF,QAC5C,SAAC8f,EAAmCrmB,GAClComB,EAAKnB,sBAAsBoB,EAAqBrmB,EAClD,EAGN,EAACqc,GAAAlhB,EAAA,CAAA,CAAA+O,IAAA,cAAAnE,IAxXD,WAA2C,OAAWb,KAACqf,aAAa7Z,OAAQ,EAAC7D,IAC7E,SAAwByV,GAAmB7iB,GAAmB,cAAe,GAACyQ,CAAAA,IAAAnE,eAAAA,IAI9E,WAAqC,OAAOb,KAAKqf,aAAajkB,MAAO,EAACuG,IACtE,SAAyByV,GAAY7iB,GAAmB,eAAgB,GAACyQ,CAAAA,IAAAnE,gBAAAA,IA8UzE,WACE,IAAMrC,EAAsB,CAAE,EAI9B,OAHEwB,KAAK0W,4BAA4BlY,GACjCwB,KAAK0c,qBAAqBle,GAC1BwB,KAAKihB,uBAAuBziB,GACvBA,CACT,EAACmD,IACD,SAA0ByV,GAAkB7iB,GAAmB,gBAAiB,IAAC,CAvW5D,CAAQc,IA2YzB+rB,GAAmCrf,OAAOC,OAAO,MACpD,CACC,OACA,OAAO,gBAAgB,aAAa,WACpC,WAAW,WAAW,YAAY,YAClC,kBAAkB,oBAClB,aAAa,WAAW,aAAa,YAAY,aACjD,kBACA,WAAW,QAAQ,eAAe,iBAClCX,QAAQ,SAACoc,GAAe,OAAK2D,GAAuB3D,IAAY,CAAI,GAE3D,IAAAlnB,gBAAY8qB,SAAAA,GACP,SAAA9qB,EAAaoE,EAAqBmG,GAAmBwgB,IAAAA,EAIvB,OAH5CA,EAAAD,EAAAlhB,KAAAH,KAAMrF,EAASmG,IAAGd,MA4DVuhB,eAAoCnlB,EAASklB,EA4B7CE,eAppLaplB,EAopLsCklB,EAsBnDG,gBAAqCrlB,EAASklB,EA4B9CI,gBApsLatlB,EAosLwCklB,EA4ErDK,UAAS1e,GAAqBlH,CAAAA,EAAAA,IAAsBulB,EA6BpDM,OAAgB,EAAKN,EAyBrBO,gBAAyB,EAAKP,EAoB9BQ,aAAsB,EAAIR,EAyB1BS,WAAoB,EAAIT,EAyBxBta,cAAQ,EAAAsa,EASR9Y,cAAQ8Y,EAAAA,EASR/T,eArkLZ,SAA0B5S,EAAqBe,GAC7C,IAAIwF,EAAkBF,GAA0BH,IAAIlG,GAC7B,MAAnBuG,GACFF,GAA0BW,IAAIhH,EAAQuG,EAAkBa,OAAOC,OAAO,OAGxE,IAAMlB,EAAKpF,EAAQoF,GAEfA,KAAMI,GAAiBlN,GACzB,6CAA+CS,EAAAA,OAAOqM,GACtD,iCAIFI,EAAgBJ,GAAMpF,CACxB,CAmtKIsmB,CAAgBrnB,EAAO2mB,GAEvB3mB,EAAQyb,cAAc,gBAAekL,GAAOA,CAC9C,CAACrI,GAAA1iB,EAAA8qB,GAAAY,IAAAA,EAAA1rB,EAAA8e,UA6aA8B,OA7aA8K,EA8PMC,KAAA,WAAiBliB,KAAKmiB,MAAO,CAAK,EAACF,EACnCG,OAAA,WAAiBpiB,KAAKmiB,MAAO,CAAM,EAACF,EA4CpCI,KAAA,WAAeriB,KAAKsiB,YAAa,CAAK,EAACL,EACvCM,KAAA,WAAeviB,KAAKsiB,YAAa,CAAM,EAACL,EAwBxCO,OAAA,WAAkBxiB,KAAK+G,UAAW,CAAK,EAACkb,EACxCQ,QAAA,WAAkBziB,KAAK+G,UAAW,CAAM,EAACkb,EAWzCnb,QAAA,SAASka,GACd/c,EAAAA,eAAe,wBAAwB+c,GACvChhB,KAAKgH,SAAWga,CAClB,EAACiB,EAMM3Z,QAAA,SAAS0Y,GACd/c,EAAcA,eAAC,wBAAwB+c,GACvChhB,KAAKwI,SAAWwY,CAClB,EAACiB,EAMM5U,OAAA,SAAQ2T,GACb/c,EAAAA,eAAe,uBAAuB+c,GACtChhB,KAAKuN,QAAUyT,CACjB,EAACiB,EAIMlM,UAAA,SAAWpR,GAChB,GAAI3E,KAAKgW,SACP,OAAO/V,GAAcE,KAAKH,MAG5B,IAAI0E,EAAW1E,KAAK+U,WAAapV,GAEjC,IACE,OAAO+E,EAASvE,KAAKH,KAAK2E,EAC5B,CAAE,MAAO+Q,GAKP,OAJA1V,KAAK5L,MAAQ,CACX2F,KAAK,oBACL9F,QAAQ,GAAGyhB,EAAQG,MAAMH,GAEpBzV,GAAcE,KAAKH,KAC5B,CACF,EAACiiB,EAIMvZ,SAAA,WACL1I,KAAK8T,SAASpL,SAAU1I,KAAK+T,QAAuB/T,KACtD,EAACiiB,EAaSvL,4BAAA,SAA6BtV,GACrCigB,EAAAhM,UAAMqB,4BAA2BvW,KAACiB,KAAAA,GAElCA,EAAc8C,SAAQjB,GAAA,CAAA,EAAQjD,KAAK2hB,WAEZ,MAAnB3hB,KAAKuhB,YAAsBngB,EAAcoD,SAAYxE,KAAKuhB,WACvC,MAAnBvhB,KAAKwhB,YAAsBpgB,EAAcshB,SAAY1iB,KAAKwhB,WACvC,MAAnBxhB,KAAKyhB,aAAsBrgB,EAAcqD,UAAYzE,KAAKyhB,YACvC,MAAnBzhB,KAAK0hB,aAAsBtgB,EAAcuhB,UAAY3iB,KAAK0hB,YAE1D1hB,KAAK4iB,eAAgBxhB,EAAcmD,eAAgB,GACnDvE,KAAK6iB,WAAgBzhB,EAAc+gB,MAAgB,GACjDniB,KAAK8iB,YAAc1hB,EAAckhB,YAAgB,GACjDtiB,KAAK+iB,YAAc3hB,EAAc2F,UAAgB,EACzD,EAACkb,EAISpL,8BAAA,SAA+BzV,GACvCigB,EAAAhM,UAAMwB,8BAA6B1W,KAAAH,KAACoB,GAEpC,IAAA4hB,EAA4B5hB,EAAc8C,UAA4BnI,GAAhErD,EAACsqB,EAADtqB,EAAEC,EAACqqB,EAADrqB,EAAGM,EAAK+pB,EAAL/pB,MAAMC,EAAM8pB,EAAN9pB,OACTrB,GAAgBa,KAAMA,EAAIqD,GAAuBrD,GACjDb,GAAgBc,KAAMA,EAAIoD,GAAuBpD,GACjDR,GAAiBc,KAAWA,EAAS8C,GAAuB9C,OAC5Dd,GAAiBe,KAAWA,EAAS6C,GAAuB7C,QAEpE8G,KAAKkE,SAAW,CAAExL,EAAAA,EAAEC,EAAAA,EAAGM,MAAAA,EAAMC,OAAAA,IAEO,IAAhCkI,EAAcmD,gBAA2BvE,KAAKuE,eAAgB,IAC9B,IAAhCnD,EAAc+gB,OAA2BniB,KAAKmiB,MAAgB,IAC9B,IAAhC/gB,EAAckhB,aAA2BtiB,KAAKsiB,YAAgB,IAC9B,IAAhClhB,EAAc2F,WAA2B/G,KAAK+G,UAAgB,EACpE,EAACoQ,GAAA5gB,EAAA,CAAA,CAAAyO,IAAA,QAAAnE,IAzaD,WAAiC,OAAOb,KAAK+T,OAAqB,EAACpS,IACnE,SAAkByV,GAAe7iB,GAAmB,QAAS,IAACyQ,IAAA,kBAAAnE,IAI9D,WACE,OAAWb,KAACgU,gBACd,EAACrS,IAED,SAA4B4V,GAC1BC,EAAUA,WAAC,2BAA2BD,GAClCvX,KAAKgU,mBAAqBuD,IAC5BvX,KAAKgU,iBAAmBuD,EAExBvX,KAAKoW,cAAc,YAAYpW,KAAK,kBAAkBuX,GACtDvX,KAAK0I,WAET,GAAC,CAAA1D,IAAAnE,oBAAAA,IAID,WACE,OAAOb,KAAKiU,kBACd,EAACtS,IAED,SAA8B8V,GAC5BC,EAAQA,SAAC,6BAA6BD,GAClCzX,KAAKiU,qBAAuBwD,IAC9BzX,KAAKiU,mBAAqBwD,EAE1BzX,KAAKoW,cAAc,YAAYpW,KAAK,oBAAoByX,GACxDzX,KAAK0I,WAET,GAAC,CAAA1D,IAAA,QAAAnE,IAID,WAA8B,YAAakT,QAAsByL,eAAexf,KAAM,EAAC2B,IACvF,SAAkByV,GAAY7iB,GAAmB,QAAS,IAACyQ,IAAA,iBAAAnE,IAI3D,WAAwC,OAAYb,KAAC+T,QAAsBoM,kBAAkBngB,KAAM,EAAC2B,IACpG,SAA2ByV,GAAa7iB,GAAmB,iBAAkB,GAAC,CAAAyQ,IAAA,mBAAAnE,IAI9E,WAA0C,YAAakT,QAAsBqM,oBAAoBpgB,KAAM,EAAC2B,IACxG,SAA6ByV,GAAa7iB,GAAmB,mBAAoB,IAACyQ,IAAA,WAAAnE,IAMlF,WACE,OAA0B,MAAdb,KAACuhB,UA5nLQ,GA4nL8BvhB,KAAKuhB,SAC1D,EAAC5f,IACD,SAAqBshB,GACnB7qB,GAAe,wBAAwB6qB,GACnCjjB,KAAKuhB,YAAc0B,IACrBjjB,KAAKuhB,UAAY0B,EACjBjjB,KAAKoW,cAAc,YAAYpW,KAAK,WAAWijB,GAG1B,MAAlBjjB,KAAKuhB,WAAyC,MAAlBvhB,KAAKwhB,WACjCxhB,KAAKwhB,UAAYxhB,KAAKuhB,YAEvBvhB,KAAKwhB,UAAYyB,EACjBjjB,KAAKoW,cAAc,YAAYpW,KAAK,WAAWA,KAAKuhB,YAG/B,MAAlBvhB,KAAKuhB,WAAuBvhB,KAAK2hB,UAAU1oB,MAAQ+G,KAAKuhB,YAC3DvhB,KAAK/G,MAAQ+G,KAAKuhB,WAEpBvhB,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,WAAAA,IAMD,WAAkD,OAAOb,KAAKwhB,SAAU,EAAC7f,IACzE,SAAqBuhB,GACnB9qB,GAAe,wBAAwB8qB,GACnB,MAAfA,GAA2C,MAAlBljB,KAAKuhB,YACjC2B,EAAcxc,KAAK6T,IAAIva,KAAKuhB,UAAU2B,IAGpCljB,KAAKwhB,YAAc0B,IACrBljB,KAAKwhB,UAAY0B,EACjBljB,KAAKoW,cAAc,YAAYpW,KAAK,WAAWA,KAAKwhB,WAE7B,MAAlBxhB,KAAKwhB,WAAuBxhB,KAAK2hB,UAAU1oB,MAAQ+G,KAAKwhB,YAC3DxhB,KAAK/G,MAAQ+G,KAAKwhB,WAEpBxhB,KAAK0I,WAET,GAAC1D,CAAAA,gBAAAnE,IAMD,WACE,OAA2B,MAAfb,KAACyhB,WA5qLQ,GA4qLgCzhB,KAAKyhB,UAC5D,EAAC9f,IACD,SAAsBwhB,GACpB/qB,GAAe,yBAAyB+qB,GACpCnjB,KAAKyhB,aAAe0B,IACtBnjB,KAAKyhB,WAAa0B,EAClBnjB,KAAKoW,cAAc,YAAYpW,KAAK,YAAYmjB,GAG1B,MAAnBnjB,KAAKyhB,YAA2C,MAAnBzhB,KAAK0hB,YAClC1hB,KAAK0hB,WAAa1hB,KAAKyhB,aAExBzhB,KAAK0hB,WAAayB,EAClBnjB,KAAKoW,cAAc,YAAYpW,KAAK,YAAYA,KAAKyhB,aAG/B,MAAnBzhB,KAAKyhB,YAAwBzhB,KAAK2hB,UAAUzoB,OAAS8G,KAAKyhB,aAC7DzhB,KAAK9G,OAAS8G,KAAKyhB,YAErBzhB,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,YAAAA,IAMD,WAAmD,OAAOb,KAAK0hB,UAAW,EAAC/f,IAC3E,SAAsByhB,GACpBhrB,GAAe,yBAAyBgrB,GACnB,MAAhBA,GAA6C,MAAnBpjB,KAAKyhB,aAClC2B,EAAe1c,KAAK6T,IAAIva,KAAKyhB,WAAW2B,IAGtCpjB,KAAK0hB,aAAe0B,IACtBpjB,KAAK0hB,WAAa0B,EAClBpjB,KAAKoW,cAAc,YAAYpW,KAAK,YAAYA,KAAK0hB,YAE7B,MAAnB1hB,KAAK0hB,YAAwB1hB,KAAK2hB,UAAUzoB,OAAS8G,KAAK0hB,aAC7D1hB,KAAK9G,OAAS8G,KAAK0hB,YAErB1hB,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,IAAAA,IAID,WAA+B,OAAOb,KAAK2hB,UAAUjpB,CAAE,EAACiJ,IACxD,SAAc0hB,GACZprB,GAAe,uBAAuBorB,GACtCrjB,KAAKkE,SAAQjB,GAAA,CAAA,EAAQjD,KAAKkE,SAAUxL,CAAAA,EAAE2qB,GACxC,GAACre,CAAAA,IAAAnE,IAAAA,IAID,WAA+B,OAAOb,KAAK2hB,UAAUhpB,CAAE,EAACgJ,IACxD,SAAc2hB,GACZrrB,GAAe,uBAAuBqrB,GACtCtjB,KAAKkE,SAAQjB,GAAA,CAAA,EAAQjD,KAAKkE,SAAUvL,CAAAA,EAAE2qB,GACxC,GAAC,CAAAte,IAAA,QAAAnE,IAID,WAAoC,OAAWb,KAAC2hB,UAAU1oB,KAAM,EAAC0I,IACjE,SAAkByb,GAChB9kB,GAAgB,gBAAgB8kB,GAChCpd,KAAKkE,SAAQjB,GAAA,CAAA,EAAQjD,KAAKkE,SAAQ,CAAEjL,MAAMmkB,GAC5C,GAACpY,CAAAA,aAAAnE,IAID,WAAqC,OAAWb,KAAC2hB,UAAUzoB,MAAO,EAACyI,IACnE,SAAmB4b,GACjBjlB,GAAgB,iBAAiBilB,GACjCvd,KAAKkE,SAAQjB,GAAQ,CAAA,EAAAjD,KAAKkE,SAAQ,CAAEhL,OAAOqkB,GAC7C,GAACvY,CAAAA,IAAAnE,WAAAA,IAID,WACE,MAAO,CAAEnI,EAAEsH,KAAK2hB,UAAUjpB,EAAGC,EAAEqH,KAAK2hB,UAAUhpB,EAChD,EAACgJ,IAED,SAAqB4hB,GACnBzqB,GAAe,kBAAkByqB,GACjCvjB,KAAKkE,SAAQjB,GAAA,CAAA,EAAQjD,KAAKkE,SAAUxL,CAAAA,EAAE6qB,EAAY7qB,EAAGC,EAAE4qB,EAAY5qB,GACrE,GAACqM,CAAAA,IAAAnE,OAAAA,IAID,WACE,MAAO,CAAE5H,MAAM+G,KAAK2hB,UAAU1oB,MAAOC,OAAO8G,KAAK2hB,UAAUzoB,OAC7D,EAACyI,IAED,SAAiB6hB,GACfnqB,GAAW,cAAcmqB,GACzBxjB,KAAKkE,SAAQjB,GAAQ,CAAA,EAAAjD,KAAKkE,SAAUjL,CAAAA,MAAMuqB,EAAQvqB,MAAOC,OAAOsqB,EAAQtqB,QAC1E,GAAC,CAAA8L,IAAA,WAAAnE,IAMD,WACE,IAAA4iB,EAA4BzjB,KAAK2hB,UAA3BjpB,EAAC+qB,EAAD/qB,EAAEC,EAAC8qB,EAAD9qB,EAAGM,EAAKwqB,EAALxqB,MAAMC,EAAMuqB,EAANvqB,OAMjB,OALwB,MAAlB8G,KAAKuhB,YAAqBtoB,EAAQyN,KAAK6T,IAAIva,KAAKuhB,UAAUtoB,IACxC,MAAlB+G,KAAKwhB,YAAqBvoB,EAAQyN,KAAKE,IAAI3N,EAAM+G,KAAKwhB,YAEnC,MAAnBxhB,KAAKyhB,aAAsBvoB,EAASwN,KAAK6T,IAAIva,KAAKyhB,WAAWvoB,IAC1C,MAAnB8G,KAAK0hB,aAAsBxoB,EAASwN,KAAKE,IAAI1N,EAAO8G,KAAK0hB,aACxD,CAAEhpB,EAAAA,EAAEC,EAAAA,EAAGM,MAAAA,EAAMC,OAAAA,EACtB,EAACyI,IAED,SAAqB+hB,GACnBhqB,GAAe,kBAAkBgqB,GAEjC,IAAAC,EAA4B3jB,KAAK2hB,UAA1BgC,EAADjrB,IAEGgrB,EAAYhrB,GAFLirB,EAAL1qB,QAE4ByqB,EAAYzqB,OAF1C0qB,EAADhrB,IAGC+qB,EAAY/qB,GAHEgrB,EAANzqB,SAGsBwqB,EAAYxqB,SAEjD8G,KAAK2hB,UAAS1e,GAAQygB,GAAAA,GAEtB1jB,KAAKoW,cAAc,YAAYpW,KAAK,WAAUiD,GAAA,CAAA,EAAMygB,IACpD1jB,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,OAAAA,IAMD,WAA6B,OAAOb,KAAK4hB,KAAM,EAACjgB,IAChD,SAAiBiiB,GACfC,EAAAA,cAAc,eAAeD,GACzB5jB,KAAK4hB,QAAUgC,IACjB5jB,KAAK4hB,MAAQgC,EAEb5jB,KAAKoW,cAAc,YAAYpW,KAAK,OAAO4jB,GAC3C5jB,KAAK0I,WAET,GAAC1D,CAAAA,eAAAnE,IASD,WAAwC,OAAWb,KAAC4hB,KAAM,EAACjgB,IAC3D,SAAqBiiB,GAAmB5jB,KAAKmiB,KAAOyB,CAAQ,GAAC5e,CAAAA,oBAAAnE,IAM7D,WAAsC,OAAWb,KAAC6hB,cAAe,EAAClgB,IAClE,SAA0BmiB,GACxBD,EAAaA,cAAC,wBAAwBC,GAClC9jB,KAAK6hB,iBAAmBiC,IAC1B9jB,KAAK6hB,eAAiBiC,EAEtB9jB,KAAKoW,cAAc,YAAYpW,KAAK,gBAAgB8jB,GACpD9jB,KAAK0I,WAET,GAAC,CAAA1D,IAAA,eAAAnE,IAID,WAAqD,YAAYghB,cAAe,EAAClgB,IACjF,SAAyBmiB,GAA4B9jB,KAAKuE,cAAgBuf,CAAiB,GAAC9e,CAAAA,IAAAnE,aAAAA,IAM5F,WAAmC,OAAOb,KAAK8hB,WAAY,EAACngB,IAC5D,SAAuBoiB,GACrBF,gBAAc,qBAAqBE,GAC/B/jB,KAAK8hB,cAAgBiC,IACvB/jB,KAAK8hB,YAAciC,EAEnB/jB,KAAKoW,cAAc,YAAYpW,KAAK,aAAa+jB,GACjD/jB,KAAK0I,WAET,GAAC1D,CAAAA,IAAAnE,YAAAA,IASD,WAA+C,OAAOb,KAAK8hB,WAAY,EAACngB,IACxE,SAAsBoiB,GAAyB/jB,KAAKsiB,WAAayB,CAAc,GAAC/e,CAAAA,IAAAnE,WAAAA,IAMhF,WAAiC,OAAOb,KAAK+hB,SAAU,EAACpgB,IACxD,SAAqBqiB,GACnBH,EAAAA,cAAc,mBAAmBG,GAC7BhkB,KAAK+hB,YAAciC,IACrBhkB,KAAK+hB,UAAYiC,EAEjBhkB,KAAKoW,cAAc,YAAYpW,KAAK,WAAWgkB,GAC/ChkB,KAAK0I,WAET,IAAC1D,IAAA,YAAAnE,IASD,WAA6C,OAAOb,KAAK+hB,SAAU,EAACpgB,IACpE,SAAsBqiB,GAAuBhkB,KAAK+G,SAAWid,CAAY,GAAC,CAAAhf,IAAAnE,gBAAAA,IAyD1E,WACE,IAAMrC,EAAsB,CAAE,EAE9B,OADEwB,KAAK0W,4BAA4BlY,GAC5BA,CACT,EAACmD,IACD,SAA0ByV,GAAkB7iB,GAAmB,gBAAiB,IA9YjDK,CAARysB,CAAQzsB,IA0bpBqvB,GAAuB,CAAC,YAAY,eAAe,aAAa,aAYvEngB,GAAgBogB,OAAOpgB,IAAM,CACjChQ,eAAAA,GAAgBC,eAAAA,GAChBC,WAAAA,GAAYO,mBAAAA,GACZG,cAAAA,GAAeG,YAAAA,GAAaG,cAAAA,GAAeC,aAAAA,GAAcE,eAAAA,GACzDC,cAAAA,GAAeE,YAAAA,GAAaC,cAAAA,GAAeC,aAAAA,GAAcC,eAAAA,GACzDC,eAAAA,GAAgBE,aAAAA,GAAcC,eAAAA,GAAgBC,cAAAA,GAAeC,gBAAAA,GAC7DC,aAAAA,GAAcE,WAAAA,GAAYC,aAAAA,GAAcC,YAAAA,GAAaC,cAAAA,GACrDC,eAAAA,GAAgBE,aAAAA,GAAcC,eAAAA,GAAgBC,cAAAA,GAAeC,gBAAAA,GAC7DC,UAAAA,GAAWC,QAAAA,GAASC,UAAAA,GAAWC,SAAAA,GAAUC,WAAAA,GACzCE,kBAAAA,GAAmBE,gBAAAA,GAAiBC,kBAAAA,GAAmBC,iBAAAA,GAAkBC,mBAAAA,GACzEC,YAAAA,GAAaC,UAAAA,GAAWC,YAAAA,GAAaC,WAAAA,GAAYC,aAAAA,GACjDC,gBAAAA,GAAiBE,cAAAA,GAAeC,gBAAAA,GAAiBC,eAAAA,GAAgBC,iBAAAA,GACjEC,iBAAAA,GAAkBC,eAAAA,GAAgBC,iBAAAA,GAAkBC,gBAAAA,GAAiBC,kBAAAA,GACrEC,gBAAAA,GAAiBI,cAAAA,GAAeC,gBAAAA,GAAiBC,eAAAA,GAAgBC,iBAAAA,GACjEC,YAAAA,GAAaG,UAAAA,GAAWC,YAAAA,GAAaC,WAAAA,GAAYC,aAAAA,GACjDC,gBAAAA,GAAiBC,cAAAA,GAAeC,gBAAAA,GAAiBC,eAAAA,GAAgBC,iBAAAA,GACjEC,aAAAA,GAAcK,WAAAA,GAAYC,aAAAA,GAAcC,YAAAA,GAAaC,cAAAA,GACrDC,oBAAAA,GAAqBC,kBAAAA,GAAmBC,oBAAAA,GAAqBC,mBAAAA,GAAoBC,qBAAAA,GACjFuB,kBAAAA,GAAmBG,0BAAAA,GACnBE,iBAAAA,GAAkBE,yBAAAA,GAClBC,wBAAAA,GAAyBO,gCAAAA,GACzBC,kBAAAA,GAAmBE,0BAAAA,GACnBC,yBAAAA,GAA0BE,iCAAAA,GAC1BC,kBAAAA,GAAmBE,0BAAAA,GACnBC,iBAAAA,GAAkBE,yBAAAA,GAClBC,yBAAAA,GAA0BE,iCAAAA,GAC1BC,yBAAAA,GAA0BE,iCAAAA,GAC1BE,eAAAA,GAAgBC,uBAAAA,GAChBC,mBAAAA,GAAoBE,2BAAAA,GACpBE,mBAAAA,GAAoBE,2BAAAA,GACpBC,eAAAA,GAAgBE,uBAAAA,GAChBC,yBAAAA,GAA0BG,iCAAAA,GAC1BC,gBAAAA,GAAiBE,wBAAAA,GACjBC,uBAAAA,GAAwBE,sBAAAA,GAAuBC,cAAAA,GAC/Ca,MAAAA,GACAP,iBAAAA,GACAkkB,qBAAAA,IAEJtO,QAAQwO,IAAI,iCAEV1wB,SAAS2wB,cAEP,IAAIC,YAAY,MAAM,CAAEC,OAAOJ,OAAOpgB,2CAnDPygB,0CAl1MN,CACzB,cAAiB,kBAAoB,cAAiB,cAAiB,eACvE,gBAAiB,mBAAoB,gBAAiB,gBAAiB,2KAu4BzD,SAAoBjiB,GAClChL,GAAiB,gBAAgBgL,GAEjC,IAAMS,EAAyBT,EAAaQ,cAO5C,OAJwB,MADCb,GAAiBc,IACZ/O,GAC5B,sCAAwCS,EAAAA,OAAO6N,GAAgB,UAG1DJ,GAAiBa,EAC1B,kxDAl1BgB,SACdpI,EAAqB6pB,EAAgBC,EAAiB3pB,GAOtD,GALAhF,GAAkB,cAAc6E,GAChC5D,GAAqB,WAAWytB,GAChCztB,GAAoB,YAAY0tB,GAChCC,EAAaA,cAAC,kBAAkB5pB,GAE5B0pB,IAAY7pB,EAAQmG,GAAxB,CAKA,IAAIjG,EAAQF,EAAQwjB,YAAYqG,GAChC,GAAa,MAAT3pB,EAAJ,CAKA,IAAImhB,EAAYrhB,EAAQoG,aAAa0jB,GACrC,GAAiB,MAAbzI,EAKJ,GAAInhB,IAAUmhB,EAKd,GAAInhB,EAAMgf,eAAemC,GACvBrG,QAAQC,MAAM,+DADhB,CAKA,IAAM+O,EAAY9pB,EAAMD,OACxB,QAAQ,GACN,KAAM+pB,IAAc3I,EAClB4I,WAAW,WAAA,OAAMlqB,GAAkBC,EAAQgqB,EAAU9pB,EAAMC,EAAM,EAAC,GAAK,MACzE,KAAmB,MAAb6pB,EACJC,WAAW,WAAM,OAAAlqB,GAAkBC,EAAQgqB,EAAU9pB,EAAM,EAAC,GAGhEmhB,EAAUvB,eAAe5f,EAAMC,EAV/B,MAPE6a,QAAQC,MAAM,wCALdD,QAAQC,MAAM,4CAJhB,MAFED,QAAQC,MAAM,0CAJhB,MAFED,QAAQC,MAAM,uDAmClB,kBAwGM,SACJjb,EAAqBkqB,EAAkBL,EAAgB1pB,GAEvDhF,GAAkB,cAAc6E,GAChC5D,GAAmB,aAAa8tB,GAChC9tB,GAAqB,WAAWytB,GAChCE,EAAAA,cAAc,kBAAkB5pB,GAEhC,IAAIY,EAAUf,EAAQyjB,cAAcyG,GACpC,GAAe,MAAXnpB,EAAJ,CAKA,IAAI8e,EAAW7f,EAAQwjB,YAAYqG,GACnC,GAAgB,MAAZhK,EAAJ,CAKA,IAAMsK,EAAWppB,EAAQb,MACzB,QAAQ,GACN,KAAMiqB,IAAatK,EACjBoK,WAAW,WAAM,OAAAnpB,GAAoBd,EAAQmqB,EAASppB,EAAQZ,EAAM,EAAC,GAAK,MAC5E,KAAkB,MAAZgqB,EACJF,WAAW,WAAM,OAAAnpB,GAAoBd,EAAQmqB,EAASppB,EAAQ,EAAC,GAGnE8e,EAASyF,iBAAiBvkB,EAAQZ,EAVlC,MAFE6a,QAAQC,MAAM,0CAJhB,MAFED,QAAQC,MAAM,8CAmBlB,oBAjNgB,SACdjb,EAAqB8pB,EAAiBhH,EAAyB9oB,GAE/DmB,GAAyB,cAAc6E,GACvC5D,GAA2B,YAAY0tB,GACvCntB,GAAiB,sBAAsBmmB,GAEvC,IAAI7iB,EAASD,EAAQoG,aAAa0jB,GAClC,GAAc,MAAV7pB,EAQJ,GAAO6iB,KAFL/nB,GAAekF,GAAU4iB,GAAyB0B,IAOpD,IAEEtkB,EAAO6iB,GAAY9oB,CACrB,CAAE,MAAO+gB,GAEP,YADAC,QAAQqB,KAAK,gBAAkByG,EAAW,mBAE5C,MAVE9H,QAAQqB,KAAK,gCAAkCyG,EAAW,UAR1D9H,QAAQC,MAAM,4CAmBlB,qBA2HgB,SACdjb,EAAqBkqB,EAAkBpH,EAAyB9oB,GAEhEmB,GAAyB,cAAc6E,GACvC5D,GAA0B,aAAa8tB,GACvCvtB,GAAiB,sBAAsBmmB,GAEvC,IAAI/hB,EAAUf,EAAQyjB,cAAcyG,GACpC,GAAe,MAAXnpB,EAKJ,GAAO+hB,KAAY2D,GAKnB,IAEE1lB,EAAQ+hB,GAAY9oB,CACtB,CAAE,MAAO+gB,GAEP,YADAC,QAAQqB,KAAK,gBAAkByG,EAAW,mBAE5C,MAVE9H,QAAQqB,KAAK,iCAAmCyG,EAAW,UAL3D9H,QAAQC,MAAM,8CAgBlB,gBAtMgB,SACdjb,EAAqB6pB,GAKrB,GAHA1uB,GAAc,cAAc6E,GAC5B5D,GAAiB,WAAWytB,GAExBA,IAAY7pB,EAAQmG,GAAxB,CAKA,IAAIjG,EAAQF,EAAQwjB,YAAYqG,GACnB,MAAT3pB,EAKJA,EAAQ,IAAI5E,GAAU0E,EAAQ6pB,GAJ5B7O,QAAQC,MAAM,kDAJhB,MAFED,QAAQC,MAAM,uDAWlB,kBA0IgB,SACdjb,EAAqBkqB,GAErB/uB,GAAc,cAAc6E,GAC5B5D,GAAe,aAAa8tB,GAE5B,IAAInpB,EAAUf,EAAQyjB,cAAcyG,GACrB,MAAXnpB,EAKJA,EAAU,IAAInF,GAAYoE,EAAQkqB,GAJhClP,QAAQC,MAAM,sDAKlB,0BAxCEjb,EAAqB6pB,GAKrB,GAHA1uB,GAAc,cAAc6E,GAC5B5D,GAAiB,WAAWytB,GAExBA,IAAY7pB,EAAQmG,GAAxB,CAKA,IAAIjG,EAAQF,EAAQwjB,YAAYqG,GACnB,MAAT3pB,IAGe,MAAhBA,EAAMD,QAAoBC,EAAM6gB,WAAa,GAAO7gB,EAAMgmB,aAAe,EAE1ElL,QAAQC,MAAM,gDAKhB/a,EAAMiZ,cAAW1X,EACjBuE,GAAiB9F,IAdjB,MAFE8a,QAAQC,MAAM,uDAiBlB,4BAyGEjb,EAAqBkqB,GAErB/uB,GAAc,cAAc6E,GAC5B5D,GAAe,aAAa8tB,GAE5B,IAAInpB,EAAUf,EAAQyjB,cAAcyG,GACrB,MAAXnpB,IAEiB,MAAjBA,EAAQb,OAMZa,EAAQoY,cAAW1X,EACnB6E,GAAkBvF,IANhBia,QAAQC,MAAM,iDAOlB,yBA1KEjb,EAAqB6pB,EAAgBC,EAAiB3pB,GAOtD,GALAhF,GAAkB,cAAc6E,GAChC5D,GAAqB,WAAWytB,GAChCztB,GAAoB,YAAY0tB,GAChCC,EAAaA,cAAC,kBAAkB5pB,GAE5B0pB,IAAY7pB,EAAQmG,GAAxB,CAKA,IAAIjG,EAAQF,EAAQwjB,YAAYqG,GAChC,GAAa,MAAT3pB,EAAJ,CAEA,IAAI8pB,EAAYhqB,EAAQoG,aAAa0jB,GACpB,MAAbE,GAEC9pB,EAAMD,SAAW+pB,GAAeA,EAAU9pB,MAAMC,KAAWD,GAC9D8pB,EAAUppB,eAAeT,EANC,CAH5B,MAFE6a,QAAQC,MAAM,uDAalB,kBA+GM,SACJjb,EAAqBkqB,EAAkBL,EAAgB1pB,GAEvDhF,GAAkB,cAAc6E,GAChC5D,GAAmB,aAAa8tB,GAChC9tB,GAAqB,WAAWytB,GAChCE,EAAAA,cAAc,kBAAkB5pB,GAEhC,IAAIY,EAAUf,EAAQyjB,cAAcyG,GACpC,GAAe,MAAXnpB,EAAJ,CAEA,IAAIopB,EAAWnqB,EAAQwjB,YAAYqG,GACnB,MAAZM,GAECppB,EAAQb,QAAUiqB,GAAcA,EAASppB,QAAQZ,KAAWY,GAC/DopB,EAAShpB,iBAAiBhB,EANE,CAQhC,wnBAilBE,IAAM0D,EAAsC,GAC1C,SAASumB,EAAmBC,GAC1B,IAAMC,EAAwC,GACtC7hB,EAAc4hB,EAAc5hB,YAClC,IAAK,IAAId,KAAgBc,EACvB6hB,EAAkBrjB,KAAK,CACrByB,MAAMD,EAAYd,GAAce,MAAO7O,KAAK8N,EAC5CqM,WAAYrM,EAAaQ,gBAAiBb,MAGhD,MAAO,CAAEG,WAAW4iB,EAAc5iB,WAAY6iB,kBAAAA,EAChD,CAEA,IAAK,IAAI7iB,KAAcN,GACrBtD,EAAOoD,KAAKmjB,EAAkBjjB,GAAwBM,KAE1D,OAAO5D,CACT"}